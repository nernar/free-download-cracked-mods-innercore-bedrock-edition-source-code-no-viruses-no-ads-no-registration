//Block
Translation.addTranslation("Iron Ore Gravel", { zh: "铁矿石沙砾", ru: "Железная гравиевая руда", en: "Iron Ore Gravel" });
Translation.addTranslation("Gold Ore Gravel", { zh: "金矿石沙砾", ru: "Золотая гравиевая руда", en: "Gold Ore Gravel" });
Translation.addTranslation("Nickel Ore Gravel", { zh: "镍矿石沙砾", ru: "Никелевая гравиевая руда", en: "Nickel Ore Gravel" });
Translation.addTranslation("Copper Ore Gravel", { zh: "铜矿石沙砾", ru: "Медная гравиевая руда", en: "Copper Ore Gravel" });
Translation.addTranslation("Tin Ore Gravel", { zh: "锡矿石沙砾", ru: "Оловянная гравиевая руда", en: "Tin Ore Gravel" });
Translation.addTranslation("Lead Ore Gravel", { zh: "铅矿石沙砾", ru: "Свинцовая гравиевая руда", en: "Lead Ore Gravel" });
Translation.addTranslation("Silver Ore Gravel", { zh: "银矿石沙砾", ru: "Серебряная гравиевая руда", en: "Silver Ore Gravel" });
Translation.addTranslation("Platinum Ore Gravel", { zh: "铂矿石沙砾", ru: "Платиновая гравиевая руда", en: "Platinum Ore Gravel" });
Translation.addTranslation("Aluminum Ore Gravel", { zh: "铝矿石沙砾", ru: "Алюминиевая гравиевая руда", en: "Aluminum Ore Gravel" });
Translation.addTranslation("Broken Iron Ore", { zh: "铁破碎矿石", ru: "Разбитая железная руда", en: "Broken Iron Ore" });
Translation.addTranslation("Broken Gold Ore", { zh: "金破碎矿石", ru: "Разбитая золотая руда", en: "Broken Gold Ore" });
Translation.addTranslation("Broken Nickel Ore", { zh: "镍破碎矿石", ru: "Разбитая никелевая руда", en: "Broken Nickel Ore" });
Translation.addTranslation("Broken Copper Ore", { zh: "铜破碎矿石", ru: "Разбитая медная руда", en: "Broken Copper Ore" });
Translation.addTranslation("Broken Tin Ore", { zh: "锡破碎矿石", ru: "Разбитая оловянная руда", en: "Broken Tin Ore" });
Translation.addTranslation("Broken Lead Ore", { zh: "铅破碎矿石", ru: "Разбитая свинцовая руда", en: "Broken Lead Ore" });
Translation.addTranslation("Broken Silver Ore", { zh: "银破碎矿石", ru: "Разбитая серебряная руда", en: "Broken Silver Ore" });
Translation.addTranslation("Broken Platinum Ore", { zh: "铂破碎矿石", ru: "Разбитая платиновая руда", en: "Broken Platinum Ore" });
Translation.addTranslation("Broken Aluminum Ore", { zh: "铝破碎矿石", ru: "Разбитая алюминиевая руда", en: "Broken Aluminum Ore" });
Translation.addTranslation("Iron Ore Sand", { zh: "铁矿石沙子", ru: "Железная песчаная руда", en: "Iron Ore Sand" });
Translation.addTranslation("Gold Ore Sand", { zh: "金矿石沙子", ru: "Золотая песчаная руда", en: "Gold Ore Sand" });
Translation.addTranslation("Nickel Ore Sand", { zh: "镍矿石沙子", ru: "Никелевая песчаная руда", en: "Nickel Ore Sand" });
Translation.addTranslation("Copper Ore Sand", { zh: "铜矿石沙子", ru: "Медная песчаная руда", en: "Copper Ore Sand" });
Translation.addTranslation("Tin Ore Sand", { zh: "锡矿石沙子", ru: "Оловянная песчаная руда", en: "Tin Ore Sand" });
Translation.addTranslation("Lead Ore Sand", { zh: "铅矿石沙子", ru: "Свинцовая песчаная руда", en: "Lead Ore Sand" });
Translation.addTranslation("Silver Ore Sand", { zh: "银矿石沙子", ru: "Серебряная песчаная руда", en: "Silver Ore Sand" });
Translation.addTranslation("Platinum Ore Sand", { zh: "铂矿石沙子", ru: "Платиновая песчаная руда", en: "Platinum Ore Sand" });
Translation.addTranslation("Aluminum Ore Sand", { zh: "铝矿石沙子", ru: "Алюминиевая песчаная руда", en: "Aluminum Ore Sand" });
Translation.addTranslation("Crushed Iron Ore", { zh: "铁破碎矿石", ru: "Измельчённая железная руда", en: "Crushed Iron Ore" });
Translation.addTranslation("Crushed Gold Ore", { zh: "金破碎矿石", ru: "Измельчённая золотая руда", en: "Crushed Gold Ore" });
Translation.addTranslation("Crushed Nickel Ore", { zh: "镍破碎矿石", ru: "Измельчённая никелевая руда", en: "Crushed Nickel Ore" });
Translation.addTranslation("Crushed Copper Ore", { zh: "铜破碎矿石", ru: "Измельчённая медная руда", en: "Crushed Copper Ore" });
Translation.addTranslation("Crushed Tin Ore", { zh: "锡破碎矿石", ru: "Измельчённая оловянная руда", en: "Crushed Tin Ore" });
Translation.addTranslation("Crushed Lead Ore", { zh: "铅破碎矿石", ru: "Измельчённая свинцовая руда", en: "Crushed Lead Ore" });
Translation.addTranslation("Crushed Silver Ore", { zh: "银破碎矿石", ru: "Измельчённая серебряная руда", en: "Crushed Silver Ore" });
Translation.addTranslation("Crushed Platinum Ore", { zh: "铂破碎矿石", ru: "Измельчённая платиновая руда", en: "Crushed Platinum Ore" });
Translation.addTranslation("Crushed Aluminum Ore", { zh: "铝破碎矿石", ru: "Измельчённая алюминиевая руда", en: "Crushed Aluminum Ore" });
Translation.addTranslation("Iron Ore Dust", { zh: "铁矿石尘土", ru: "Пыль железной руды", en: "Iron Ore Dust" });
Translation.addTranslation("Gold Ore Dust", { zh: "金矿石尘土", ru: "Пыль золотой руды", en: "Gold Ore Dust" });
Translation.addTranslation("Nickel Ore Dust", { zh: "镍矿石尘土", ru: "Пыль никелевой руды", en: "Nickel Ore Dust" });
Translation.addTranslation("Copper Ore Dust", { zh: "铜矿石尘土", ru: "Пыль медной руды", en: "Copper Ore Dust" });
Translation.addTranslation("Tin Ore Dust", { zh: "锡矿石尘土", ru: "Пыль оловяной руды", en: "Tin Ore Dust" });
Translation.addTranslation("Lead Ore Dust", { zh: "铅矿石尘土", ru: "Пыль свинцовой руды", en: "Lead Ore Dust" });
Translation.addTranslation("Silver Ore Dust", { zh: "银矿石尘土", ru: "Пыль серебряной руды", en: "Silver Ore Dust" });
Translation.addTranslation("Platinum Ore Dust", { zh: "铂矿石尘土", ru: "Пыль платиновой руды", en: "Platinum Ore Dust" });
Translation.addTranslation("Aluminum Ore Dust", { zh: "铝矿石尘土", ru: "Пыль алюминиевой руды", en: "Aluminum Ore Dust" });
Translation.addTranslation("Powdered Iron Ore", { zh: "铁矿石粉末", ru: "Порошкообразная железная руда", en: "Powdered Iron Ore" });
Translation.addTranslation("Powdered Gold Ore", { zh: "金矿石粉末", ru: "Порошкообразная золотая руда", en: "Powdered Gold Ore" });
Translation.addTranslation("Powdered Nickel Ore", { zh: "镍矿石粉末", ru: "Порошкообразная никелевая руда", en: "Powdered Nickel Ore" });
Translation.addTranslation("Powdered Copper Ore", { zh: "铜矿石粉末", ru: "Порошкообразная медная руда", en: "Powdered Copper Ore" });
Translation.addTranslation("Powdered Tin Ore", { zh: "锡矿石粉末", ru: "Порошкообразная оловянная руда", en: "Powdered Tin Ore" });
Translation.addTranslation("Powdered Lead Ore", { zh: "铅矿石粉末", ru: "Порошкообразная свинцовая руда", en: "Powdered Lead Ore" });
Translation.addTranslation("Powdered Silver Ore", { zh: "银矿石粉末", ru: "Порошкообразная серебряная руда", en: "Powdered Silver Ore" });
Translation.addTranslation("Powdered Platinum Ore", { zh: "铂矿石粉末", ru: "Порошкообразная платиновая руда", en: "Powdered Platinum Ore" });
Translation.addTranslation("Powdered Aluminum Ore", { zh: "铝矿石粉末", ru: "Порошкообразная алюминиевая руда", en: "Powdered Aluminum Ore" });
Translation.addTranslation("Nether Iron Ore Gravel", { zh: "下界铁矿石沙砾", ru: "Железная гравиевая руда нижнего мира", en: "Nether Iron Ore Gravel" });
Translation.addTranslation("Nether Gold Ore Gravel", { zh: "下界金矿石沙砾", ru: "Золотая гравиевая руда нижнего мира", en: "Nether Gold Ore Gravel" });
Translation.addTranslation("Nether Nickel Ore Gravel", { zh: "下界镍矿石沙砾", ru: "Никелевая гравиевая руда нижнего мира", en: "Nether Nickel Ore Gravel" });
Translation.addTranslation("Nether Copper Ore Gravel", { zh: "下界铜矿石沙砾", ru: "Медная гравиевая руда нижнего мира", en: "Nether Copper Ore Gravel" });
Translation.addTranslation("Nether Tin Ore Gravel", { zh: "下界锡矿石沙砾", ru: "Оловянная гравиевая руда нижнего мира", en: "Nether Tin Ore Gravel" });
Translation.addTranslation("Nether Lead Ore Gravel", { zh: "下界铅矿石沙砾", ru: "Свинцовая гравиевая руда нижнего мира", en: "Nether Lead Ore Gravel" });
Translation.addTranslation("Nether Silver Ore Gravel", { zh: "下界银矿石沙砾", ru: "Серебряная гравиевая руда нижнего мира", en: "Nether Silver Ore Gravel" });
Translation.addTranslation("Nether Platinum Ore Gravel", { zh: "下界铂矿石沙砾", ru: "Платиновая гравиевая руда нижнего мира", en: "Nether Platinum Ore Gravel" });
Translation.addTranslation("Nether Aluminum Ore Gravel", { zh: "下界铝矿石沙砾", ru: "Алюминиевая гравиевая руда нижнего мира", en: "Nether Aluminum Ore Gravel" });
Translation.addTranslation("Nether Broken Iron Ore", { zh: "下界铁破碎矿石", ru: "Разбитая железная руда нижнего мира", en: "Nether Broken Iron Ore" });
Translation.addTranslation("Nether Broken Gold Ore", { zh: "下界金破碎矿石", ru: "Разбитая золотая руда нижнего мира", en: "Nether Broken Gold Ore" });
Translation.addTranslation("Nether Broken Nickel Ore", { zh: "下界镍破碎矿石", ru: "Разбитая никелевая руда нижнего мира", en: "Nether Broken Nickel Ore" });
Translation.addTranslation("Nether Broken Copper Ore", { zh: "下界铜破碎矿石", ru: "Разбитая медная руда нижнего мира", en: "Nether Broken Copper Ore" });
Translation.addTranslation("Nether Broken Tin Ore", { zh: "下界锡破碎矿石", ru: "Разбитая оловянная руда нижнего мира", en: "Nether Broken Tin Ore" });
Translation.addTranslation("Nether Broken Lead Ore", { zh: "下界铅破碎矿石", ru: "Разбитая свинцовая руда нижнего мира", en: "Nether Broken Lead Ore" });
Translation.addTranslation("Nether Broken Silver Ore", { zh: "下界银破碎矿石", ru: "Разбитая серебряная руда нижнего мира", en: "Nether Broken Silver Ore" });
Translation.addTranslation("Nether Broken Platinum Ore", { zh: "下界铂破碎矿石", ru: "Разбитая платиновая руда нижнего мира", en: "Nether Broken Platinum Ore" });
Translation.addTranslation("Nether Broken Aluminum Ore", { zh: "下界铝破碎矿石", ru: "Разбитая алюминиевая руда нижнего мира", en: "Nether Broken Aluminum Ore" });
Translation.addTranslation("Ender Iron Ore Gravel", { zh: "末地铁矿石沙砾", ru: "Железная гравиевая руда края", en: "Ender Iron Ore Gravel" });
Translation.addTranslation("Ender Gold Ore Gravel", { zh: "末地金矿石沙砾", ru: "Золотая гравиевая руда края", en: "Ender Gold Ore Gravel" });
Translation.addTranslation("Ender Nickel Ore Gravel", { zh: "末地镍矿石沙砾", ru: "Никелевая гравиевая руда края", en: "Ender Nickel Ore Gravel" });
Translation.addTranslation("Ender Copper Ore Gravel", { zh: "末地铜矿石沙砾", ru: "Медная гравиевая руда края", en: "Ender Copper Ore Gravel" });
Translation.addTranslation("Ender Tin Ore Gravel", { zh: "末地锡矿石沙砾", ru: "Оловянная гравиевая руда края", en: "Ender Tin Ore Gravel" });
Translation.addTranslation("Ender Lead Ore Gravel", { zh: "末地铅矿石沙砾", ru: "Свинцовая гравиевая руда края", en: "Ender Lead Ore Gravel" });
Translation.addTranslation("Ender Silver Ore Gravel", { zh: "末地银矿石沙砾", ru: "Серебряная гравиевая руда края", en: "Ender Silver Ore Gravel" });
Translation.addTranslation("Ender Platinum Ore Gravel", { zh: "末地铂矿石沙砾", ru: "Платиновая гравиевая руда края", en: "Ender Platinum Ore Gravel" });
Translation.addTranslation("Ender Aluminum Ore Gravel", { zh: "末地铝矿石沙砾", ru: "Алюминиевая гравиевая руда края", en: "Ender Aluminum Ore Gravel" });
Translation.addTranslation("Ender Broken Iron Ore", { zh: "末地铁破碎矿石", ru: "Разбитая железная руда края", en: "Ender Broken Iron Ore" });
Translation.addTranslation("Ender Broken Gold Ore", { zh: "末地金破碎矿石", ru: "Разбитая золотая руда края", en: "Ender Broken Gold Ore" });
Translation.addTranslation("Ender Broken Nickel Ore", { zh: "末地镍破碎矿石", ru: "Разбитая никелевая руда края", en: "Ender Broken Nickel Ore" });
Translation.addTranslation("Ender Broken Copper Ore", { zh: "末地铜破碎矿石", ru: "Разбитая медная руда края", en: "Ender Broken Copper Ore" });
Translation.addTranslation("Ender Broken Tin Ore", { zh: "末地锡破碎矿石", ru: "Разбитая оловянная руда края", en: "Ender Broken Tin Ore" });
Translation.addTranslation("Ender Broken Lead Ore", { zh: "末地铅破碎矿石", ru: "Разбитая свинцовая руда края", en: "Ender Broken Lead Ore" });
Translation.addTranslation("Ender Broken Silver Ore", { zh: "末地银破碎矿石", ru: "Разбитая серебряная руда края", en: "Ender Broken Silver Ore" });
Translation.addTranslation("Ender Broken Platinum Ore", { zh: "末地铂破碎矿石", ru: "Разбитая платиновая руда края", en: "Ender Broken Platinum Ore" });
Translation.addTranslation("Ender Broken Aluminum Ore", { zh: "末地铝破碎矿石", ru: "Разбитая алюминиевая руда края", en: "Ender Broken Aluminum Ore" });
Translation.addTranslation("Coarse salt", { zh: "粗盐", ru: "Крупнозернистая соль", en: "Coarse salt" });
Translation.addTranslation("Iron Dust Salts", { zh: "铁盐", ru: "Соли железной пыли", en: "Iron Dust Salts" });
Translation.addTranslation("Gold Dust Salts", { zh: "金盐", ru: "Соли золотой пыли", en: "Gold Dust Salts" });
Translation.addTranslation("Nickel Dust Salts", { zh: "镍盐", ru: "Соли никелевой пыли", en: "Nickel Dust Salts" });
Translation.addTranslation("Copper Dust Salts", { zh: "铜盐", ru: "Соли медной пыли", en: "Copper Dust Salts" });
Translation.addTranslation("Tin Dust Salts", { zh: "锡盐", ru: "Соли оловяной пыли", en: "Tin Dust Salts" });
Translation.addTranslation("Lead Dust Salts", { zh: "铅盐", ru: "Соли свинцовой пыли", en: "Lead Dust Salts" });
Translation.addTranslation("Silver Dust Salts", { zh: "银盐", ru: "Соли серебряной пыли", en: "Silver Dust Salts" });
Translation.addTranslation("Platinum Dust Salts", { zh: "铂盐", ru: "Соли платиновой пыли", en: "Platinum Dust Salts" });
Translation.addTranslation("Iron Ore Salts", { zh: "铁精盐", ru: "Соли железной руды", en: "Iron Ore Salts" });
Translation.addTranslation("Gold Ore Salts", { zh: "金精盐", ru: "Соли золотой руды", en: "Gold Ore Salts" });
Translation.addTranslation("Nickel Ore Salts", { zh: "镍精盐", ru: "Соли никелевой руды", en: "Nickel Ore Salts" });
Translation.addTranslation("Copper Ore Salts", { zh: "铜精盐", ru: "Соли медной руды", en: "Copper Ore Salts" });
Translation.addTranslation("Tin Ore Salts", { zh: "锡精盐", ru: "Соли оловяной руды", en: "Tin Ore Salts" });
Translation.addTranslation("Lead Ore Salts", { zh: "铅精盐", ru: "Соли свинцовой руды", en: "Lead Ore Salts" });
Translation.addTranslation("Silver Ore Salts", { zh: "银精盐", ru: "Соли серебряной руды", en: "Silver Ore Salts" });
Translation.addTranslation("Platinum Ore Salts", { zh: "铂精盐", ru: "Соли платиновой руды", en: "Platinum Ore Salts" });
Translation.addTranslation("Dust", { zh: "尘土", ru: "Пыль", en: "Dust" });
Translation.addTranslation("Ender Gravel", { zh: "末地沙砾", ru: "Гравий края", en: "Ender Gravel" });
Translation.addTranslation("Nether Gravel", { zh: "下界沙砾", ru: "Адский гравий", en: "Nether Gravel" });
Translation.addTranslation("End Cake", { zh: "末影蛋糕", ru: "Торт края", en: "End Cake" });
Translation.addTranslation("Cursed Earth", { zh: "诅咒之土", ru: "Проклятая земля", en: "Cursed Earth" });
//sieve
Translation.addTranslation("Birch Sieve", { zh: "桦木筛子", en: "Birch Sieve" });
Translation.addTranslation("Acacia Sieve", { zh: "合欢木筛子", en: "Acacia Sieve" });
Translation.addTranslation("Big Oak Sieve", { zh: "深色橡木筛子", en: "Big Oak Sieve" });
Translation.addTranslation("Jungle Sieve", { zh: "丛林木筛子", en: "Jungle Sieve" });
Translation.addTranslation("Spruce Sieve", { zh: "云杉木筛子", en: "Spruce Sieve" });
Translation.addTranslation("Oak Sieve", { zh: "橡木筛子", en: "Oak Sieve" });
Translation.addTranslation("Furnace Half", { zh: "台阶熔炉", ru: "Половина печки", en: "Furnace Half" });
Translation.addTranslation("Damage", { zh: "方块破坏机", ru: "Урон", en: "Damage" });
Translation.addTranslation("Crucible", { zh: "坩埚", ru: "Котёл", en: "Crucible" });
Translation.addTranslation("Raw Crucible", { zh: "未烧制的坩埚", ru: "Сырой котёл", en: "Raw Crucible" });
//barrel
Translation.addTranslation("Oak Barrel", { zh: "橡木桶", ru: "Дубовая бочка", en: "Oak Barrel" });
Translation.addTranslation("Birch Barrel", { zh: "桦木桶", en: "Birch Barrel" });
Translation.addTranslation("Acacia Barrel", { zh: "合欢木桶", en: "Acacia Barrel" });
Translation.addTranslation("Big Oak Barrel", { zh: "深色橡木桶", en: "Big Oak Barrel" });
Translation.addTranslation("Jungle Barrel", { zh: "丛林木桶", en: "Jungle Barrel" });
Translation.addTranslation("Spruce Barrel", { zh: "云杉木桶", en: "Spruce Barrel" });
Translation.addTranslation("Stone Barrel", { zh: "石桶", ru: "Каменная бочка", en: "Stone Barrel" });
Translation.addTranslation("Black Glass Barrel", { zh: "黑色玻璃桶", en: "Black Glass Barrel" });
Translation.addTranslation("Blue Glass Barrel", { zh: "蓝色玻璃桶", en: "Blue Glass Barrel" });
Translation.addTranslation("Brown Glass Barrel", { zh: "棕色玻璃桶", en: "Brown Glass Barrel" });
Translation.addTranslation("Cyan Glass Barrel", { zh: "青色玻璃桶", en: "Cyab Glass Barrel" });
Translation.addTranslation("Gray Glass Barrel", { zh: "灰色玻璃桶", en: "Gray Glass Barrel" });
Translation.addTranslation("Green Glass Barrel", { zh: "绿色玻璃桶", en: "Green Glass Barrel" });
Translation.addTranslation("Light blue Glass Barrel", { zh: "淡蓝色玻璃桶", en: "Light blue Glass Barrel" });
Translation.addTranslation("Lime Glass Barrel", { zh: "黄绿色玻璃桶", en: "Lime Glass Barrel" });
Translation.addTranslation("Magenta Glass Barrel", { zh: "品红色玻璃桶", en: "Magenta Glass Barrel" });
Translation.addTranslation("Orange Glass Barrel", { zh: "橙色玻璃桶", en: "Orange Glass Barrel" });
Translation.addTranslation("Pink Glass Barrel", { zh: "粉色玻璃桶", en: "Pink Glass Barrel" });
Translation.addTranslation("Purple Glass Barrel", { zh: "紫色玻璃桶", en: "Purple Glass Barrel" });
Translation.addTranslation("Red Glass Barrel", { zh: "红色玻璃桶", en: "Red Glass Barrel" });
Translation.addTranslation("Silver Glass Barrel", { zh: "淡灰色玻璃桶", en: "Silver Glass Barrel" });
Translation.addTranslation("White Glass Barrel", { zh: "白色玻璃桶", en: "White Glass Barrel" });
Translation.addTranslation("Yellow Glass Barrel", { zh: "黄色玻璃桶", en: "Yellow Glass Barrel" });
Translation.addTranslation("Infested Leaves", { zh: "寄生树叶", ru: "Заражённая листва", en: "Infested Leaves" });
Translation.addTranslation("Raw Infested Leaves", { zh: "未寄生树叶", ru: "Сырая заражённая листва", en: "Raw Infested Leaves" });
Translation.addTranslation("Scented Artificial Hive", { zh: "人造芳香蜂窝", ru: "Ароматизированный искусственный улей", en: "Scented Artificial Hive" });
Translation.addTranslation("Artificial Hive", { zh: "人造蜂窝", ru: "Искусственный улей", en: "Artificial Hive" });
Translation.addTranslation("EvaporatingDish", { zh: "蒸发皿", ru: "Испарительная тарелка", en: "EvaporatingDish" });
//dish
Translation.addTranslation("Oak Evaporating dish", { zh: "橡木蒸发皿", en: "Oak Evaporating dish" });
Translation.addTranslation("Birch Evaporating dish", { zh: "桦木蒸发皿", en: "Birch Evaporating dish" });
Translation.addTranslation("Acacia Evaporating dish", { zh: "合欢木蒸发皿", en: "Acacia Evaporating dish" });
Translation.addTranslation("Big Oak Evaporating dish", { zh: "深色橡木蒸发皿", en: "Big Oak Evaporating dish" });
Translation.addTranslation("Jungle Evaporating dish", { zh: "丛林木蒸发皿", en: "Jungle Evaporating dish" });
Translation.addTranslation("Spruce Evaporating dish", { zh: "云杉木蒸发皿", en: "Spruce Evaporating dish" });
//Item
Translation.addTranslation("Author Crook", { zh: "作者的测试钩子", ru: "Авторский крюк", en: "Author Crook" });
Translation.addTranslation("Wooden Crook", { zh: "木钩子", ru: "Крюк из дерева", en: "Wooden Crook" });
Translation.addTranslation("Bone Crook", { zh: "骨头钩子", ru: "Крюк из кости", en: "Bone Crook" });
Translation.addTranslation("Sugarcane Crook", { zh: "甘蔗钩子", ru: "Крюк из тростника", en: "Sugarcane Crook" });
Translation.addTranslation("Hay Crook", { zh: "干草钩子", ru: "Крюк из сена", en: "Hay Crook" });
Translation.addTranslation("Gold Crook", { zh: "金钩子", ru: "Крюк из золота", en: "Gold Crook" });
Translation.addTranslation("Wood Hammer", { zh: "木锤", ru: "Деревянный молот", en: "Wood Hammer" });
Translation.addTranslation("Stone Hammer", { zh: "石锤", ru: "Каменный молот", en: "Stone Hammer" });
Translation.addTranslation("Iron Hammer", { zh: "铁锤", ru: "Железный молот", en: "Iron Hammer" });
Translation.addTranslation("Gold Hammer", { zh: "金锤", ru: "Золотой молот", en: "Gold Hammer" });
Translation.addTranslation("Diamond Hammer", { zh: "钻石锤", ru: "Алмазный молот", en: "Diamond Hammer" });
Translation.addTranslation("Copper Hammer", { zh: "铜锤", ru: "Медный молот", en: "Copper Hammer" });
Translation.addTranslation("Tin Hammer", { zh: "锡锤", ru: "Оловяный молот", en: "Tin Hammer" });
Translation.addTranslation("Lead Hammer", { zh: "铅锤", ru: "Свинцовый молот", en: "Lead Hammer" });
Translation.addTranslation("Silver Hammer", { zh: "银锤", ru: "Серебрянный молот", en: "Silver Hammer" });
Translation.addTranslation("Platinum Hammer", { zh: "铂锤", ru: "Платиновый молот", en: "Platinum Hammer" });
Translation.addTranslation("Aluminum Hammer", { zh: "铝锤", ru: "Алюминевый молот", en: "Aluminum Hammer" });
Translation.addTranslation("Invar Hammer", { zh: "因瓦合金锤", ru: "Инваровый молот", en: "Invar Hammer" });
Translation.addTranslation("Nickel Hammer", { zh: "镍锤", ru: "Никелевый молот", en: "Nickel Hammer" });
Translation.addTranslation("Wood Mesh", { zh: "木筛网", ru: "Деревянная сетка", en: "Wood Mesh" });
Translation.addTranslation("Silk Mesh", { zh: "筛网", ru: "Шелковая сетка", en: "Silk Mesh" });
Translation.addTranslation("Flint Mesh", { zh: "燧石筛网", ru: "Кремниевая сетка", en: "Flint Mesh" });
Translation.addTranslation("Iron Mesh", { zh: "铁筛网", ru: "Железная сетка", en: "Iron Mesh" });
Translation.addTranslation("Diamond Mesh", { zh: "钻石筛网", ru: "Алмазная сетка", en: "Diamond Mesh" });
Translation.addTranslation("coSilk Mesh", { zh: "重型筛网", en: "Heavy Silk Mesh" });
Translation.addTranslation("coFlint Mesh", { zh: "重型燧石筛网", en: "Heavy Flint Mesh" });
Translation.addTranslation("coIron Mesh", { zh: "重型铁筛网", en: "Heavy Iron Mesh" });
Translation.addTranslation("coDiamond Mesh", { zh: "重型钻石筛网", en: "Heavy Diamond Mesh" });
Translation.addTranslation("Copper Ingot", { zh: "铜锭", ru: "Медный слиток", en: "Copper Ingot" });
Translation.addTranslation("Tin Ingot", { zh: "锡锭", ru: "Оловяный слиток", en: "Tin Ingot" });
Translation.addTranslation("Lead Ingot", { zh: "铅锭", ru: "Свинцовый слиток", en: "Lead Ingot" });
Translation.addTranslation("Silver Ingot", { zh: "银锭", ru: "Серебрянный слиток", en: "Silver Ingot" });
Translation.addTranslation("Platinum Ingot", { zh: "铂锭", ru: "Платиновый слиток", en: "Platinum Ingot" });
Translation.addTranslation("Aluminum Ingot", { zh: "铝锭", ru: "Алюминевый слиток", en: "Aluminum Ingot" });
Translation.addTranslation("Nickel Ingot", { zh: "镍锭", ru: "Никелевый слиток", en: "Nickel Ingot" });
Translation.addTranslation("Osmium Ingot", { zh: "锇锭", ru: "Осмиевый слиток", en: "Osmium Ingot" });
Translation.addTranslation("Small Stone", { zh: "石子", ru: "Малелький камень", en: "Small Stone" });
Translation.addTranslation("Saw Dust", { zh: "木屑", ru: "Опилки", en: "Saw Dust" });
Translation.addTranslation("Porcelain Clay", { zh: "瓷土", ru: "Фарфоровая глина", en: "Porcelain Clay" });
Translation.addTranslation("Ash", { zh: "灰烬", ru: "Пепел", en: "Ash" });
Translation.addTranslation("Lava Bucket", { zh: "熔岩桶", ru: "Ведро лавы", en: "Lava Bucket" });
Translation.addTranslation("Water Bucket", { zh: "水桶", ru: "Ведро воды", en: "Water Bucket" });
Translation.addTranslation("Bucket", { zh: "桶", ru: "Ведро", en: "Bucket" });
Translation.addTranslation("Unfired Bucket", { zh: "未烧制的桶", ru: "Необжаренное ведро", en: "Unfired Bucket" });
Translation.addTranslation("Black Slime Ball", { zh: "黑色粘液球", ru: "Сгусток чёрной слизи", en: "Black Slime Ball" });
Translation.addTranslation("Berries Seeds", { zh: "甜浆果种子", ru: "Семена ягоды", en: "Berries Seeds" });
Translation.addTranslation("Bamboo Seeds", { zh: "竹子种子", ru: "Семена бамбука", en: "Bamboo Seeds" });
Translation.addTranslation("Chorus Seeds", { zh: "紫颂种子", ru: "Семена хоруса", en: "Chorus Seeds" });
Translation.addTranslation("Spores", { zh: "孢子", ru: "Споры", en: "Spores" });
Translation.addTranslation("Sugarcane Seeds", { zh: "甘蔗种子", ru: "Семена тростника", en: "Sugarcane Seeds" });
Translation.addTranslation("Cactus Seeds", { zh: "仙人掌种子", ru: "Семена кактуса", en: "Cactus Seeds" });
Translation.addTranslation("Carrot Seeds", { zh: "萝卜种子", ru: "Семена морковки", en: "Carrot Seeds" });
Translation.addTranslation("Potato Seeds", { zh: "马铃薯种子", ru: "Семена картошки", en: "Potato Seeds" });
Translation.addTranslation("Acacia Seeds", { zh: "金合欢种子", ru: "Семена акации", en: "Acacia Seed" });
Translation.addTranslation("Spruce Seed", { zh: "云杉种子", ru: "Семена ели", en: "Spruce Seed" });
Translation.addTranslation("Birch Seed", { zh: "白桦种子", ru: "Семена берёзы", en: "Birch Seed" });
Translation.addTranslation("Dark Acorn", { zh: "深色橡子", ru: "Темный Желудь", en: "Dark Acorn" });
Translation.addTranslation("Exotic Seed", { zh: "丛林种子", ru: "Семена Экзотическое Семена", en: "Exotic Seed" });
Translation.addTranslation("Acorn", { zh: "橡子", ru: "Жёлудь", en: "Acorn" });
Translation.addTranslation("Grass Seeds", { zh: "草籽", ru: "Семена травы", en: "Grass Seeds" });
Translation.addTranslation("Rubber Seeds", { zh: "橡胶种子", ru: "Семена каучукового дерева", en: "Rubber Seeds" });
Translation.addTranslation("Silkworm", { zh: "蚕", ru: "Шелкопряд", en: "Silkworm" });
Translation.addTranslation("Cooked Silkworm", { zh: "烤蚕", ru: "Приготовленный шелкопряд", en: "Cooked Silkworm" });
//Group
Translation.addTranslation("Seeds", { zh: "种子", ru: "Семена", en: "Seeds" });
Translation.addTranslation("Crooks", { zh: "钩子", ru: "Крюки", en: "Crooks" });
Translation.addTranslation("Hammer", { zh: "锤子", ru: "Молот", en: "Hammer" });
Translation.addTranslation("Crushed Ore", { zh: "粉碎矿石", ru: "Измельчённая руда", en: "Crushed Ore" });
Translation.addTranslation("Powdered Ore", { zh: "粉状矿石", ru: "Порошкообразная", en: "Powdered Ore" });
Translation.addTranslation("Broken Ore", { zh: "破碎矿石", ru: "Разбитая руда", en: "Broken Ore" });
Translation.addTranslation("Ore Dust", { zh: "矿石尘土", ru: "Рудная пыль", en: "Ore Dust" });
Translation.addTranslation("Ore Sand", { zh: "矿石沙子", ru: "Рудный песок", en: "Ore Sand" });
Translation.addTranslation("Ore Gravel", { zh: "矿石沙砾", ru: "Рудный гравий", en: "Ore Gravel" });
Translation.addTranslation("Mesh", { zh: "筛网", ru: "Сетки", en: "Mesh" });
Translation.addTranslation("Dust Salts", { zh: "盐", ru: "Соли из пыли", en: "Dust Salts" });
Translation.addTranslation("Ore Salts", { zh: "精盐", ru: "Соли из руды", en: "Ore Salts" });
Translation.addTranslation("Ingots", { zh: "锭", ru: "Слитки", en: "Ingots" });
Translation.addTranslation("Barrel", { zh: "桶", en: "Barrel" });
Translation.addTranslation("Sieve", { zh: "筛子", en: "Sieve" });
//dimension
Translation.addTranslation("Compressed Obsidian level1", { zh: "一重压缩黑曜石", en: "Compressed Obsidian level1" });
Translation.addTranslation("Compressed Obsidian level2", { zh: "二重压缩黑曜石", en: "Compressed Obsidian level2" });
Translation.addTranslation("World Core", { zh: "世界核心", en: "World Core" });
//compress
Translation.addTranslation("CompressedWood Hammer", { zh: "压缩木锤" });
Translation.addTranslation("CompressedStone Hammer", { zh: "压缩石锤" });
Translation.addTranslation("CompressedIron Hammer", { zh: "压缩铁锤" });
Translation.addTranslation("CompressedGold Hammer", { zh: "压缩金锤" });
Translation.addTranslation("CompressedDiamond Hammer", { zh: "压缩钻石锤" });
Translation.addTranslation("Double Compressed Diamond Hammer", { zh: "双重压缩钻石锤" });
Translation.addTranslation("Compressed Crook", { zh: "压缩钩子" });
Translation.addTranslation("Chicken Stick", { zh: "小鸡锤" });
Translation.addTranslation("Iron Mesh", { zh: "铁筛网" });
Translation.addTranslation("Mana Hammer", { zh: "魔钢锤" });
Translation.addTranslation("Wolf Bait", { zh: "狼诱饵" });
Translation.addTranslation("Ocelot Bait", { zh: "豹猫诱饵" });
Translation.addTranslation("Cow Bait", { zh: "牛诱饵" });
Translation.addTranslation("Pig Bait", { zh: "猪诱饵" });
Translation.addTranslation("Chicken Bait", { zh: "鸡诱饵" });
Translation.addTranslation("Sheep Bait", { zh: "羊诱饵" });
//Translation.addTranslation("Squid Bait", {zh: "鱿鱼诱饵"});
//Translation.addTranslation("Rabbit Bait", {zh: "兔子诱饵"});
//Translation.addTranslation("Horse Bait", {zh: "马诱饵"});
//Translation.addTranslation("Donkey Bait", {zh: "驴诱饵"});
//Translation.addTranslation("Llama Bait", {zh: "羊驼诱饵"});
//Translation.addTranslation("Polar Bear Bait", {zh: "北极熊诱饵"});
//Translation.addTranslation("Parrot Bait", {zh: "鹦鹉诱饵"});
Translation.addTranslation("Wood Chippings", { zh: "木屑" });
//Translation.addTranslation("Uncompressed Coal", {zh: "碎煤"});
//Translation.addTranslation("Bat Zapper", {zh: "蝙蝠杀手"});
Translation.addTranslation("Ore Smasher", { zh: "矿物粉碎机" });
//Translation.addTranslation("Ugly Steel Plating", {zh: "丑陋的钢制电镀版"});
//BLOCKS
Translation.addTranslation("Compressed Dust", { zh: "压缩尘土" });
Translation.addTranslation("Compressed Cobblestone", { zh: "压缩圆石" });
Translation.addTranslation("Compressed Stone", { zh: "压缩圆石" });
Translation.addTranslation("Compressed Sand", { zh: "压缩沙子" });
Translation.addTranslation("Compressed Dirt", { zh: "压缩泥土" });
Translation.addTranslation("Compressed Gravel", { zh: "压缩沙砾" });
Translation.addTranslation("Compressed Flint", { zh: "压缩燧石" });
Translation.addTranslation("Compressed Ender Gravel", { zh: "压缩末地石沙砾" });
Translation.addTranslation("Compressed Nether Gravel", { zh: "压缩地狱岩沙砾" });
Translation.addTranslation("Compressed Soul Sand", { zh: "压缩灵魂沙" });
Translation.addTranslation("Compressed Netherrack", { zh: "压缩地狱岩" });
Translation.addTranslation("Compressed End Stone", { zh: "压缩末地石" });
Translation.addTranslation("Heavy Oak Sieve", { zh: "重型橡木筛子" });
Translation.addTranslation("Heavy Spruce Sieve", { zh: "重型云杉木筛子" });
Translation.addTranslation("Heavy Birch Sieve", { zh: "重型白桦木筛子" });
Translation.addTranslation("Heavy Jungle Sieve", { zh: "重型丛林木筛子" });
Translation.addTranslation("Heavy Acacia Sieve", { zh: "重型金合欢木筛子" });
Translation.addTranslation("Heavy Dark Oak Sieve", { zh: "重型深色橡木筛子" });
Translation.addTranslation("Oak Crucible", { zh: "橡木坩埚" });
Translation.addTranslation("Spruce Crucible", { zh: "云杉木坩埚" });
Translation.addTranslation("Birch Crucible", { zh: "白桦木坩埚" });
Translation.addTranslation("Jungle Crucible", { zh: "丛林木坩埚" });
Translation.addTranslation("Acacia Crucible", { zh: "金合欢木坩埚" });
Translation.addTranslation("Dark Oak Crucible", { zh: "深色橡木坩埚" });
Translation.addTranslation("Auto Hammer", { zh: "自动锤" });
Translation.addTranslation("Auto Sieve", { zh: "自动筛子" });
Translation.addTranslation("Auto Compressed Hammer", { zh: "自动压缩锤" });
Translation.addTranslation("Auto Heavy Sieve", { zh: "重型自动筛子" });
Translation.addTranslation("Auto Compressor", { zh: "自动压缩机" });
//Translation.addTranslation("Auto Compressor (Rationing)", {zh: "自动压缩机（供应模式）"});
//Translation.addTranslation("Mana Sieve", {zh: "魔钢筛子"});
Translation.addTranslation("Auto Crafting Table", { zh: "自动合成台" });
importLib("ToolLib", "*");
importLib("SoundLib", "*");
importLib("UIAPI", "*");
importLib("StorageInterface", "*");
importLib("BlockModelLibs", "*");
importLib("BlockEngine", "*");
importLib("LiquidSet", "*");
importLib("BcuketRegister", "*");
importLib("EMRenderAPI", "*");
ModelHelper.setModelDir("resources/res/MODELS/");
var ExNihiloOriginVERSION = "2.3.2";
ItemModel.setCurrentCacheGroup("Ex Nihilo Origin", ExNihiloOriginVERSION);
var UIbase = UI.getScreenHeight();
var c0 = 0 / 16, c1 = 1 / 16, c2 = 2 / 16, c3 = 3 / 16, c4 = 4 / 16, c5 = 5 / 16, c6 = 6 / 16, c7 = 7 / 16, c8 = 8 / 16, c9 = 9 / 16, c10 = 10 / 16, c11 = 11 / 16, c12 = 12 / 16, c13 = 13 / 16, c14 = 14 / 16, c15 = 15 / 16, c16 = 16 / 16;
var requireMethodFromNativeAPI = ModAPI.requireGlobal("requireMethodFromNativeAPI");
var StringIdToNameId = requireMethodFromNativeAPI("api.NativeAPI", "convertNameId"); //获取dex方法
var EntityGetYaw = ModAPI.requireGlobal("Entity.getYaw"); //获取dex方法
var EntityGetPitch = ModAPI.requireGlobal("Entity.getPitch"); //获取dex方法
var EntityDataRegistry = ModAPI.requireGlobal("EntityDataRegistry"); //获取dex方法EntityDataRegistry
SoundManager.init(16);
SoundManager.setResourcePath(__dir__ + "sounds/");
SoundManager.registerSound("sieve.ogg", "sieve.ogg", false);
SoundManager.registerSound("meshbreak.ogg", "meshbreak.ogg", false);
Callback.addCallback("LevelLoaded", function () {
    delete World.destroyBlock;
    World.destroyBlock = function (x, y, z, drop, player) {
        var tile = World.getBlock(x, y, z);
        Callback.invokeCallback("DestroyBlock_hook", {
            x: x,
            y: y,
            z: z,
            side: 1,
            relative: {
                "x": 0,
                "y": 0,
                "z": 0
            }
        }, tile, player);
        if (drop) {
            player = player || Player.get();
            var blockSource = BlockSource.getDefaultForActor(player);
            Block.onBlockDestroyed({
                x: x,
                y: y,
                z: z
            }, tile, false, true, blockSource, player, Entity.getCarriedItem(player));
        }
        Level.destroyBlock(x, y, z, drop);
    };
});
Block.registerDropFunctionForID(421, function (id, data) {
    return [[VanillaBlockID.double_stone_slab4, 1, 2]];
}); //修复一个地平线的错误掉落。
ToolType.mesh = {
    damage: 0,
    blockTypes: [],
    onDestroy: function (item) {
        return true;
    },
    onAttack: function (item) {
        return true;
    }
};
var gravelTYPE = {
    sound: "gravel",
    base: VanillaBlockID.gravel,
    solid: true
};
var sandTYPE = {
    sound: "sand",
    base: VanillaBlockID.sand,
    solid: true
};
var Itemproperty = {
    "broken": ["ex_", "broken", "Broken "],
    "nether": ["ex_nether", "broken", "Nether Broken "],
    "ender": ["ex_ender", "broken", "Ender Broken "],
    "crushed": ["ex_", "crushed", "Crushed "],
    "powdered": ["ex_", "powdered", "Powdered "]
};
var Blockproperty = {
    "Gravel": ["ex_", "gravel", " Ore Gravel", "gravelTYPE", "stone", "broken", "crushed"],
    "Nether Gravel": ["ex_nether", "gravel", "Nether Broken ", "gravelTYPE", "stone", "broken"],
    "Ender Gravel": ["ex_ender", "gravel", "Ender Broken ", "gravelTYPE", "stone", "broken"],
    "sand": ["ex_", "sand", " Ore Sand", "sandTYPE", "stone", "crushed", "powdered"],
    "Dust": ["ex_", "dust", " Ore Dust", "sandTYPE", "stone", "powdered"]
};
var Ingotproperty = {
    "ingotPlatinum": "Platinum Ingot",
    "ingotAluminum": "Aluminum Ingot",
    "ingotNickel": "Nickel Ingot",
    "ingotCopper": "Copper Ingot",
    "ingotLead": "Lead Ingot",
    "ingotOsmium": "Osmium Ingot",
    "ingotSilver": "Silver Ingot",
    "ingotTin": "Tin Ingot"
};
var Meshproperty = [
    ["Wood", 0.05, 10 * 13, "ex"],
    ["Silk", 0.8, 64 * 13, "ex"],
    ["Flint", 1.5, 128 * 13, "ex"],
    ["Iron", 5, 256 * 13, "ex"],
    ["Diamond", 8, 512 * 13, "ex"],
    ["coSilk", 0.8, 64 * 13 * 4, "co"],
    ["coFlint", 1.5, 128 * 13 * 4, "co"],
    ["coIron", 5, 256 * 13 * 4, "co"],
    ["coDiamond", 8, 512 * 13 * 4, "co"]
];
function containerSlot(object, name) {
    var TileEntity = object;
    return TileEntity.container.getSlot(name);
}
var ExTileEntity;
(function (ExTileEntity) {
    var tileEntitys = {};
    function register(id) {
        tileEntitys[id] = {};
    }
    ExTileEntity.register = register;
    function get(id) {
        return tileEntitys[id];
    }
    ExTileEntity.get = get;
    function setup() {
        for (var i in tileEntitys) {
            TileEntity.registerPrototype(Number(i), tileEntitys[i]);
        }
    }
    ExTileEntity.setup = setup;
})(ExTileEntity || (ExTileEntity = {}));
var EXCore;
(function (EXCore) {
    EXCore.isHammer = {};
    EXCore.Hammer = {};
    EXCore.Mesh = {};
    EXCore.sieve = {};
    function register(metal, outid, outdata) {
        this.registerItem(metal);
        this.registerBlock(metal);
        this.registerFurnaceRecipes(metal, outid, outdata);
    }
    EXCore.register = register;
    function registerMineral(metal) {
        this.registerItem(metal);
        this.registerBlock(metal);
    }
    EXCore.registerMineral = registerMineral;
    function registerItem(metal) {
        for (key in Itemproperty) {
            var _id = Itemproperty[key][0];
            var id_ = Itemproperty[key][1];
            var name_1 = Itemproperty[key][2];
            IDRegistry.genItemID(_id + metal + id_);
            Item.createItem(_id + metal + id_, name_1 + metal + " Ore", { name: _id + metal + id_, meta: 0 });
            Item.addCreativeGroup(name_1 + "Ore", Translation.translate(name_1 + "Ore"), [ItemID[_id + metal + id_]]);
        }
    }
    EXCore.registerItem = registerItem;
    function registerBlock(metal) {
        for (key in Blockproperty) {
            var _id = Blockproperty[key][0];
            var id_ = Blockproperty[key][1];
            var name_2 = Blockproperty[key][2];
            var type = Blockproperty[key][3];
            var material = Blockproperty[key][4];
            var itemtype = Blockproperty[key][5];
            IDRegistry.genBlockID(_id + metal + id_);
            Block.createBlock(_id + metal + id_, [{ name: metal + name_2, texture: [[_id + metal + id_, 0]], inCreative: true }], type);
            ToolAPI.registerBlockMaterial(BlockID[_id + metal + id_], material);
            this.registerDropType(_id + metal + id_, StringIdToNameId(_id + metal + id_));
            if (Blockproperty[key][6])
                EXCore.Hammer[BlockID[_id + metal + id_]] = { output: Blockproperty[key][6], data: metal };
            this.transformation(BlockID[_id + metal + id_]);
            Item.addCreativeGroup(key + "Mineral", Translation.translate(key + "Mineral"), [BlockID[_id + metal + id_]]);
            Recipes.addShaped({ id: BlockID[_id + metal + id_], count: 1, data: 0 }, ["nn", "nn", ""], ["n", ItemID[_id + metal + itemtype], -1]);
        }
    }
    EXCore.registerBlock = registerBlock;
    function registerMesh(metal, number1, number2, group) {
        IDRegistry.genItemID("ex_mesh" + metal);
        Item.createItem("ex_mesh" + metal, metal + " Mesh", { name: "ex_" + metal + "Mesh", meta: 0 });
        EXCore.Mesh[ItemID["ex_mesh" + metal]] = { group: group, data: metal, dropchance: number1 };
        ToolAPI.setTool(ItemID["ex_mesh" + metal], { durability: number2, level: 0, efficiency: 0, damage: 0 }, ToolType.mesh);
        Item.addCreativeGroup("mesh", Translation.translate("Mesh"), [ItemID["ex_mesh" + metal]]);
    }
    EXCore.registerMesh = registerMesh;
    function registerFurnaceRecipes(metal, outid, outdata) {
        Recipes.addFurnace(BlockID["ex_" + metal + "gravel"], outid, outdata);
        Recipes.addFurnace(BlockID["ex_" + metal + "sand"], outid, outdata);
        Recipes.addFurnace(BlockID["ex_" + metal + "dust"], outid, outdata);
        Recipes.addFurnace(BlockID["ex_nether" + metal + "gravel"], outid, outdata);
        Recipes.addFurnace(BlockID["ex_ender" + metal + "gravel"], outid, outdata);
    }
    EXCore.registerFurnaceRecipes = registerFurnaceRecipes;
    function registerDropType(string, string2) {
        var self = this;
        Callback.addCallback("onBlockPlace", function (coords, blockSource) {
        if(blockSource.getBlockId(coords.x, coords.y, coords.z) == BlockID[string]){
            self.dropFun(string, string2, blockSource, coords);
            }
        });
        Block.registerNeighbourChangeFunction(string, function (coords, block, changedCoords, blockSource) {
            self.dropFun(string, string2, blockSource, coords, changedCoords);
        });
    }
    EXCore.registerDropType = registerDropType;
    function dropFun(string, string2, blockSource, coords, changedCoords) {
        var ani_item = new Animation.Item(coords.x + 0.5, coords.y + 0.5, coords.z + 0.5);
        ani_item.describeItem({ id: BlockID[string], count: 1, data: 0, size: 1.02 });
        Updatable.addUpdatable({
            time: 0,
            fun: false,
            update: function () {
                this.time++;
                if (changedCoords) {
                    if (changedCoords.y + 1 == coords.y && blockSource.getBlockId(changedCoords.x, changedCoords.y, changedCoords.z) == 0 && this.time == 2) {
                        this.fun = true;
                    }
                }
                else {
                    if (blockSource.getBlockId(coords.x, coords.y, coords.z) == BlockID[string] && blockSource.getBlockId(coords.x, coords.y - 1, coords.z) == 0 && this.time == 2) {
                        this.fun = true;
                    }
                }
                if (this.fun) {
                    ani_item.load();
                    blockSource.setBlock(coords.x, coords.y, coords.z, 0, 0);
                    var entity = Entity.spawn(coords.x + 0.5, coords.y + 0.25, coords.z + 0.5, 66);
                    var tag = Entity.getCompoundTag(entity);
                    var FallingBlockTag = tag.getCompoundTag("FallingBlock");
                    FallingBlockTag.putString("name", "minecraft:block_" + string2);
                    tag.putCompoundTag("FallingBlock", FallingBlockTag);
                    Entity.setCompoundTag(entity, tag);
                    Entity.setPosition(entity, coords.x + 0.5, coords.y + 0.25, coords.z + 0.5);
                    this.fun = false;
                }
                if (ani_item && this.time >= 6) {
                    this.remove = true;
                    ani_item.destroy();
                }
            }
        });
    }
    EXCore.dropFun = dropFun;
    function defineAllSalts(metal, texture) {
        IDRegistry.genBlockID("ex_oreSalts" + metal);
        Block.createBlock("ex_oreSalts" + metal, [{ name: metal + " Ore Salts", texture: [[texture, 0]], inCreative: true }]);
        Item.addCreativeGroup("oreSalts", Translation.translate("Ore Salts"), [BlockID["ex_oreSalts" + metal]]);
        IDRegistry.genItemID("ex_" + metal + "DustSalts");
        Item.createItem("ex_" + metal + "DustSalts", metal + " Dust Salts", { name: "ex_" + metal + "DustSalts", meta: 0 });
        Item.addCreativeGroup("Salts", Translation.translate("Dust Salts"), [ItemID["ex_" + metal + "DustSalts"]]);
        EMRenderTool.createModel({
            type: "coord",
            disableCollision: false,
            blockID: BlockID["ex_oreSalts" + metal],
            onCreate: function (emRender) {
                emRender.addBoxesWithArrayById(this.blockID, 0, {
                    "1": [c7, c0, c7, c9, c4, c9],
                    "2": [c7, c0, c8, c8, c6, c9],
                    "3": [c8, c1, c7, c9, c7, c8],
                    "4": [c7, c1, c7, c8, c7, c8],
                    "5": [c8, c1, c8, c9, c7, c9],
                    "6": [c7, c0, c7, c9, c5, c9],
                    "7": [c7, c2, c11, c8, c8, c12],
                    "8": [c8, c2, c5, c9, c8, c6],
                    "9": [c10, c2, c8, c11, c9, c9]
                });
            }
        });
        Recipes.addShaped({ id: BlockID["ex_oreSalts" + metal], count: 1, data: 0 }, ["ooo", "ooo", "ooo"], ["o", ItemID["ex_" + metal + "DustSalts"], -1]);
    }
    EXCore.defineAllSalts = defineAllSalts;
    function addHammer(id) {
        EXCore.isHammer[id] = {};
        Item.addCreativeGroup("Hammer", Translation.translate("Hammer"), [id]);
    }
    EXCore.addHammer = addHammer;
    function registerHammer(ore, texture, meta) {
        IDRegistry.genItemID("ex_hammers" + ore);
        Item.createItem("ex_hammers" + ore, ore + " Hammer", { name: texture, meta: meta }, { stack: 1 });
        this.addHammer(ItemID["ex_hammers" + ore]);
    }
    EXCore.registerHammer = registerHammer;
    function transformation(blockid, id, count, data) {
        var fun = Block.getDropFunction(blockid);
        Block.registerDropFunctionForID(blockid, function (coords, blockId, blockData, level, enchant, item, blockSource) {
            if (EXCore.isHammer[item.id]) {
                if (EXCore.Hammer[blockid]) {
                    if (!EXCore.Hammer[blockid].output)
                        return;
                    var chance = Math.round() * 100;
                    var count_1 = chance < 3 ? 7 : (chance < 15 ? 6 : (chance < 35 ? 5 : 4));
                    return [[ItemID["ex_" + EXCore.Hammer[blockid].data + EXCore.Hammer[blockid].output], count_1, 0]];
                }
                else {
                    return [[id, count, data]];
                }
            }
            else {
                return fun && fun(coords, blockId, blockData, level, enchant, item, blockSource);
            }
        });
    }
    EXCore.transformation = transformation;
})(EXCore || (EXCore = {}));
var threadHelper;
(function (threadHelper) {
    function setTimeout(func, time) {
        var Thread = new java.lang.Thread(new java.lang.Runnable({
            run: function () {
                Thread.sleep(time);
                try {
                    java.lang.Thread.yield();
                    func();
                }
                catch (e) {
                    Logger.Log("Thread is wrong.", "ERROR");
                    Logger.LogError(e);
                }
            }
        }));
        Thread.start();
        return Thread;
    }
    threadHelper.setTimeout = setTimeout;
})(threadHelper || (threadHelper = {}));
var Crucible;
(function (Crucible) {
    Crucible.types = {};
    function dataSet(data, object) {
        Crucible.types[data] = object;
    }
    Crucible.dataSet = dataSet;
    function dataGet(data, id, data1) {
        return eval(Crucible.types[data][id + ":" + data1]);
    }
    Crucible.dataGet = dataGet;
    function dataAdd(data, id, data1, object) {
        Crucible.types[data][id + ":" + data1] = object;
    }
    Crucible.dataAdd = dataAdd;
})(Crucible || (Crucible = {}));
LiquidSet.limitSet("Barrel", { "null": { "water": 1, "lava": 1, "waterwitch": 1 }, "water": { "water": 1 }, "waterslime": {}, "lava": { "lava": 1 } });
LiquidSet.mixSet("Barrel", { "water": { "milk": "waterslime" } });
var Barrel;
(function (Barrel) {
    var data = {};
    var model = {};
    var id = {};
    var BuildBarrelBox = function (id, ydata, data, x, y, z, dim) {
        var emRender = EMRenderTool.updateBox(id, 0);
        emRender.addModelBox(c2, c1, c2, c14, ydata, c14, data);
        emRender.addCollisionBox(c2, c1, c2, c14, ydata, c14);
        emRender.addFullModel();
        BlockRenderer.mapAtCoords(x, y, z, emRender.icRender);
        BlockRenderer.mapCollisionModelAtCoords(dim, x, y, z, emRender.icCollision);
        emRender = null;
    };
    var testUI = new UIRegistry({
        standart: {
            header: { text: "Crusher" }
        },
        elements: {
            "slotInPut": { type: "slot", x: 600, y: 146 },
            "slotOutPut": { type: "slot", x: 670, y: 146 },
            "slotCompost": { type: "slot", x: 670 + 70, y: 146 }
        }
    });
    function dataSet(liquid, object) {
        var newObject = {};
        for (var key in object) {
            var value = object[key];
            var id_1 = eval(key.split(":")[0]);
            var _data = key.split(":")[1];
            var string = id_1 + ":" + _data;
            newObject[string] = value;
        }
        data[liquid] = newObject;
        newObject = null;
    }
    Barrel.dataSet = dataSet;
    function dataGet(liquid, id, _data) {
        return eval(data[liquid][id + ":" + _data]);
    }
    Barrel.dataGet = dataGet;
    function dataAdd(liquid, id, _data, object) {
        data[liquid][id + ":" + _data] = object;
    }
    Barrel.dataAdd = dataAdd;
    function modelset(object) {
        var newObject = {};
        for (var key in object) {
            var value = object[key];
            var id_2 = eval(key.split(":")[0]) + "";
            newObject[id_2] = value;
        }
        model = newObject;
        newObject = null;
    }
    Barrel.modelset = modelset;
    function modeladd(id, object) {
        model[id] = object;
    }
    Barrel.modeladd = modeladd;
    function modelget(id) {
        return model[id];
    }
    Barrel.modelget = modelget;
    function setupTileEntity(stringId, name, texture, material) {
        ExTileEntity.register(BlockID[stringId]);
        var tileEntity = ExTileEntity.get(BlockID[stringId]);
        StorageInterface.createInterface(BlockID[stringId], {
            slots: {
                "slotInPut": { input: true },
                "slotOutPut": { output: true }
            },
            isValidInput: function (item, side, _tileEntity) {
                return _tileEntity.canWork(item);
            }
        });
        tileEntity.useNetworkItemContainer = true;
        tileEntity.defaultValues = { origin: 0, baseProcess: 0, volume: 0, refresh: false, ferment: false, mainliquid: null };
        tileEntity.client = {};
        tileEntity.barrelbox = function (ydata, data) {
            this.networkData.putFloat("ydata", ydata);
            this.networkData.putFloat("fresh", World.getThreadTime());
            this.networkData.putString("data", data);
            this.networkData.putInt("dim", this.dimension);
        };
        tileEntity.client.renderModel = function () {
            var ydata = this.networkData.getFloat("ydata");
            var data = this.networkData.getString("data") || "air";
            var dim = this.networkData.getInt("dim");
            var fresh = this.networkData.getFloat("fresh");
            (typeof (ydata) == "number") && BuildBarrelBox(BlockID[stringId], ydata, [[data.split(",")[0], Number(data.split(",")[1])]], this.x, this.y, this.z, dim);
        };
        tileEntity.client.load = function () {
            this.renderModel();
            var self = this;
            this.networkData.addOnDataChangedListener(function (data, isExternal) {
                self.renderModel();
            });
        };
        tileEntity.init = function () {
            this.show();
            this.data.origin = -this.data.baseProcess;
        };
        tileEntity.getScreenName = function (player, coords) {
            if (Entity.getCarriedItem(player).id == ItemID.ex_crookwriter)
                return "testUI";
        };
        tileEntity.getScreenByName = function (screenName) {
            return screenName == "testUI" ? testUI : null;
        };
        tileEntity.destroy = function () {
            containerSlot(this, "slotOutPut").setSlot(0, 0, 0);
            containerSlot(this, "slotCompost").setSlot(0, 0, 0);
            containerSlot(this, "slotInPut").setSlot(0, 0, 0);
            BlockRenderer.unmapAtCoords(this.x, this.y, this.z);
            BlockRenderer.unmapCollisionModelAtCoords(this.dimension, this.x, this.y, this.z);
        };
        tileEntity.setOrigin = function () {
            this.data.origin = World.getThreadTime();
        };
        tileEntity.threadProcess = function () {
            if (World.getThreadTime() >= this.data.origin) {
                this.data.baseProcess = (World.getThreadTime() - this.data.origin) % 1000;
                return Math.abs(Number(Math.sin((World.getThreadTime() - this.data.origin) * 0.09 * Math.PI / 180).toFixed(7)));
            }
        };
        tileEntity.play = function (type, x, y, z) {
            var particles = new Particles.ParticleEmitter(x + 0.5, y + 0.6, z + 0.5);
            particles.setEmitRelatively(true);
            for (var amount = 3; amount > 0; amount--) {
                var x2 = Math.random() <= 0.5 ? 0.1 : Math.random() * 0.5;
                y2 = x2;
                z2 = -x2;
                x2 = Math.random() <= 0.5 ? -x2 : x2;
                z2 = Math.random() <= 0.5 ? z2 : -z2;
                particles.emit(type, 0, 0, 0.5, 0, x2, y2, z2);
            }
        };
        tileEntity.show = function () {
            var stored = this.liquidStorage.getLiquidStored();
            var amount = this.liquidStorage.getAmount(stored);
            var model = containerSlot(this, "slotOutPut").id != 0 && Barrel.modelget(containerSlot(this, "slotOutPut").id);
            var Texture = containerSlot(this, "slotCompost").id != 0 && Barrel.dataGet("null", containerSlot(this, "slotCompost").id, containerSlot(this, "slotCompost").data).texture;
            if (Texture)
                (this.threadProcess() <= 0) ? this.barrelbox(c16 / 1000 * this.data.volume, Texture) : this.barrelbox(1, [[Texture[0][0], Math.round(this.data.baseProcess / 10)]]);
            stored ? this.barrelbox(c16 * amount, [["ex_" + stored, 0]]) : null;
            model ? this.barrelbox(c16, model.texture) : null;
            !this.data.ferment && !stored && !Texture && !model ? BlockRenderer.unmapAtCoords(this.x, this.y, this.z) : null;
        };
        tileEntity.canWork = function (item) {
            var stored = this.liquidStorage.getLiquidStored();
            var amount = this.liquidStorage.getAmount(stored);
            if (containerSlot(this, "slotOutPut").id == 0 && !this.data.refresh) {
                return (stored != null && amount >= 1 && Barrel.dataGet(stored, item.id, item.data) || stored == null && Barrel.dataGet(stored, item.id, item.data)) ? true : false;
            }
            else {
                return false;
            }
        };
        tileEntity.bucketInteract = function (emptyid, emptydata, count, fullid, fulldata, player) {
            if (count > 1) {
                new PlayerEntity(player).addItemToInventory(emptyid, 1, emptydata);
                new PlayerEntity(player).setCarriedItem(fullid, count - 1, fulldata);
            }
            else {
                new PlayerEntity(player).setCarriedItem(emptyid, 1, emptydata);
            }
        };
        tileEntity.liquidInteract = function (type, material, blockSource) {
            switch (type) {
                case "waterslime":
                    this.data.refresh = true;
                    if (this.threadProcess() >= 1) {
                        containerSlot(this, "slotOutPut").setSlot(341, containerSlot(this, "slotOutPut").count + 2, containerSlot(this, "slotOutPut").data);
                        this.liquidStorage.getLiquid("waterslime", 1);
                        this.data.refresh = false;
                    }
                    break;
                case "water":
                    if (this.liquidStorage.getAmount("water") >= 1 && blockSource.getBlockId(this.x, this.y - 1, this.z) == 110) {
                        this.data.refresh = true;
                        if (this.threadProcess() >= 1) {
                            if (blockSource.getBlockId(this.x, this.y - 1, this.z) == 110) {
                                this.liquidStorage.addLiquid("waterwitch", 1);
                                this.liquidStorage.getLiquid("water", 1);
                                this.data.refresh = false;
                            }
                            else {
                                containerSlot(this, "slotOutPut").setSlot(79, containerSlot(this, "slotOutPut").count + 1, containerSlot(this, "slotOutPut").data);
                                this.liquidStorage.getLiquid("water", 1);
                                this.data.refresh = false;
                            }
                        }
                    }
                    break;
                case "lava":
                    this.data.refresh = true;
                    if (blockSource.getBlock(this.x, this.y + 1, this.z).id == 8 || blockSource.getBlock(this.x, this.y + 1, this.z).id == 9) {
                        containerSlot(this, "slotOutPut").setSlot(49, 1, containerSlot(this, "slotOutPut").data);
                        this.liquidStorage.getLiquid("lava", 1);
                        this.data.refresh = false;
                    }
                    if (material && material.name == "wood") {
                        (Math.random() <= 0.05) && this.play(9, this.x, this.y, this.z);
                        if (this.threadProcess() >= 1) {
                            blockSource.setBlock(this.x, this.y, this.z, 10, 0);
                            BlockRenderer.unmapAtCoords(this.x, this.y, this.z);
                            this.data.refresh = false;
                        }
                    }
                    break;
            }
        };
        tileEntity.setLiquid = function (liquid, id, data, count, stored, amount, empty, player) {
            switch (liquid) {
                case "milk":
                    if (stored == "water" && amount >= 1) {
                        this.liquidStorage.addLiquid("milk", 1);
                        this.bucketInteract(empty.id, empty.data, count, id, data, player);
                        return true;
                    }
                    break;
            }
            if (this.liquidStorage.liquidLimits[liquid]) {
                if (!stored && containerSlot(this, "slotOutPut").id == 0 && (this.data.volume <= 0 || stored == liquid) && amount < 1) {
                    this.liquidStorage.setAmount(liquid, 1);
                    this.bucketInteract(empty.id, empty.data, count, id, data, player);
                    return true;
                }
            }
        };
        tileEntity.getLiquid = function (full, amount, stored, id, data, count, player) {
            Game.prevent();
            this.liquidStorage.getLiquid(stored, 1);
            this.data.refresh = false;
            if (count >= 1) {
                new PlayerEntity(player).setCarriedItem(id, count - 1, data);
                new PlayerEntity(player).addItemToInventory(full.id, 1, full.data);
                return true;
            }
            else {
                new PlayerEntity(player).setCarriedItem(full.id, 1, full.data);
                return true;
            }
        };
        tileEntity.getBlock = function (id, data, count, player) {
            if (!this.data.ferment) {
                containerSlot(this, "slotInPut").setSlot(id, containerSlot(this, "slotInPut").count + 1, data);
                new PlayerEntity(player).setCarriedItem(id, count - 1, data);
            }
        };
        tileEntity.click = function (id, count, data, coords, player) {
            var stored = this.liquidStorage.getLiquidStored();
            var bucketLiquid = LiquidRegistry.getItemLiquid(id, data);
            var liquidget = Barrel.dataGet(stored, id, data);
            var amount = this.liquidStorage.getAmount(stored);
            var full = LiquidRegistry.getFullItem(id, data, stored);
            var empty = LiquidRegistry.getEmptyItem(id, data);
            var inPut = Barrel.dataGet("null", id, data);
            (inPut || bucketLiquid || liquidget || containerSlot(this, "slotOutPut").id != 0) && Game.prevent();
            bucketLiquid && this.setLiquid(bucketLiquid, id, data, count, stored, amount, empty, player);
            (full && amount >= 1) && this.getLiquid(full, amount, stored, id, data, count, player);
            containerSlot(this, "slotOutPut").id <= 0 && inPut && !stored && this.getBlock(id, data, count, player);
            if (liquidget && amount >= 1) {
                containerSlot(this, "slotInPut").setSlot(id, containerSlot(this, "slotInPut").count + 1, data);
                new PlayerEntity(player).setCarriedItem(id, count - 1, data);
            }
            if (containerSlot(this, "slotOutPut").id != 0) {
                this.blockSource.spawnDroppedItem(this.x + 0.5, this.y + 1, this.z + 0.5, containerSlot(this, "slotOutPut").id, containerSlot(this, "slotOutPut").count, containerSlot(this, "slotOutPut").data, null);
                containerSlot(this, "slotOutPut").setSlot(0, 0, 0);
            }
        };
        tileEntity.tick = function () {
            var stored = this.liquidStorage.getLiquidStored();
            var amount = this.liquidStorage.getAmount(stored);
            var Ferment = Barrel.dataGet("null", containerSlot(this, "slotInPut").id, containerSlot(this, "slotInPut").data);
            var Volume = containerSlot(this, "slotCompost").id != 0 && Barrel.dataGet("null", containerSlot(this, "slotCompost").id, containerSlot(this, "slotCompost").data).volume * containerSlot(this, "slotCompost").count;
            var liquidget = Barrel.dataGet(stored, containerSlot(this, "slotInPut").id, containerSlot(this, "slotInPut").data);
            var material = ToolAPI.getBlockMaterial(this.blockSource.getBlock(this.x, this.y, this.z).id);
            this.liquidInteract(stored, material, this.blockSource);
            !this.data.refresh && this.setOrigin();
            LiquidSet.setLimit("Barrel", this);
            LiquidSet.mixLiquid("Barrel", this);
            StorageInterface.checkHoppers(this);
            if (!this.data.ferment && Number(Math.cos(Volume * 0.09 * Math.PI / 180).toFixed(7)) > 0) {
                if (Ferment) {
                    containerSlot(this, "slotCompost").setSlot(containerSlot(this, "slotInPut").id, Volume / Ferment.volume + 1, containerSlot(this, "slotInPut").data);
                    containerSlot(this, "slotInPut").setSlot(0, containerSlot(this, "slotInPut").count - 1, 0);
                }
                this.data.volume = Volume;
            }
            else if (!this.data.ferment) {
                this.data.refresh = true;
                this.data.ferment = true;
                this.data.volume = 1000;
            }
            if (this.data.ferment && this.threadProcess() >= 1) {
                this.data.refresh = false;
                this.data.ferment = false;
                this.data.volume = 0;
                containerSlot(this, "slotCompost").setSlot(0, 0, 0);
                containerSlot(this, "slotOutPut").setSlot(3, 1, 0);
            }
            if (World.getWeather().rain != 0 && (!stored || stored == "water") && this.data.volume <= 0 && containerSlot(this, "slotOutPut").id <= 0 && !this.data.refresh) {
                this.data.canseesky = GenerationUtils.canSeeSky(this.x, this.y, this.z) ? true : false;
                this.data.canseesky && this.liquidStorage.addLiquid("water", 5 / 1000);
            }
            if (liquidget && liquidget.output) {
                containerSlot(this, "slotOutPut").setSlot(liquidget.output, 1, containerSlot(this, "slotOutPut").data);
                containerSlot(this, "slotInPut").setSlot(0, 0, 0);
                this.liquidStorage.getLiquid(stored, 1);
                this.data.refresh = false;
            }
            this.container.sendChanges();
            this.networkData.sendChanges();
            this.show();
        };
    }
    Barrel.setupTileEntity = setupTileEntity;
    function add(ID, name, texture, material) {
        IDRegistry.genBlockID(ID);
        switch (material) {
            case "wood":
                Block.createBlock(ID, [{ name: name, texture: [[texture, 0]], inCreative: true }], { sound: "wood", solid: true });
                ToolAPI.registerBlockMaterial(BlockID[ID], "wood");
                break;
            case "glass":
                Block.createBlock(ID, [{ name: name, texture: [[texture, 0]], inCreative: true }], { sound: "glass", solid: false, renderlayer: 1, renderallfaces: true });
                break;
            case "stone":
                Block.createBlock(ID, [{ name: name, texture: [[texture, 0]], inCreative: true, solid: true }]);
                ToolAPI.registerBlockMaterial(BlockID[ID], "stone");
                break;
            default:
                Block.createBlock(ID, [{ name: name, texture: [[texture, 0]], inCreative: true }]);
                break;
        }
        Item.addCreativeGroup("Barrel", Translation.translate("Barrel"), [BlockID[ID]]);
        this.setupTileEntity(ID, name, texture, material);
        EMRenderTool.createModel({
            type: "coord",
            disableCollision: false,
            blockID: BlockID[ID],
            onCreate: function (emRender) {
                emRender.addBoxesWithArrayById(this.blockID, 0, {
                    "1": [c2, c0, c2, c14, c1, c14],
                    "2": [c1, c0, c1, c14, c16, c2],
                    "3": [c1, c0, c2, c2, c16, c15],
                    "4": [c14, c0, c1, c15, c16, c14],
                    "5": [c2, c0, c14, c15, c16, c15]
                }, "create");
            }
        });
    }
    Barrel.add = add;
})(Barrel || (Barrel = {}));
var TileRender_private = {
    data: {},
    setSlabModel: function (id, texture) {
        var textures = [
            [texture[0], texture[1], texture[2], texture[3], texture[4], texture[5]],
            [texture[0], texture[1], texture[3], texture[2], texture[5], texture[4]],
            [texture[0], texture[1], texture[5], texture[4], texture[2], texture[3]],
            [texture[0], texture[1], texture[4], texture[5], texture[3], texture[2]]
        ];
        for (var i = 0; i < 4; i++) {
            var render = new ICRender.Model();
            var model = BlockRenderer.Model();
            model.addBox(0, 0, 0, 1, 0.5, 1, textures[i]);
            render.addEntry(model);
            BlockRenderer.enableCoordMapping(id, i, render);
        }
    },
    registerSlabRenderModel: function (id, data, texture) {
        var render = new ICRender.Model();
        var model = BlockRenderer.Model();
        model.addBox(0, 0, 0, 1, 0.5, 1, texture);
        render.addEntry(model);
        if (!this.data[id])
            this.data[id] = {};
        this.data[id][data] = render;
    },
    registerSlabRotationModel: function (id, data, texture, reverse) {
        reverse = reverse || 0;
        var textures = [
            [texture[0], texture[1], texture[3], texture[2], texture[5], texture[4]],
            [texture[0], texture[1], texture[2], texture[3], texture[4], texture[5]],
            [texture[0], texture[1], texture[4], texture[5], texture[3], texture[2]],
            [texture[0], texture[1], texture[5], texture[4], texture[2], texture[3]]
        ];
        for (var i = 0; i < 4; i++) {
            this.registerSlabRenderModel(id, i + data + reverse * Math.pow(-1, i), textures[i]);
        }
    },
    setStandartModel: function (id, texture, rotation) {
        if (rotation) {
            var textures = [
                [texture[0], texture[1], texture[2], texture[3], texture[4], texture[5]],
                [texture[0], texture[1], texture[3], texture[2], texture[5], texture[4]],
                [texture[0], texture[1], texture[5], texture[4], texture[2], texture[3]],
                [texture[0], texture[1], texture[4], texture[5], texture[3], texture[2]]
            ];
            for (var i = 0; i < 4; i++) {
                var render = new ICRender.Model();
                var model = BlockRenderer.createTexturedBlock(textures[i]);
                render.addEntry(model);
                BlockRenderer.enableCoordMapping(id, i, render);
            }
        }
        else {
            var render = new ICRender.Model();
            var model = BlockRenderer.createTexturedBlock(texture);
            render.addEntry(model);
            BlockRenderer.enableCoordMapping(id, -1, render);
        }
    },
    registerRenderModel: function (id, data, texture) {
        var render = new ICRender.Model();
        var model = BlockRenderer.createTexturedBlock(texture);
        render.addEntry(model);
        if (!this.data[id])
            this.data[id] = {};
        this.data[id][data] = render;
    },
    registerRotationModel: function (id, data, texture, reverse) {
        reverse = reverse || 0;
        var textures = [
            [texture[0], texture[1], texture[3], texture[2], texture[5], texture[4]],
            [texture[0], texture[1], texture[2], texture[3], texture[4], texture[5]],
            [texture[0], texture[1], texture[4], texture[5], texture[3], texture[2]],
            [texture[0], texture[1], texture[5], texture[4], texture[2], texture[3]]
        ];
        for (var i = 0; i < 4; i++) {
            this.registerRenderModel(id, i + data + reverse * Math.pow(-1, i), textures[i]);
        }
    },
    registerFullRotationModel: function (id, data, texture) {
        if (texture.length == 2) {
            for (var i = 0; i < 6; i++) {
                var textures = [];
                for (var j = 0; j < 6; j++) {
                    if (j == i)
                        textures.push(texture[1]);
                    else
                        textures.push(texture[0]);
                }
                this.registerRenderModel(id, i + data, textures);
            }
        }
        else {
            var textures = [
                [texture[3], texture[2], texture[0], texture[1], texture[4], texture[5]],
                [texture[2], texture[3], texture[1], texture[0], texture[5], texture[4]],
                [texture[0], texture[1], texture[3], texture[2], texture[5], texture[4]],
                [texture[0], texture[1], texture[2], texture[3], texture[4], texture[5]],
                [texture[0], texture[1], texture[4], texture[5], texture[3], texture[2]],
                [texture[0], texture[1], texture[5], texture[4], texture[2], texture[3]],
            ];
            for (var i = 0; i < 6; i++) {
                this.registerRenderModel(id, i + data, textures[i]);
            }
        }
    },
    getRenderModel: function (id, data) {
        var models = this.data[id];
        if (models) {
            return models[data];
        }
        return 0;
    },
    mapAtCoords: function (x, y, z, id, data) {
        var model = this.getRenderModel(id, data);
        if (model) {
            BlockRenderer.mapAtCoords(x, y, z, model);
        }
    },
    getBlockRotation: function (player, isFull) {
        var pitch = EntityGetPitch(player);
        if (isFull) {
            if (pitch < -45)
                return 0;
            if (pitch > 45)
                return 1;
        }
        var rotation = Math.floor((EntityGetYaw(player) - 45) % 360 / 90);
        if (rotation < 0)
            rotation += 4;
        rotation = [3, 1, 2, 0][rotation];
        if (isFull)
            return rotation + 2;
        return rotation;
    },
    setRotationPlaceFunction: function (id, hasVertical, placeSound) {
        Block.registerPlaceFunction(id, function (coords, item, block, player, region) {
            var place = World.canTileBeReplaced(block.id, block.data) ? coords : coords.relative;
            region.setBlock(place.x, place.y, place.z, item.id, 0);
            World.playSound(place.x, place.y, place.z, placeSound || "dig.stone", 1, 0.8);
            var rotation = TileRender_private.getBlockRotation(player, hasVertical);
            var tile = TileEntity.addTileEntity(place.x, place.y, place.z, region);
            tile.data.meta = rotation;
            TileRender_private.mapAtCoords(place.x, place.y, place.z, item.id, rotation);
            return place;
        });
    },
    setupWireModel: function (id, data, width, groupName, preventSelfAdd) {
        var render = new ICRender.Model();
        var shape = new ICRender.CollisionShape();
        var group = ICRender.getGroup(groupName);
        if (!preventSelfAdd) {
            group.add(id, data);
        }
        // connections
        width /= 2;
        var boxes = [
            { side: [1, 0, 0], box: [0.5 + width, 0.5 - width, 0.5 - width, 1, 0.5 + width, 0.5 + width] },
            { side: [-1, 0, 0], box: [0, 0.5 - width, 0.5 - width, 0.5 - width, 0.5 + width, 0.5 + width] },
            { side: [0, 1, 0], box: [0.5 - width, 0.5 + width, 0.5 - width, 0.5 + width, 1, 0.5 + width] },
            { side: [0, -1, 0], box: [0.5 - width, 0, 0.5 - width, 0.5 + width, 0.5 - width, 0.5 + width] },
            { side: [0, 0, 1], box: [0.5 - width, 0.5 - width, 0.5 + width, 0.5 + width, 0.5 + width, 1] },
            { side: [0, 0, -1], box: [0.5 - width, 0.5 - width, 0, 0.5 + width, 0.5 + width, 0.5 - width] },
        ];
        for (var i in boxes) {
            var box = boxes[i];
            // render
            var model = BlockRenderer.createModel();
            model.addBox(box.box[0], box.box[1], box.box[2], box.box[3], box.box[4], box.box[5], id, data);
            var condition = ICRender.BLOCK(box.side[0], box.side[1], box.side[2], group, false);
            render.addEntry(model).setCondition(condition);
            // collision shape
            var entry = shape.addEntry();
            entry.addBox(box.box[0], box.box[1], box.box[2], box.box[3], box.box[4], box.box[5]);
            entry.setCondition(condition);
        }
        // central box
        var model = BlockRenderer.createModel();
        model.addBox(0.5 - width, 0.5 - width, 0.5 - width, 0.5 + width, 0.5 + width, 0.5 + width, id, data);
        render.addEntry(model);
        var entry = shape.addEntry();
        entry.addBox(0.5 - width, 0.5 - width, 0.5 - width, 0.5 + width, 0.5 + width, 0.5 + width);
        width = Math.max(width, 0.25);
        Block.setShape(id, 0.5 - width, 0.5 - width, 0.5 - width, 0.5 + width, 0.5 + width, 0.5 + width, data);
        BlockRenderer.setStaticICRender(id, data, render);
        BlockRenderer.setCustomCollisionShape(id, data, shape);
    },
    // deprecated, use rendertypes
    setPlantModel: function () { },
    setCropModel: function () { },
    setEmptyCollisionShape: function (id) {
        var shape = new ICRender.CollisionShape();
        shape.addEntry().addBox(1, 1, 1, 0, 0, 0);
        BlockRenderer.setCustomCollisionShape(id, -1, shape);
    },
    getCropModel: function (texture) {
        var render = new ICRender.Model();
        var model = BlockRenderer.createModel();
        model.addBox(0.25, 0, 0, 0.25, 1, 1, texture[0], texture[1]);
        model.addBox(0.75, 0, 0, 0.75, 1, 1, texture[0], texture[1]);
        model.addBox(0, 0, 0.25, 1, 1, 0.25, texture[0], texture[1]);
        model.addBox(0, 0, 0.75, 1, 1, 0.75, texture[0], texture[1]);
        render.addEntry(model);
        return render;
    },
    setSlabShape: function (id, count) {
        for (var i = 0; i < count; i++) {
            Block.setShape(id, 0, 0, 0, 1, 0.5, 1, i);
        }
        for (var i = count; i < count * 2; i++) {
            Block.setShape(id, 0, 0.5, 0, 1, 1, 1, i);
        }
    },
    setSlabPlaceFunction: function (id, count, fullBlockID) {
        Block.registerPlaceFunction(id, function (coords, item, block) {
            if (block.id == item.id && block.data % count == item.data && parseInt(block.data / count) == (coords.side + 1) % 2) {
                World.setBlock(coords.x, coords.y, coords.z, fullBlockID, item.data);
                return;
            }
            var place = World.canTileBeReplaced(block.id, block.data) ? coords : coords.relative;
            if (coords.vec.y - place.y < 0.5) {
                World.setBlock(place.x, place.y, place.z, item.id, item.data);
            }
            else {
                World.setBlock(place.x, place.y, place.z, item.id, item.data + count);
            }
        });
    }
};
function digitLength(a) {
    var b = a.toString()
        .split(/[eE]/), c = (b[0].split('.')[1] || '')
        .length - +(b[1] || 0);
    return 0 < c ? c : 0;
}
function float2Fixed(a) {
    if (-1 === a.toString().indexOf('e'))
        return +a.toString().replace('.', '');
    var b = digitLength(a);
    return 0 < b ? a * Math.pow(10, b) : a;
}
function times(a, b) {
    var c = float2Fixed(a), d = float2Fixed(b), e = digitLength(a) + digitLength(b);
    return c * d / Math.pow(10, e);
}
function plus(a, b) {
    var c = Math.pow(10, Math.max(digitLength(a), digitLength(b)));
    return (times(a, c) + times(b, c)) / c;
}
function minus(a, b) {
    var c = Math.pow(10, Math.max(digitLength(a), digitLength(b)));
    return (times(a, c) - times(b, c)) / c;
}
function divide(a, b) {
    var c = float2Fixed(a), d = float2Fixed(b);
    return times(c / d, Math.pow(10, digitLength(b) - digitLength(a)));
}
function round(a, b) {
    var c = Math.pow(10, b);
    return divide(Math.round(times(a, c)), c);
}
(function () {
    var EvaporatingDish_boxes_1 = [
        [0, 0, 0, 1, 1 / 16, 1],
        [0, 1 / 16, 0, 1, 5 / 16, 1 / 16],
        [0, 1 / 16, 1 / 16, 1 / 16, 5 / 16, 15 / 16],
        [0, 1 / 16, 15 / 16, 1, 5 / 16, 1],
        [15 / 16, 1 / 16, 1 / 16, 1, 5 / 16, 15 / 16]
    ];
    var SetupModel = function (stringId) {
        var model = BlockRenderer.Model();
        var render = new ICRender.Model();
        for (var box in EvaporatingDish_boxes_1) {
            var array = EvaporatingDish_boxes_1[box];
            model.addBox(array[0], array[1], array[2], array[3], array[4], array[5], BlockID[stringId], 0);
        };
        render.addEntry(model);
        BlockRenderer.enableCoordMapping(BlockID[stringId], 0, render);
        // BlockRenderer.enableCustomRender(BlockID[stringId], 0);
        var Collision = new ICRender.CollisionShape();
        for (var box in EvaporatingDish_boxes_1) {
            var array = EvaporatingDish_boxes_1[box];
            Collision.addEntry().addBox(array[0], array[1], array[2], array[3], array[4], array[5]);
        };
        BlockRenderer.setCustomCollisionShape(BlockID[stringId], 0, Collision);
    };
    var BuildEvaporatingDishBox = function (id, ydata, data, x, y, z, dim) {
        var model = BlockRenderer.Model();
        var render = new ICRender.Model();
        for (var box in EvaporatingDish_boxes_1) {
            var array = EvaporatingDish_boxes_1[box];
            model.addBox(array[0], array[1], array[2], array[3], array[4], array[5], id, 0);
        };
        model.addBox(1 / 16, 1 / 16, 1 / 16, 15 / 16, ydata, 15 / 16, data);
        render.addEntry(model);
        BlockRenderer.mapAtCoords(x, y, z, render);
        var Collision = new ICRender.CollisionShape();
        for (var box in EvaporatingDish_boxes_1) {
            var array = EvaporatingDish_boxes_1[box];
            Collision.addEntry().addBox(array[0], array[1], array[2], array[3], array[4], array[5]);
        };
        Collision.addEntry().addBox(1 / 16, 1 / 16, 1 / 16, 15 / 16, ydata, 15 / 16);
        BlockRenderer.mapCollisionModelAtCoords(dim, x, y, z, Collision);
    };
    var SetupTileEntity = function (stringId, name, texture) {
        this.tileEntity = {};
        this.tileEntity.client = {};
        this.tileEntity.useNetworkItemContainer = true;
        this.tileEntity.defaultValues = {
            worktime: 0,
            type: null,
            BuildEvaporatingDishOnce: false
        };
        this.tileEntity.getTransportSlots = function () {
            return { output: ["slot2"] };
        };
        this.tileEntity.show = function () {
            var input = this.container.getSlot("slotInput");
            var st2 = this.container.getSlot("slot2");
            var stored = this.liquidStorage.getLiquidStored();
            var amount = this.liquidStorage.getAmount(stored);
            var tex = EvaporatingDish.getTexture("water", st2.id);
            amount > 0 ? this.box(5 / 16 * amount, [["ex_water", 0]]) : this.box(5 / 16, [["air", 0]]);
            st2.count > 0 && this.box(5 / 16, [[tex, 0]]);
        };
        this.tileEntity.init = function () {
            this.liquidStorage.setLimit("water", 1);
            this.show();
        };
        this.tileEntity.box = function (ydata, data) {
            this.networkData.putFloat("ydata", ydata || 0);
            this.networkData.putString("data", data);
            this.networkData.putInt("dim", this.dimension);
            this.networkData.sendChanges();
            //BuildEvaporatingDishBox(BlockID[stringId], ydata, data, this.x, this.y, this.z, this.dimension);
        };
        this.tileEntity.client.renderModel = function () {
            var ydata = this.networkData.getFloat("ydata");
            var data = this.networkData.getString("data") || "air";
            var dim = this.networkData.getInt("dim");
            if (typeof (ydata) == "number") {
                BuildEvaporatingDishBox(BlockID[stringId], ydata, [[data.split(",")[0], Number(data.split(",")[1])]], this.x, this.y, this.z, dim);
            }
        };
        this.tileEntity.client.load = function () {
            this.renderModel();
            var self = this;
            this.networkData.addOnDataChangedListener(function (data, isExternal) {
                self.renderModel();
            });
        };
        this.tileEntity.setItem = function (id, data, count, id2, data2, player) {
            if (count > 1) {
                new PlayerEntity(player).addItemToInventory(id, 1, data);
                new PlayerEntity(player).setCarriedItem(id2, count - 1, data2);
            }
            else {
                new PlayerEntity(player).setCarriedItem(id, 1, data);
            };
        };
        this.tileEntity.setLiquid = function (type, id, data, count, stored, amount, empty, liquid, player) {
            Game.prevent();
            var st2 = this.container.getSlot("slot2");
            if (!stored && st2.id == 0 && (!this.data.worktime || stored == type) && amount < 1) {
                this.liquidStorage.addLiquid(liquid, 1);
                this.setItem(empty.id, empty.data, count, id, data, player);
                return true;
            };
        };
        this.tileEntity.click = function (id, count, data, coords, player) {
            var input = this.container.getSlot("slotInput");
            var st2 = this.container.getSlot("slot2");
            var stored = this.liquidStorage.getLiquidStored();
            var liquid = LiquidRegistry.getItemLiquid(id, data);
            var amount = this.liquidStorage.getAmount(stored);
            var full = LiquidRegistry.getFullItem(id, data, stored);
            var empty = LiquidRegistry.getEmptyItem(id, data);
            var client = Network.getClientForPlayer(player);
            liquid && this.setLiquid(liquid, id, data, count, stored, amount, empty, liquid, player);
            if (st2.count > 0) {
                Game.prevent();
                this.blockSource.spawnDroppedItem(this.x + 0.5, this.y + 1, this.z + 0.5, st2.id, st2.count, st2.data);
                st2.setSlot(0, 0, 0);
            };
        };
        this.tileEntity.destroyBlock = function (coords, player) {
            this.box(5 / 16, [["air", 0]]);
            BlockRenderer.unmapAtCoords(coords.x, coords.y, coords.z);
            BlockRenderer.unmapCollisionModelAtCoords(this.dimension, coords.x, coords.y, coords.z);
        };
        this.tileEntity.tick = function () {
            var st2 = this.container.getSlot("slot2");
            var stored = this.liquidStorage.getLiquidStored();
            var water = this.liquidStorage.getAmount("water");
            if (water >= 1 && this.data.worktime < 1000) {
                this.data.worktime++;
            };
            if (stored != this.data.type) {
                this.show();
                this.data.type = stored;
            };
            if (this.data.worktime >= 1000) {
                this.liquidStorage.getLiquid("water", 1);
                st2.setSlot(BlockID.ex_saltcoarse, st2.count + 1, 0);
                this.show();
                this.data.worktime = 0;
            };
            if (this.data.worktime <= 0 && water <= 0 && st2.count <= 0) {
                this.box(5 / 16, [["air", 0]]);
            };
        };
        TileEntity.registerPrototype(BlockID[stringId], this.tileEntity);
    };
    EvaporatingDish = {
        addRecipe: function (material, result, texture) {
            if (!this.material)
                this.material = {};
            this.material[result] = texture;
        },
        getResult: function (material) {
            return this.material;
        },
        getTexture: function (material, result) {
            return this.material[result];
        },
        addDish: function (stringId, name, texture, sound) {
            IDRegistry.genBlockID(stringId);
            Block.createBlock(stringId, [{ name: name, texture: [[texture, 0]], inCreative: true }], { sound: sound });
            Item.addCreativeGroup("EvaporatingDish", Translation.translate("EvaporatingDish"), [BlockID[stringId]]);
            SetupModel(stringId);
            SetupTileEntity(stringId, name, texture);
        }
    };
})();
//api updates
(function () {
    function ItemEntitys(entityId, innerId, type, prototype) {
        this.entityId = entityId;
        this.innerId = innerId;
        this.type = type;
        this.coords = prototype.coords;
        this.tick = function () { };
        var self = this;
        Callback.addCallback("LocalTick", function () {
            self.tick();
        });
    };
    SummonAPI = {
        setItemEntityAddedCallbackOpen: function (id) {
            var ItemEntity = {};
            Callback.addCallback("EntityAdded", function (entity) {
                var tag = Entity.getCompoundTag(entity);
                var tags = tag.toScriptable();
                var pos = tags.Pos;
                var coords = {
                    x: pos[0],
                    y: pos[1],
                    z: pos[2]
                };
                var item = tags.Item;
                if (item) {
                    var count = item.Count;
                    var namespace = item.Name;
                    var inId = namespace.split(":")[1];
                    if (typeof (id) == "number" && inId == (id >= 8192 ? "block_" : "item_") + IDRegistry.getNameByID(id)) {
                        Callback.invokeCallback("ItemEntityAdded", id, count, entity, tag, coords);
                    }
                    ;
                    if (namespace == id) {
                        Callback.invokeCallback("ItemEntityAddedVanilla", namespace, count, entity, tag, coords);
                    }
                    ;
                };
            });
            Callback.addCallback("EntityRemoved", function (entity) {
                var tag = Entity.getCompoundTag(entity);
                var tags = tag.toScriptable();
                var item = tags.Item;
                if (item) {
                    var count = item.Count;
                    var namespace = item.Name;
                    var inId = namespace.split(":")[1];
                    if (typeof (id) == "number" && inId == (id >= 8192 ? "block_" : "item_") + IDRegistry.getNameByID(id)) {
                        Callback.invokeCallback("ItemEntityRemoved", id, count, entity, tag);
                    }
                    ;
                    if (namespace == id) {
                        Callback.invokeCallback("ItemEntityRemovedVanilla", namespace, count, entity, tag);
                    }
                    ;
                };
            });
        },
        setAge: function (entity, age) {
            var tag = Entity.getCompoundTag(entity);
            tag.remove("Age");
            tag.putInt("Age", age);
            Entity.setCompoundTag(entity, tag);
        },
        spawnVindicator: function (x, y, z) {
            Commands.exec("summon vindicator " + x + " " + y + " " + z);
        },
        spawnLightningBolt: function (x, y, z) {
            Commands.exec("summon lightning_bolt " + x + " " + y + " " + z);
        },
        spawnCow: function (x, y, z) {
            Commands.exec("summon cow " + x + " " + y + " " + z);
        },
        spawnItemEntity: function (x, y, z, id, count, data) {
            var inId = "minecraft:" + ((id >= 8192 ? "block_" : "item_") + IDRegistry.getNameByID(id));
            var InData = data;
            var InCount = count;
            //let ItemEntityId = Entity.spawn(x, y, z, 64);
            //let tag = Entity.getCompoundTag(ItemEntityId);
            /*var itemTag = new NBT.CompoundTag();
        itemTag.putString("Name", inId);
        itemTag.putInt("Count", InCount);
        itemTag.putInt("Damage", InData);
        itemTag.putInt("WasPickedUp", 0);
        
        if (id >= 8192) {
            var blockTag = new NBT.CompoundTag();
            blockTag.putString("name", inId);
            var statesTag = new NBT.CompoundTag();
            statesTag.putString("color", "white");
            blockTag.putCompoundTag("states", statesTag);
            blockTag.putInt("version", 17432626);
            itemTag.putCompoundTag("Block", blockTag);
        };
        
        tag.remove("Item");
        tag.putCompoundTag("Item", itemTag);
        
        Entity.setCompoundTag(ItemEntityId, tag);
        */
            //alert(JSON.stringify(tag.toScriptable()));
        }
    };
})();
var TrophyAPI = {
    Trophy: {},
    addTrophyForBlock: function (blockId, blockData, id, data, chance, min, max) {
        var item = {
            id: id,
            data: data,
            chance: chance,
            minCount: min,
            maxCount: max
        };
        if (!this.Trophy[blockId + ":" + blockData]) {
            this.Trophy[blockId + ":" + blockData] = {};
        };
        this.Trophy[blockId + ":" + blockData][id + ":" + data] = item;
    },
    getTrophyByBlockId: function (blockId, blockData) {
        return this.Trophy[blockId + ":" + blockData];
    },
    setTrophyAtCoords: function (x, y, z, blockSource) {
        var id = blockSource.getBlockId(x, y, z);
        var data = blockSource.getBlockData(x, y, z);
        var Trophy = this.getTrophyByBlockId(id, data);
        var Storage = StorageInterface.getStorage(blockSource, x, y, z);
        var slots = Storage && Storage.getInputSlots();
        var setTimes = {};
        var former = {};
        if (slots) {
            for (var l = 0; l < slots.length; l++) {
                var slot = Storage.getSlot(slots[l]);
                if (slot.id == 0) {
                    for (var item in Trophy) {
                        var items = Trophy[item];
                        var chance = items.chance;
                        var m = 0.7;
                        var count = items.minCount;
                        while (items.minCount < items.maxCount) {
                            items.minCount += 0.2;
                            count += 0.12;
                            if (Math.random() < m) {
                                break;
                            }
                            ;
                            m += 0.1;
                        }
                        ;
                        count = Math.floor(count);
                        if (Math.floor(Math.random() * 100) < chance && items.id != former.id) {
                            former.id = items.id;
                            former.data = items.data;
                            former.count = count;
                            former.chance = chance;
                            if (!setTimes[items.id + ":" + items.data]) {
                                setTimes[items.id + ":" + items.data] = 1;
                            }
                            else {
                                setTimes[items.id + ":" + items.data] += 1;
                            }
                            ;
                            if (items.id && count && (items.data || 0))
                                Storage.setSlot(slots[l], items.id, count, items.data, null);
                            break;
                        }
                        ;
                        if (items.id == former.id) {
                            if (Math.floor(Math.random() * 100) < (former.chance / (2 * setTimes[items.id + ":" + items.data]))) {
                                former.id = items.id;
                                former.data = items.data;
                                former.count = count;
                                former.chance = chance;
                                setTimes[items.id + ":" + items.data] += 1;
                                if (items.id && count && (items.data || 0))
                                    Storage.setSlot(slots[l], items.id, count, items.data, null);
                                break;
                            }
                            ;
                        }
                        ;
                    }
                    ;
                };
            };
        };
    }
};
TrophyAPI.addTrophyForBlock(VanillaBlockID.shulker_box, 8, VanillaBlockID.end_portal_frame, 0, 1, 2, 3);
TrophyAPI.addTrophyForBlock(VanillaBlockID.shulker_box, 8, VanillaItemID.ender_pearl, 0, 3, 1, 3);
TrophyAPI.addTrophyForBlock(VanillaBlockID.shulker_box, 8, VanillaItemID.golden_apple, 0, 1, 1, 1);
TrophyAPI.addTrophyForBlock(VanillaBlockID.shulker_box, 8, VanillaItemID.iron_ingot, 0, 7, 1, 3);
TrophyAPI.addTrophyForBlock(VanillaBlockID.shulker_box, 8, VanillaItemID.gold_ingot, 0, 4, 1, 2);
//TrophyAPI.addTrophyForBlock(VanillaBlockID.shulker_box, 8, VanillaItemID.flint_and_steel, 0, 3, 1, 1);
//TrophyAPI.addTrophyForBlock(VanillaBlockID.shulker_box, 8, VanillaItemID.cake, 0, 6, 1, 1);
TrophyAPI.addTrophyForBlock(VanillaBlockID.shulker_box, 8, VanillaItemID.dragon_breath, 0, 0.8, 1, 1);
TrophyAPI.addTrophyForBlock(VanillaBlockID.shulker_box, 8, VanillaItemID.horsearmorleather, 0, 0.8, 1, 1);
function randomNum(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}
var Sieve;
(function (Sieve) {
    Sieve.sieve = {};
    Sieve.type = {};
    var dirt = [
        [ItemID.ex_stoneSmall, 0, 2, 4, 100],
        [ItemID.ex_seedsGrass, 0, 1, 1, 7],
        [ItemID.ex_seedsOak, 0, 1, 1, 1],
        [VanillaItemID.wheat_seeds, 0, 1, 2, 7],
        [VanillaItemID.pumpkin_seeds, 0, 1, 1, 7],
        [VanillaItemID.melon_seeds, 0, 1, 1, 7],
        [ItemID.ex_seedsDarkOak, 0, 1, 1, 2],
        [ItemID.ex_seedsBirch, 0, 1, 1, 0],
        [ItemID.ex_seedsSpruce, 0, 1, 1, 1],
        [ItemID.ex_seedsAcacia, 0, 1, 1, 2],
        [ItemID.ex_seedsPotato, 0, 1, 1, 2],
        [ItemID.ex_seedsCarrot, 0, 1, 1, 2],
        [ItemID.ex_seedsCanes, 0, 1, 1, 7],
        [ItemID.ex_seedsBamboo, 0, 1, 1, 2],
        [ItemID.ex_seedsBerries, 0, 1, 1, 3]
    ];
    var gravel = [
        [VanillaItemID.coal, 0, 1, 4, 13],
        [VanillaItemID.flint, 0, 1, 3, 25],
        [ItemID.ex_Ironbroken, 0, 1, 4, 25],
        [ItemID.ex_Aluminumbroken, 0, 1, 4, 10],
        [ItemID.ex_Nickelbroken, 0, 1, 4, 9],
        [ItemID.ex_Goldbroken, 0, 1, 4, 9],
        [VanillaItemID.emerald, 0, 1, 1, 1],
        [VanillaItemID.diamond, 0, 1, 1, 1]
    ];
    gravel.push(getMCPEVersion().array[1] == 11 ? [VanillaItemID.dye, 4, 1, 2, 5] : [VanillaItemID.lapis_lazuli, 4, 1, 2, 5]);
    var sand = [
        [ItemID.ex_seedsCactus, 0, 1, 1, 2],
        [ItemID.ex_seedsJungle, 0, 1, 1, 3],
        [ItemID.ex_Ironcrushed, 0, 1, 4, 20],
        [ItemID.ex_Aluminumcrushed, 0, 1, 4, 10],
        [ItemID.ex_Nickelcrushed, 0, 1, 4, 9],
        [ItemID.ex_Goldcrushed, 0, 1, 4, 9],
        [ItemID.ex_Platinumcrushed, 0, 1, 4, 3],
        [VanillaItemID.dye, 3, 1, 2, 3],
        [ItemID.ex_spores, 0, 1, 2, 1]
    ];
    var dust = [
        [ItemID.ex_IronPowdered, 0, 1, 4, 20],
        [ItemID.ex_GoldPowdered, 0, 1, 4, 9],
        [ItemID.ex_AluminumPowdered, 0, 1, 4, 10],
        [ItemID.ex_NickelPowdered, 0, 1, 4, 9],
        [ItemID.ex_PlatinumPowdered, 0, 1, 4, 3],
        [VanillaItemID.redstone, 0, 1, 3, 14],
        [VanillaItemID.gunpowder, 0, 1, 3, 7],
        [VanillaItemID.glowstone_dust, 0, 1, 3, 6],
        [VanillaItemID.blaze_powder, 0, 1, 3, 5]
    ];
    dust.push(getMCPEVersion().array[1] == 11 ? [VanillaItemID.dye, 15, 1, 4, 20] : [VanillaItemID.bone_meal, 0, 1, 4, 20]);
    var soulsand = [
        [VanillaItemID.quartz, 0, 1, 6, 33],
        [VanillaItemID.nether_wart, 0, 1, 2, 5],
        [VanillaItemID.ghast_tear, 0, 1, 1, 2]
    ];
    var netherGravel = [
        [ItemID.ex_netherIronbroken, 0, 1, 4, 17],
        [ItemID.ex_netherGoldbroken, 0, 1, 4, 17],
        [ItemID.ex_netherNickelbroken, 0, 1, 4, 10],
        [ItemID.ex_netherPlatinumbroken, 0, 1, 4, 5],
        [ItemID.ex_netherAluminumbroken, 0, 1, 4, 7]
    ];
    var enderGravel = [
        [ItemID.ex_enderIronbroken, 0, 1, 4, 17],
        [ItemID.ex_enderGoldbroken, 0, 1, 4, 17],
        [ItemID.ex_enderNickelbroken, 0, 1, 4, 10],
        [ItemID.ex_enderPlatinumbroken, 0, 1, 4, 5],
        [ItemID.ex_enderAluminumbroken, 0, 1, 4, 7]
    ];
    var coarsesalt = [
        [ItemID.ex_IronDustSalts, 0, 1, 4, 17],
        [ItemID.ex_GoldDustSalts, 0, 1, 4, 17],
        [ItemID.ex_NickelDustSalts, 0, 1, 4, 10],
        [ItemID.ex_PlatinumDustSalts, 0, 1, 4, 5],
        [ItemID.ex_AluminumDustSalts, 0, 1, 4, 7]
    ];
    var sieveModelFUNC = function (stringId, metal, texture, x, y, z, click, dim) {
        var emRender = EMRenderTool.updateBox(BlockID[stringId], 0);
        (texture == "air" || !texture) ? emRender.addModelBox(c1, 11 / 16, c1, c15, 15 / 16 - (0.25 / 14) * click, c15, [["air", 0]]) : emRender.addModelBox(c1, 11 / 16, c1, c15, 15 / 16 - (0.25 / 14) * click, c15, [[texture, 0]]);
        (metal == "air" || !metal) ? emRender.addModelBox(c1, 0.55, c1, c15, 0.6, c15, [["air", 0]]) : emRender.addModelBox(c1, 0.55, c1, c15, 0.6, c15, [["ex_sieve" + metal + "Mesh", 0]]);
        emRender.addCollisionBox(c1, 11 / 16, c1, c15, 15 / 16 - (0.25 / 14) * click, c15);
        emRender.addCollisionBox(c1, 0.55, c1, c15, 0.6, c15);
        emRender.addFullModel();
        BlockRenderer.mapAtCoords(x, y, z, emRender.icRender);
        BlockRenderer.mapCollisionModelAtCoords(dim, x, y, z, emRender.icCollision);
        emRender = null;
    };
    function addType(id, object) {
        Sieve.type[id] = object;
    }
    Sieve.addType = addType;
    function addSievedBlock(group, id, object) {
        if (!Sieve.sieve[group]) {
            Sieve.sieve[group] = {};
        }
        Sieve.sieve[group][id] = object;
    }
    Sieve.addSievedBlock = addSievedBlock;
    function addSieved(block, id, data, min, max, chance) {
        if (!this[block])
            this[block] = {};
        this[block][id] = { data: data, dropmin: min, dropmax: max, chance: chance };
    }
    Sieve.addSieved = addSieved;
    function addSieve(stringId, name, tex, type) {
        IDRegistry.genBlockID(stringId);
        Block.createBlock(stringId, [{ name: name, texture: [[tex, 0]], inCreative: true }], { sound: "wood" });
        this.addType(BlockID[stringId], type);
        Item.addCreativeGroup("Sieve", Translation.translate("Sieve"), [BlockID[stringId]]);
        this.setupTileEntity(stringId, name, tex);
        EMRenderTool.createModel({
            type: "coord",
            disableCollision: false,
            blockID: BlockID[stringId],
            onCreate: function (emRender) {
                emRender.addBoxesWithArrayById(this.blockID, 0, {
                    "1": [c0, c8, c0, c16, c12, c1],
                    "2": [c0, c8, c15, c16, c12, c16],
                    "3": [c0, c8, c1, c1, c12, c15],
                    "4": [c15, c8, c1, c16, c12, c15],
                    "5": [c1, c0, c1, c2, c9, c2],
                    "6": [c14, c0, c14, c15, c9, c15],
                    "7": [c14, c0, c1, c15, c9, c2],
                    "8": [c1, c0, c14, c2, c9, c15]
                }, "create");
            }
        });
    }
    Sieve.addSieve = addSieve;
    function setupTileEntity(stringId, name, tex) {
        ExTileEntity.register(BlockID[stringId]);
        var tileEntity = ExTileEntity.get(BlockID[stringId]);
        tileEntity.client = {};
        tileEntity.useNetworkItemContainer = true;
        tileEntity.defaultValues = {
            dropChance: 0,
            brokeChance: 0,
            click: 0,
            _break: 0,
            SieveOnce: false
        };
        tileEntity.init = function () {
            var meshSlot = this.container.getSlot("meshSlot");
            var inPutSlot = this.container.getSlot("inPutSlot");
            if (EXCore.Mesh[meshSlot.id] && EXCore.Mesh[meshSlot.id].data) {
                (inPutSlot.count > 0) ? this.sieveModel(EXCore.Mesh[meshSlot.id].data, Sieve.sieve[EXCore.Mesh[meshSlot.id].group][inPutSlot.id].texture) : this.sieveModel(EXCore.Mesh[meshSlot.id].data, "air");
            }
        };
        tileEntity.sieveModel = function (metal, texture_) {
            (metal) ? this.networkData.putString("mesh", metal) : this.networkData.putString("mesh", "air");
            (texture_) ? this.networkData.putString("texture", texture_) : this.networkData.putString("texture", "air");
            this.networkData.putInt("click", this.data.click);
            this.networkData.putInt("dim", this.dimension);
            this.networkData.sendChanges();
        };
        tileEntity.click = function (id, count, data, croods, player) {
            var inPutSlot = this.container.getSlot("inPutSlot");
            var meshSlot = this.container.getSlot("meshSlot");
            var a = 0;
            if (!EXCore.Mesh[meshSlot.id]) {
                if (EXCore.Mesh[id] && Sieve.type[this.blockSource.getBlock(this.x, this.y, this.z).id] == EXCore.Mesh[id].group) {
                    meshSlot.setSlot(id, 1, data);
                    this.data.dropChance = EXCore.Mesh[id].dropchance;
                    new PlayerEntity(player).setCarriedItem(id, count - 1, data);
                    this.sieveModel(EXCore.Mesh[meshSlot.id].data, "air");
                }
            }
            if (EXCore.Mesh[meshSlot.id]) {
                if (inPutSlot.id <= 0 && Sieve.sieve[EXCore.Mesh[meshSlot.id].group][id]) {
                    Game.prevent();
                    inPutSlot.setSlot(id, 1, data);
                    new PlayerEntity(player).setCarriedItem(id, count - 1, data);
                }
                if (inPutSlot.count > 0 && this.data.click < 14) {
                    SoundManager.playSoundAtEntity(player, "sieve.ogg");
                    this.data.click++;
                    this.sieveModel(EXCore.Mesh[meshSlot.id].data, Sieve.sieve[EXCore.Mesh[meshSlot.id].group][inPutSlot.id].texture, player);
                    Game.prevent();
                }
                else {
                    Game.prevent();
                }
                if (this.data.click >= 14) {
                    meshSlot.setSlot(meshSlot.id, 1, meshSlot.data += 1);
                    while (a < (EXCore.Mesh[meshSlot.id].group == "ex" ? 1 : 6)) {
                        this.sieveModel(EXCore.Mesh[meshSlot.id].data, "air");
                        for (i in Sieve[inPutSlot.id]) {
                            if (Math.random() * 100 <= Sieve[inPutSlot.id][i].chance + this.data.dropChance) {
                                try {
                                    this.blockSource.spawnDroppedItem(this.x + 0.5, this.y + 0.9, this.z + 0.5, i || 0, randomNum(Sieve[inPutSlot.id][i].dropmin, Sieve[inPutSlot.id][i].dropmax, 1 / 4) || 0, Sieve[inPutSlot.id][i].data || 0);
                                }
                                catch (e) { }
                            }
                        }
                        a += 1;
                    }
                    if (meshSlot.data > Item.getMaxDamage(meshSlot.id)) {
                        SoundManager.playSoundAtEntity(player, "meshbreak.ogg");
                        meshSlot.setSlot(0, 0, 0);
                        BlockRenderer.unmapAtCoords(this.x, this.y, this.z);
                        BlockRenderer.unmapCollisionModelAtCoords(this.dimension, this.x, this.y, this.z);
                    }
                    inPutSlot.setSlot(0, 0, 0);
                    this.data.click = 0;
                }
            }
            this.networkData.sendChanges();
        };
        tileEntity.destroy = function (coords, player) {
            BlockRenderer.unmapAtCoords(this.x, this.y, this.z);
            BlockRenderer.unmapCollisionModelAtCoords(this.dimension, this.x, this.y, this.z);
            this.container.getSlot("inPutSlot").count = 0;
        };
        tileEntity.client.renderModel = function () {
            var metal = this.networkData.getString("mesh") || "air";
            var texture_ = this.networkData.getString("texture") || "air";
            var click = this.networkData.getInt("click");
            var dim = this.networkData.getInt("dim");
            sieveModelFUNC(stringId, metal, texture_, this.x, this.y, this.z, click, dim);
        };
        tileEntity.client.load = function () {
            this.renderModel();
            var self = this;
            this.networkData.addOnDataChangedListener(function (data, isExternal) {
                self.renderModel();
            });
        };
    }
    Sieve.setupTileEntity = setupTileEntity;
    for (var i = 0; i < gravel.length; i++) {
        Sieve.addSieved(VanillaBlockID["gravel"], gravel[i][0], gravel[i][1], gravel[i][2], gravel[i][3], gravel[i][4]);
    }
    for (var i = 0; i < dirt.length; i++) {
        Sieve.addSieved(VanillaBlockID["dirt"], dirt[i][0], dirt[i][1], dirt[i][2], dirt[i][3], dirt[i][4]);
    }
    for (var i = 0; i < sand.length; i++) {
        Sieve.addSieved(VanillaBlockID["sand"], sand[i][0], sand[i][1], sand[i][2], sand[i][3], sand[i][4]);
    }
    for (var i = 0; i < dust.length; i++) {
        Sieve.addSieved(BlockID.ex_dust, dust[i][0], dust[i][1], dust[i][2], dust[i][3], dust[i][4]);
    }
    for (var i = 0; i < soulsand.length; i++) {
        Sieve.addSieved(VanillaBlockID["soul_sand"], soulsand[i][0], soulsand[i][1], soulsand[i][2], soulsand[i][3], soulsand[i][4]);
    }
    for (var i = 0; i < netherGravel.length; i++) {
        Sieve.addSieved(BlockID.ex_gravelNether, netherGravel[i][0], netherGravel[i][1], netherGravel[i][2], netherGravel[i][3], netherGravel[i][4]);
    }
    for (var i = 0; i < enderGravel.length; i++) {
        Sieve.addSieved(BlockID.ex_gravelEnder, enderGravel[i][0], enderGravel[i][1], enderGravel[i][2], enderGravel[i][3], enderGravel[i][4]);
    }
    for (var i = 0; i < coarsesalt.length; i++) {
        Sieve.addSieved(BlockID.ex_saltcoarse, coarsesalt[i][0], coarsesalt[i][1], coarsesalt[i][2], coarsesalt[i][3], coarsesalt[i][4]);
    }
})(Sieve || (Sieve = {}));
Sieve.addSievedBlock("ex", VanillaBlockID.dirt, { data: "dirt", texture: "dirt" });
Sieve.addSievedBlock("ex", VanillaBlockID.gravel, { data: "gravel", texture: "gravel" });
Sieve.addSievedBlock("ex", VanillaBlockID.sand, { data: "sand", texture: "sand" });
Sieve.addSievedBlock("ex", BlockID.ex_dust, { data: "dust", texture: "ex_dust" });
Sieve.addSievedBlock("ex", VanillaBlockID.soul_sand, { data: "soulsand", texture: "soul_sand" });
Sieve.addSievedBlock("ex", BlockID.ex_gravelNether, { data: "netherGravel", texture: "ex_gravelNether" });
Sieve.addSievedBlock("ex", BlockID.ex_gravelEnder, { data: "enderGravel", texture: "ex_gravelEnder" });
Sieve.addSievedBlock("ex", BlockID.ex_saltcoarse, { data: "coarsesalt", texture: "ex_coarsesalt" });
Sieve.addSievedBlock("co", BlockID.compresseddirt, { data: "dirt", texture: "ex_compressed_dirt" });
Sieve.addSievedBlock("co", BlockID.compressedgravel, { data: "gravel", texture: "ex_compressed_gravel" });
Sieve.addSievedBlock("co", BlockID.compressedsand, { data: "sand", texture: "ex_compressed_sand" });
Sieve.addSievedBlock("co", BlockID.compresseddust, { data: "dust", texture: "ex_compressed_dust" });
Sieve.addSievedBlock("co", BlockID.compressedsoulsand, { data: "soulsand", texture: "ex_compressed_soul_sand" });
Callback.addCallback("PostLoaded", function () {
    for (var i in Sieve[VanillaBlockID["gravel"]]) {
        Sieve.addSieved(BlockID.compressedgravel, i, Sieve[VanillaBlockID["gravel"]][i].data, Sieve[VanillaBlockID["gravel"]][i].dropmin, Sieve[VanillaBlockID["gravel"]][i].dropmax, Sieve[VanillaBlockID["gravel"]][i].chance);
    }
    for (var i in Sieve[VanillaBlockID["dirt"]]) {
        Sieve.addSieved(BlockID.compresseddirt, i, Sieve[VanillaBlockID["dirt"]][i].data, Sieve[VanillaBlockID["dirt"]][i].dropmin, Sieve[VanillaBlockID["dirt"]][i].dropmax, Sieve[VanillaBlockID["dirt"]][i].chance);
    }
    for (var i in Sieve[VanillaBlockID["sand"]]) {
        Sieve.addSieved(BlockID.compressedsand, i, Sieve[VanillaBlockID["sand"]][i].data, Sieve[VanillaBlockID["sand"]][i].dropmin, Sieve[VanillaBlockID["sand"]][i].dropmax, Sieve[VanillaBlockID["sand"]][i].chance);
    }
    for (var i in Sieve[BlockID.ex_dust]) {
        Sieve.addSieved(BlockID.compresseddust, i, Sieve[BlockID.ex_dust][i].data, Sieve[BlockID.ex_dust][i].dropmin, Sieve[BlockID.ex_dust][i].dropmax, Sieve[BlockID.ex_dust][i].chance);
    }
    for (var i in Sieve[VanillaBlockID["soul_sand"]]) {
        Sieve.addSieved(BlockID.compressedsoulsand, i, Sieve[VanillaBlockID["soul_sand"]][i].data, Sieve[VanillaBlockID["soul_sand"]][i].dropmin, Sieve[VanillaBlockID["soul_sand"]][i].dropmax, Sieve[VanillaBlockID["soul_sand"]][i].chance);
    }
});
//var UIbase = UI.getScreenHeight();
ToolType.CompressedHammer = {
    damage: 2,
    blockTypes: ["stone", "dirt"],
    onAttack: function (item) {
        if (item.data > Item.getMaxDamage(item.id)) {
            item.id = item.data = item.count = 0;
        };
    }
};
var CompressedCore = {
    isHammer: {},
    machine: {},
    addBlock: function (metal, Metal, texture) {
        IDRegistry.genBlockID("compressed" + metal);
        Block.createBlock("compressed" + metal, [{
                name: "Compressed " + Metal,
                texture: [[texture, 0]],
                inCreative: true
            }]);
    },
    HammerRecipes: function (ID, id) {
        Recipes.addShaped({ id: ID, count: 1, data: 0 }, ["aaa", "aaa", "aaa"], ["a", id, 0]);
    },
    BlockRecipes: function (ID, id) {
        Recipes.addShaped({ id: ID, count: 1, data: 0 }, ["aaa", "aaa", "aaa"], ["a", id, 0]);
    },
    transformation: function (blockid, id, count, data) {
        var fun = Block.getDropFunction(blockid);
        Block.registerDropFunctionForID(blockid, function (coords, blockId, blockData, level, enchant, item, blockSource) {
            if (EXCore.isHammer[item.id]) {
                return [[id, count, data]];
            }
            else {
                return fun && fun(coords, blockId, blockData, level, enchant, item, blockSource);
            };
        });
    },
    addHammer: function (id) {
        this.isHammer[id] = {};
    },
    setMachineInPut: function (machine, object) {
        this.machine[machine] = object;
    },
    getMachineInPut: function (machine, id, data) {
        return eval(this.machine[machine][id + ":" + data]);
    },
    machineAdd: function (machine, id, data, object) {
        this.machine[machine][id + ":" + data] = object;
    },
};
var CrucibleAPI = {
    registerCrucible: function (StringId, name, tex, api) {
        IDRegistry.genBlockID(StringId);
        var CrucibleType = Block.createSpecialType({
            sound: "wood"
        });
        Block.createBlock(StringId, [{
                name: name,
                texture: [[tex, 0]],
                inCreative: true
            }], CrucibleType);
        ToolAPI.registerBlockMaterial(BlockID[StringId], "wood");
        var render = new ICRender.Model();
        var model = BlockRenderer.Model();
        model.addBox(c0, c3, c0, c1, c16, c16, BlockID[StringId], 0);
        model.addBox(c15, c3, c0, c16, c16, c16, BlockID[StringId], 0);
        model.addBox(c1, c3, c0, c15, c16, c1, BlockID[StringId], 0);
        model.addBox(c1, c3, c15, c15, c16, c16, BlockID[StringId], 0);
        model.addBox(c0, c0, c0, c1, c3, c1, BlockID[StringId], 0);
        model.addBox(c15, c0, c0, c16, c3, c1, BlockID[StringId], 0);
        model.addBox(c15, c0, c15, c16, c3, c16, BlockID[StringId], 0);
        model.addBox(c0, c0, c15, c1, c3, c16, BlockID[StringId], 0);
        model.addBox(c1, c3, c1, c15, c4, c15, [[tex, 0]]);
        render.addEntry(model);
        BlockRenderer.enableCoordMapping(BlockID[StringId], 0, render);
        var Collision = new ICRender.CollisionShape();
        Collision.addEntry().addBox(c0, c3, c0, c1, c16, c16);
        Collision.addEntry().addBox(c15, c3, c0, c16, c16, c16);
        Collision.addEntry().addBox(c1, c3, c0, c15, c16, c1);
        Collision.addEntry().addBox(c1, c3, c15, c15, c16, c16);
        Collision.addEntry().addBox(c0, c0, c0, c1, c3, c1);
        Collision.addEntry().addBox(c15, c0, c0, c16, c3, c1);
        Collision.addEntry().addBox(c15, c0, c15, c16, c3, c16);
        Collision.addEntry().addBox(c0, c0, c15, c1, c3, c16);
        Collision.addEntry().addBox(c1, c3, c1, c15, c4, c15);
        BlockRenderer.setCustomCollisionShape(BlockID[StringId], 0, Collision);
        var params = {
            useNetworkItemContainer: true,
            defaultValues: {
                worktime: 0,
                Work: false,
                data: 0,
                CrucibleOnce: false
            },
            getTransportSlots: function () {
                return {
                    input: ["slotInput"]
                };
            },
            init: function () {
                this.liquidStorage.setLimit("water", 1);
            },
            oakcruciblebox: function (ydata1, ydata2, ydata3, ydata4, data) {
                var render = new ICRender.Model();
                var model = BlockRenderer.Model();
                model.addBox(c0, c3, c0, c1, c16, c16, BlockID[StringId], 0);
                model.addBox(c15, c3, c0, c16, c16, c16, BlockID[StringId], 0);
                model.addBox(c1, c3, c0, c15, c16, c1, BlockID[StringId], 0);
                model.addBox(c1, c3, c15, c15, c16, c16, BlockID[StringId], 0);
                model.addBox(c0, c0, c0, c1, c3, c1, BlockID[StringId], 0);
                model.addBox(c15, c0, c0, c16, c3, c1, BlockID[StringId], 0);
                model.addBox(c15, c0, c15, c16, c3, c16, BlockID[StringId], 0);
                model.addBox(c0, c0, c15, c1, c3, c16, BlockID[StringId], 0);
                model.addBox(c1, c3, c1, c15, c4, c15, [[tex, 0]]);
                model.addBox(c1, ydata1, c1, c15, ydata2, c15, [["leaf", 0]]);
                model.addBox(c1, ydata3, c1, c15, ydata4, c15, data);
                render.addEntry(model);
                BlockRenderer.mapAtCoords(this.x, this.y, this.z, render);
                var Collision = new ICRender.CollisionShape();
                Collision.addEntry().addBox(c0, c3, c0, c1, c16, c16);
                Collision.addEntry().addBox(c15, c3, c0, c16, c16, c16);
                Collision.addEntry().addBox(c1, c3, c0, c15, c16, c1);
                Collision.addEntry().addBox(c1, c3, c15, c15, c16, c16);
                Collision.addEntry().addBox(c0, c0, c0, c1, c3, c1);
                Collision.addEntry().addBox(c15, c0, c0, c16, c3, c1);
                Collision.addEntry().addBox(c15, c0, c15, c16, c3, c16);
                Collision.addEntry().addBox(c0, c0, c15, c1, c3, c16);
                Collision.addEntry().addBox(c1, c3, c1, c15, c4, c15);
                Collision.addEntry().addBox(c1, ydata1, c1, c15, ydata2, c15);
                Collision.addEntry().addBox(c1, ydata3, c1, c15, ydata4, c15);
                BlockRenderer.setCustomCollisionShape(BlockID[StringId], 0, Collision);
            },
            Model: function (ydata1, ydata2, ydata3, ydata4, data) {
                //this.data.CrucibleOnce = true;
                this.networkData.putString("data", data);
                this.networkData.putInt("click", ydata1);
                this.networkData.putInt("click", ydata2);
                this.networkData.putInt("click", ydata3);
                this.networkData.putInt("click", ydata4);
                //this.oakcruciblebox(ydata1, ydata2, ydata3, ydata4, data);
            },
            client: {
                renderModel: function () {
                    var data = this.networkData.getString("data");
                    var ydata1 = this.networkData.getInt("ydata1");
                    var ydata2 = this.networkData.getInt("ydata2");
                    var ydata3 = this.networkData.getInt("ydata3");
                    var ydata4 = this.networkData.getInt("ydata4");
                    params.oakcruciblebox(ydata1, ydata2, ydata3, ydata4, data);
                },
                load: function () {
                    this.renderModel();
                    var self = this;
                    this.networkData.addOnDataChangedListener(function (data, isExternal) {
                        self.renderModel();
                    });
                }
            },
            tick: function () {
                var input = this.container.getSlot("slotInput");
                var st2 = this.container.getSlot("slot2");
                var water = this.liquidStorage.getAmount("water");
                var get = api.Crucible.dataGet("oak_crucible", input.id, input.data);
                if (water < 1 && this.data.worktime > 0) {
                    get && this.liquidStorage.addLiquid("water", get.addwater);
                    this.data.worktime -= 1;
                };
                if ((this.data.worktime + water * 1000 <= 750 || this.data.worktime <= 0 && water < 1) && get && st2.count == 0 && input.count == 64) {
                    input.count--;
                    this.data.worktime += get.addworktime;
                };
                this.data.worktime >= water && water <= 0 && this.Model(c4, this.data.worktime * 0.00075 + c4, c4, c4, [["air", 0]]);
                water > 0 && this.Model(c4, 1 - (1000 - this.data.worktime) * 0.00075, c4, (water * 1000) * 0.00075 + c4, [["Water", 0]]);
                input.count = input.count <= 0 ? 63 : input.count;
                if (this.data.worktime + water * 1000 >= 988 && st2.count == 0) {
                    st2.count++;
                    input.count = 64;
                };
                if (st2.count == 1 && input.count == 64 && this.data.worktime + water * 1000 == 0) {
                    BlockRenderer.unmapAtCoords(this.x, this.y, this.z);
                    st2.count = 0;
                    input.count = 63;
                };
            },
            getLiquid: function (full, amount, id, data, count, player) {
                Game.prevent();
                if (amount >= 1) {
                    this.liquidStorage.getLiquid("water", 1);
                    new PlayerEntity(player).setCarriedItem(id, count - 1, data);
                    new PlayerEntity(player).addItemToInventory(full.id, 1, full.data);
                    return true;
                };
            },
            click: function (id, count, data, croods, player) {
                var water = this.liquidStorage.getAmount("water");
                var input = this.container.getSlot("slotInput");
                var st2 = this.container.getSlot("slot2");
                var get = api.Crucible.dataGet("oak_crucible", id, data);
                var waterfull = LiquidRegistry.getFullItem(id, data, "water");
                if (this.data.worktime <= 750 && this.data.worktime / 1000 + water < 1) {
                    if (get) {
                        new PlayerEntity(player).setCarriedItem(id, count - 1, data);
                        input.id = id;
                        input.data = data;
                        input.count++;
                        Game.prevent();
                    }
                    ;
                };
                waterfull && this.getLiquid(waterfull, water, id, data, count, player);
            },
            destroy: function () {
                BlockRenderer.unmapAtCoords(this.x, this.y, this.z);
                var input = this.container.getSlot("slotInput");
                var st2 = this.container.getSlot("slot2");
                input.count = 0;
                st2.count = 0;
            }
        };
        TileEntity.registerPrototype(BlockID[StringId], params);
    }
};
//black
IDRegistry.genItemID("ex_slimeBallBlack");
Item.createItem("ex_slimeBallBlack", "Black Slime Ball", {
    name: "ex_BlackSlimeBall",
    meta: 0
});
/*
IDRegistry.genItemID("emeraldBlack");
Item.createItem("emeraldBlack","Black Emerald",
{name:"ex_BlackEmerald", meta:   0  });
IDRegistry.genBlockID("emeraldBlack");
Block.createBlock("emeraldBlack", [
{name: "", texture:
[["黑色绿宝石", 0]], inCreative: false}
]);
Block.setShape(BlockID.emeraldBlack, 7.5/16, c0, c0, 8.5/16, c16, c16);
Item.registerUseFunction("emeraldBlack", function(coords, item, block){
var place = coords.relative;
if(GenerationUtils.isTransparentBlock(World.getBlockID(place.x, place.y, place.z))){
World.setBlock(place.x, place.y, place.z, BlockID.emeraldBlack);
Player.setCarriedItem(item.id, item.count - 1, item.data);
World.addTileEntity(place.x, place.y, place.z);
}
});

Callback.addCallback("Explosion", function(coords, params){
var x = coords.x;
var y = coords.y;
var z = coords.z;
if(World.getBlockID(x,y,z)===BlockID.emeraldBlack&&
World.getBlockID(x,y+1,z)!==0&&World.getBlockID(x+1,y,z)!==0&&World.getBlockID(x,y,z+1)!==0&&World.getBlockID(x,y-1,z)!==0&&World.getBlockID(x-1,y,z)!==0&&World.getBlockID(x,y,z-1)!==0){
Particles.line(ParticleType.flame,x+1,x-1,0.2,1,0);
Particles.line(ParticleType.flame,y+1,y-1,0.2,1,0);
Particles.line(ParticleType.flame,z+1,z-1,0.2,1,0);
Particles.line(ParticleType.flame,x+1,y-1,0.2,1,0);
Particles.line(ParticleType.flame,x+1,z-1,0.2,1,0);
Particles.line(ParticleType.flame,y+1,x-1,0.2,1,0);
Particles.line(ParticleType.flame,y+1,z-1,0.2,1,0);
Particles.line(ParticleType.flame,z+1,x-1,0.2,1,0);
Particles.line(ParticleType.flame,z+1,y-1,0.2,1,0);
Player.setCarriedItem(264,count+2,0);
}
});
*/
EXCore.defineAllSalts("Copper", "ore_salts_copper");
EXCore.defineAllSalts("Tin", "ore_salts_tin");
EXCore.defineAllSalts("Lead", "ore_salts_lead");
EXCore.defineAllSalts("Silver", "ore_salts_silver");
EXCore.defineAllSalts("Iron", "ore_salts_Iron");
EXCore.defineAllSalts("Gold", "ore_salts_gold");
EXCore.defineAllSalts("Nickel", "ore_salts_nickel");
EXCore.defineAllSalts("Platinum", "ore_salts_platinum");
/*var Graphics = android.graphics;
var Drawable = Graphics.drawable;
var BitmapDrawable = Drawable.BitmapDrawable;
var Color = android.graphics.Color;

function average(color, color2, f) {
    //fuck code
    var r1 = color >> 16 & 0xff;
    var g1 = color >> 8 & 0xff;
    var b1 = color & 0xff;
    var r2 = color2 >> 16 & 0xff;
    var g2 = color2 >> 8 & 0xff;
    var b2 = color2 & 0xff;
    var r = r1 + (r2 - r1) * f;
    var g = g1 + (g2 - g1) * f;
    var b = b1 + (b2 - b1) * f;
    return Color.rgb(r, g, b);
}

for(var a = 0;a<=20;a++){

var paint = new android.graphics.Paint();
var options = new android.graphics.BitmapFactory.Options();
options.inScaled = false;
var bitmap_1 = new android.graphics.BitmapFactory.decodeFile("/storage/emulated/0/bluetooth/" + "dirt.png", options);
var bitmap_2 = new android.graphics.BitmapFactory.decodeFile("/storage/emulated/0/bluetooth/" + "ex_"+a+"_0.png", options);
for(var i=0;i<=100;i++){
var PutBitmap = new android.graphics.Bitmap.createBitmap(16, 16, android.graphics.Bitmap.Config.ARGB_8888);
var PutCanvas = new android.graphics.Canvas(PutBitmap);
for (var width = 0; width < 16; width++) {
    for (var height = 0; height < 16; height++) {
        var pixels_1 = bitmap_1.getPixel(width, height);
        var pixels_2 = bitmap_2.getPixel(width, height);
        var mixColor = average(pixels_1, pixels_2, i / 100);
        paint.setARGB(255, mixColor >> 16 & 0xff, mixColor >> 8 & 0xff, mixColor & 0xff);
        PutCanvas.drawPoint( width, height, paint);
    };
};
var bos = new java.io.ByteArrayOutputStream();
PutBitmap.compress(android.graphics.Bitmap.CompressFormat.PNG, 100, bos);
var fileOutputStream = new java.io.FileOutputStream("/storage/emulated/0/bluetooth/"+"_"+a+"_"+(100-i)+".png");
fileOutputStream.write(bos.toByteArray());
}

}*/ 
var config = {
    meshBreak: __config__.getBool("meshBreak"),
    EntityMax: __config__.getNumber("EntityMax")
};
Meshproperty.forEach(function (value) {
    EXCore.registerMesh(value[0], value[1], value[2], value[3]);
});
for (key in Ingotproperty) {
    IDRegistry.genItemID(key);
    Item.createItem(key, Ingotproperty[key], {
        name: "ex_" + key,
        meta: 0
    });
    Item.addCreativeGroup("Ingots", Translation.translate("Ingots"), [ItemID[key]]);
}
EXCore.register("Iron", 265, 0, 4);
EXCore.register("Gold", 266, 0, 4);
EXCore.registerMineral("Nickel");
EXCore.registerMineral("Platinum");
EXCore.registerMineral("Aluminum");
LiquidRegistry.registerLiquid("waterwitch", "Witch Water", ["ex_waterwitch_0"]);
LiquidRegistry.registerLiquid("waterslime", "Slime Water", ["ex_waterslime_0"]);
CompressedCore.addBlock("cobblestone", "Cobblestone", "ex_compressed_cobblestone");
CompressedCore.addBlock("dirt", "Dirt", "ex_compressed_dirt");
CompressedCore.addBlock("flint", "Flint", "ex_compressed_flint");
CompressedCore.addBlock("dust", "Dust", "ex_compressed_dust");
CompressedCore.addBlock("sand", "Sand", "ex_compressed_sand");
CompressedCore.addBlock("netherrack", "Netherrack", "ex_compressed_netherrack");
CompressedCore.addBlock("gravel", "Gravel", "ex_compressed_gravel");
CompressedCore.addBlock("stone", "Stone", "ex_compressed_stone");
CompressedCore.addBlock("nethergravel", "Nether Gravel", "ex_compressed_nether_gravel");
CompressedCore.addBlock("endstone", "End Stone", "ex_compressed_end_stone");
CompressedCore.addBlock("endergravel", "Ender Gravel", "ex_compressed_ender_gravel");
CompressedCore.addBlock("soulsand", "Soul Sand", "ex_compressed_soul_sand");
ToolAPI.registerBlockMaterial(BlockID.compressedgravel, "stone");
ToolAPI.registerBlockMaterial(BlockID.compresseddust, "stone");
ToolAPI.registerBlockMaterial(BlockID.compressedsand, "stone");
ToolAPI.registerBlockMaterial(BlockID.compresseddirt, "dirt");
ToolAPI.registerBlockMaterial(BlockID.compressedflint, "stone");
ToolAPI.registerBlockMaterial(BlockID.compressedstone, "stone");
ToolAPI.registerBlockMaterial(BlockID.compressedcobblestone, "stone");
ToolAPI.registerBlockMaterial(BlockID.compressednetherrack, "stone");
ToolAPI.registerBlockMaterial(BlockID.compressednethergravel, "stone");
ToolAPI.registerBlockMaterial(BlockID.compressedendstone, "stone");
ToolAPI.registerBlockMaterial(BlockID.compressedendergravel, "stone");
ToolAPI.registerBlockMaterial(BlockID.compressedsoulsand, "stone");
ModAPI.addAPICallback("ENR", function (api) {
    api.Crucible.dataSet("oak_crucible", {
        "6:0": {
            addworktime: 125,
            addwater: 0.001
        },
        "6:1": {
            addworktime: 125,
            addwater: 0.001
        },
        "6:2": {
            addworktime: 125,
            addwater: 0.001
        },
        "6:3": {
            addworktime: 125,
            addwater: 0.001
        },
        "6:4": {
            addworktime: 125,
            addwater: 0.001
        },
        "6:5": {
            addworktime: 125,
            addwater: 0.001
        },
        "18:0": {
            addworktime: 250,
            addwater: 0.001
        },
        "18:1": {
            addworktime: 250,
            addwater: 0.001
        },
        "18:2": {
            addworktime: 250,
            addwater: 0.001
        },
        "18:3": {
            addworktime: 250,
            addwater: 0.001
        },
        "161:0": {
            addworktime: 250,
            addwater: 0.001
        },
        "161:1": {
            addworktime: 250,
            addwater: 0.001
        }
    });
    CrucibleAPI.registerCrucible("ex_crucible_oak", "Oak Crucible", "log_oak", api);
    CrucibleAPI.registerCrucible("ex_crucible_spruce", "Spruce Crucible", "log_spruce", api);
    CrucibleAPI.registerCrucible("ex_crucible_birch", "Birch Crucible", "log_birch", api);
    CrucibleAPI.registerCrucible("ex_crucible_jungle", "Jungle Crucible", "log_jungle", api);
    CrucibleAPI.registerCrucible("ex_crucible_acacia", "Acacia Crucible", "log_acacia", api);
    CrucibleAPI.registerCrucible("ex_crucible_big_oak", "Dark Oak Crucible", "log_big_oak", api);
});
Sieve.addSieve("ex_heavysieve_oak", "Heavy Oak Sieve", "log_oak", "co");
Sieve.addSieve("ex_heavysieve_spruce", "Heavy Spruce Sieve", "log_spruce", "co");
Sieve.addSieve("ex_heavysieve_birch", "Heavy Birch Sieve", "log_birch", "co");
Sieve.addSieve("ex_heavysieve_jungle", "Heavy Jungle Sieve", "log_jungle", "co");
Sieve.addSieve("ex_heavysieve_acacia", "Heavy Acacia Sieve", "log_acacia", "co");
Sieve.addSieve("ex_heavysieve_big_oak", "Heavy Dark Oak Sieve", "log_big_oak", "co");
(function () {
    var Leaves = Block.createSpecialType({
        base: VanillaBlockID.leaves,
        sound: "grass",
        destroytime: 0.15
    });
    IDRegistry.genBlockID("ex_infestedRaw0");
    IDRegistry.genBlockID("ex_infestedRaw1");
    IDRegistry.genBlockID("ex_infestedRaw2");
    IDRegistry.genBlockID("ex_infestedLeaf0");
    IDRegistry.genBlockID("ex_infestedLeaf1");
    IDRegistry.genBlockID("ex_infestedLeaf2");
    Block.createBlock("ex_infestedRaw0", [{
            name: "Raw Infested Leaves",
            texture: [["enr_RawInfestedLeaves0", 0]],
            inCreative: true
        }], Leaves);
    Block.createBlock("ex_infestedRaw1", [{
            name: "Raw Infested Leaves",
            texture: [["enr_RawInfestedLeaves1", 0]],
            inCreative: true
        }], Leaves);
    Block.createBlock("ex_infestedRaw2", [{
            name: "Raw Infested Leaves",
            texture: [["enr_RawInfestedLeaves2", 0]],
            inCreative: true
        }], Leaves);
    Block.createBlock("ex_infestedLeaf0", [{
            name: "Infested Leaves",
            texture: [["enr_InfestedLeaves0", 0]],
            inCreative: true
        }], Leaves);
    Block.createBlock("ex_infestedLeaf1", [{
            name: "Infested Leaves",
            texture: [["enr_InfestedLeaves1", 0]],
            inCreative: true
        }], Leaves);
    Block.createBlock("ex_infestedLeaf2", [{
            name: "Infested Leaves",
            texture: [["enr_InfestedLeaves2", 0]],
            inCreative: true
        }], Leaves);
    for (var i = 0; i < 3; i++) {
        Block.registerDropFunctionForID(BlockID["ex_infestedRaw" + i], function (id, data) {
            return [];
        });
    }
})();
ToolAPI.registerBlockMaterial(BlockID.ex_infestedRaw0, "plant");
ToolAPI.registerBlockMaterial(BlockID.ex_infestedRaw1, "plant");
ToolAPI.registerBlockMaterial(BlockID.ex_infestedRaw2, "plant");
ToolAPI.registerBlockMaterial(BlockID.ex_infestedLeaf0, "plant");
ToolAPI.registerBlockMaterial(BlockID.ex_infestedLeaf1, "plant");
ToolAPI.registerBlockMaterial(BlockID.ex_infestedLeaf2, "plant");
var GrowGroup = {
    ex_infestedRaw0: BlockID.ex_infestedLeaf0,
    ex_infestedRaw1: BlockID.ex_infestedLeaf1,
    ex_infestedRaw2: BlockID.ex_infestedLeaf2
};
function check(block, x, y, z, blockSource) {
    if (LeafGroup[block.id] && LeafGroup[block.id][block.data]) {
        blockSource.setBlock(x, y, z, LeafGroup[block.id][block.data], 0);
    }
};
var LeafGroup = {
    18: {
        0: BlockID.ex_infestedRaw0,
        1: BlockID.ex_infestedRaw2,
        2: BlockID.ex_infestedRaw0,
        3: BlockID.ex_infestedRaw1,
        4: BlockID.ex_infestedRaw0,
        5: BlockID.ex_infestedRaw2,
        6: BlockID.ex_infestedRaw0,
        7: BlockID.ex_infestedRaw1
    },
    161: {
        0: BlockID.ex_infestedRaw0,
        1: BlockID.ex_infestedRaw0,
        2: BlockID.ex_infestedRaw0,
        3: BlockID.ex_infestedRaw0
    },
    registerLeafRaw: function (blockID, StringId) {
        Block.registerNeighbourChangeFunction(GrowGroup[StringId], function (coords, block, changedCoords, blockSource) {
            if (LeafGroup[blockSource.getBlockId(changedCoords.x, changedCoords.y, changedCoords.z)]) {
                blockSource.setBlock(changedCoords.x, changedCoords.y, changedCoords.z, LeafGroup[blockSource.getBlock(changedCoords.x, changedCoords.y, changedCoords.z).id][blockSource.getBlock(changedCoords.x, changedCoords.y, changedCoords.z).data], 0);
            }
        });
        Block.registerPlaceFunction(GrowGroup[StringId], function (coords, item, block, player, blockSource) {
            var x = coords.relative.x;
            var y = coords.relative.y;
            var z = coords.relative.z;
            blockSource.setBlock(x, y, z, item.id, item.data);
            check(blockSource.getBlock(x + 1, y, z), x + 1, y, z, blockSource);
            check(blockSource.getBlock(x - 1, y, z), x - 1, y, z, blockSource);
            check(blockSource.getBlock(x, y + 1, z), x, y + 1, z, blockSource);
            check(blockSource.getBlock(x, y - 1, z), x, y - 1, z, blockSource);
            check(blockSource.getBlock(x, y, z + 1), x, y, z + 1, blockSource);
            check(blockSource.getBlock(x, y, z - 1), x, y, z - 1, blockSource);
        });
        Block.setRandomTickCallback(blockID, function (x, y, z, id, data, blockSource) {
            blockSource.setBlock(x, y, z, GrowGroup[StringId], 0);
            check(blockSource.getBlock(x + 1, y, z), x + 1, y, z, blockSource);
            check(blockSource.getBlock(x - 1, y, z), x - 1, y, z, blockSource);
            check(blockSource.getBlock(x, y + 1, z), x, y + 1, z, blockSource);
            check(blockSource.getBlock(x, y - 1, z), x, y - 1, z, blockSource);
            check(blockSource.getBlock(x, y, z + 1), x, y, z + 1, blockSource);
            check(blockSource.getBlock(x, y, z - 1), x, y, z - 1, blockSource);
        });
    },
    registerDrop: function (blockID) {
        Block.registerDropFunctionForID(blockID, function (blockCoords, blockID, blockData, diggingLevel, enchant, item, region) {
            var random = Math.random() * 100;
            var data = random < 42.5 ? [[VanillaItemID.string, 1, 0]] : random < 10 ? [[VanillaItemID.string, 2, 0]] : [[0, 0, 0]];
            if (item.id == VanillaItemID.shears) {
                ToolAPI.breakCarriedTool(1);
                data = [[blockID, 1, 0]];
            }
            return [data[0]];
        });
    }
};
LeafGroup.registerLeafRaw(BlockID.ex_infestedRaw0, "ex_infestedRaw0");
LeafGroup.registerLeafRaw(BlockID.ex_infestedRaw1, "ex_infestedRaw1");
LeafGroup.registerLeafRaw(BlockID.ex_infestedRaw2, "ex_infestedRaw2");
LeafGroup.registerDrop(BlockID.ex_infestedLeaf0);
LeafGroup.registerDrop(BlockID.ex_infestedLeaf1);
LeafGroup.registerDrop(BlockID.ex_infestedLeaf2);
IDRegistry.genBlockID("ex_endCake");
Block.createBlockWithRotation("ex_endCake", [{
        name: "End Cake",
        texture: [
            ["enr_endCake", 0],
            ["enr_endCake", 1],
            ["enr_endCake", 2],
            ["enr_endCake", 2],
            ["enr_endCake", 2],
            ["enr_endCake", 2]
        ],
        inCreative: true
    }], {
    base: 92,
    sound: "cloth",
    destroytime: 0.2
});
(function () {
    var render = new ICRender.Model();
    var model = BlockRenderer.Model();
    model.addBox(c1, c0, c1, c15, c8, c15, BlockID.ex_endCake, 0);
    render.addEntry(model);
    BlockRenderer.enableCoordMapping(BlockID.ex_endCake, 0, render);
    var Collision = new ICRender.CollisionShape();
    Collision.addEntry()
        .addBox(c1, c0, c1, c15, c8, c15);
    BlockRenderer.setCustomCollisionShape(BlockID.ex_endCake, 0, Collision);
    Block.registerDropFunctionForID(BlockID.ex_endCake, function (id, data) {
        return [];
    });
    function BuildEndCake(shape, x, y, z) {
        var model = BlockRenderer.Model();
        var render = new ICRender.Model();
        var Collision = new ICRender.CollisionShape();
        model.addBox(c1, c0, c1, c15, c8, shape / 16, BlockID.ex_endCake, 0);
        Collision.addEntry()
            .addBox(c1, c0, c1, c15, c8, shape / 16);
        render.addEntry(model);
        BlockRenderer.setCustomCollisionShape(BlockID.ex_endCake, 0, Collision);
        BlockRenderer.mapAtCoords(x, y, z, render);
    }
    var isTransfer;
    TileEntity.registerPrototype(BlockID.ex_endCake, {
        useNetworkItemContainer: true,
        defaultValues: {
            data: 15,
            transfer: false
        },
        client: {
            renderModel: function () {
                var shape = this.networkData.getInt("shape");
                BuildEndCake(shape, this.x, this.y, this.z);
            },
            load: function () {
                this.renderModel();
                var self = this;
                this.networkData.addOnDataChangedListener(function (data, isExternal) {
                    self.renderModel();
                });
            }
        },
        show: function () {
            this.networkData.putInt("shape", this.data.data);
            //BuildEndCake(this.data.data, this.x, this.y, this.z);
        },
        tick: function () {
            this.show();
            this.data.data <= 4 && this.blockSource.setBlock(this.x, this.y, this.z, 0, 0);
            this.networkData.sendChanges();
        },
        click: function (id, count, data, coords, player) {
            this.data.data -= 2;
            isTransfer = false;
            if (isTransfer != true && Entity.getDimension(player) == 0) {
                isTransfer = true;
            };
            Dimensions.transfer(player, 2);
        },
        destroy: function () {
            BlockRenderer.unmapAtCoords(this.x, this.y, this.z);
        }
    });
    Callback.addCallback("CustomDimensionTransfer", function (entity, from, to) {
        if (to == 2 && isTransfer) {
            isTransfer = false;
            Callback.invokeCallback("GenerateAndSetPos", entity);
        };
    });
    Callback.addCallback("GenerateAndSetPos", function (playerUid) {
        Updatable.addUpdatable({
            timer: 0,
            update: function () {
                this.timer++;
                var pos = Entity.getPosition(playerUid);
                if (pos.y != 66) {
                    var blockSource = BlockSource.getDefaultForDimension(2);
                    var pos = Entity.getPosition(playerUid);
                    Updatable.addUpdatable({
                        age: 0,
                        update: function () {
                            Entity.setPosition(playerUid, 100 + 0.5, 53, 0 + 0.5);
                            this.remove = this.age++ > 5;
                        }
                    });
                    for (var coords_X = 98; coords_X <= 102; coords_X++) {
                        for (var coords_Z = -2; coords_Z <= 2; coords_Z++) {
                            for (var coords_Y = 49; coords_Y <= 51; coords_Y++) {
                                blockSource.setBlock(coords_X, coords_Y, coords_Z, 0, 0);
                            }
                            ;
                            blockSource.setBlock(coords_X, 48, coords_Z, VanillaTileID.obsidian, 0);
                        }
                        ;
                    }
                    ;
                    var pos = Entity.getPosition(playerUid);
                    this.remove = ((pos.y == 53) || this.timer > 20) ? true : false;
                }
            }
        });
    });
})();
IDRegistry.genBlockID("ex_dust");
Block.createBlock("ex_dust", [{ name: "Dust", texture: [["ex_dust", 0]], inCreative: true }]);
IDRegistry.genBlockID("ex_gravelNether");
Block.createBlock("ex_gravelNether", [{ name: "Nether Gravel", texture: [["ex_gravelNether", 0]], inCreative: true }], { sound: "gravel" });
IDRegistry.genBlockID("ex_gravelEnder");
Block.createBlock("ex_gravelEnder", [{ name: "Ender Gravel", texture: [["ex_gravelEnder", 0]], inCreative: true }], { sound: "gravel" });
IDRegistry.genBlockID("ex_saltcoarse");
Block.createBlock("ex_saltcoarse", [{ name: "Coarse salt", texture: [["ex_coarsesalt", 0]], inCreative: true }], { sound: "gravel" });
var dirtEarth_TYPE_ = Block.createSpecialType({
    base: VanillaBlockID.dirt,
    sound: "gravel"
});
IDRegistry.genBlockID("ex_dirtEarth");
Block.createBlock("ex_dirtEarth", [{
        name: "Cursed Earth",
        texture: [
            ["ex_dirtEarth", 2],
            ["ex_dirtEarth", 0],
            ["ex_dirtEarth", 1]
        ],
        inCreative: true
    }], dirtEarth_TYPE_);
ToolAPI.registerBlockMaterial(BlockID.ex_dirtEarth, "dirt");
Block.registerDropFunctionForID(BlockID.ex_dirtEarth, function (croods, id, data, toolLevel) {
    return toolLevel.silk >= 1 ? [
        [BlockID.ex_dirtEarth, 1, 0]
    ] : [
        [3, 1, 0]
    ];
});
var mob = [{
        id: 32,
        chance: 12.5
    }, {
        id: 33,
        chance: 13.5
    }, {
        id: 34,
        chance: 12.5
    }, {
        id: 35,
        chance: 6
    }, {
        id: 45,
        chance: 5
    }, {
        id: 38,
        chance: 2
    }];
var ENT = {
    64: true,
    65: true,
    66: true,
    67: true,
    68: true,
    69: true,
    77: true,
    80: true,
    81: true,
    82: true,
    83: true,
    84: true,
    85: true,
    86: true,
    90: true,
    93: true,
    94: true
};
var animal = {
    10: true,
    11: true,
    12: true,
    13: true,
    14: true,
    15: true,
    115: true,
    16: true,
    17: true,
    18: true
};
TileEntity.registerPrototype(BlockID.ex_dirtEarth, {
    defaultValues: {
        tick: 0,
        entity: {},
        jin: 0
    },
    setTileEntity: function (x, y, z, id, data) {
        this.blockSource.setBlock(x, y, z, id, data);
        TileEntity.addTileEntity(x, y, z, this.blockSource);
    },
    check1: function (x, y, z) {
        var number = this.blockSource.getBlockId(x, y, z);
        return number === 2 || number === 3 ? true : false;
    },
    findNear: function (coords) {
        var data = EntityDataRegistry.getAllData();
        var closest = {
            dis: 20
        };
        for (var entity in data) {
            var dis = Entity.getDistanceToCoords(parseInt(entity), coords);
            if (dis < closest.dis) {
                this.data.entity[entity] = true;
            }
        }
    },
    tick: function () {
        var light = World.getLightLevel;
        var x = this.x;
        var y = this.y;
        var z = this.z;
        this.data.tick++;
        var up = this.check1(x, y + 1, z);
        var bottom = this.check1(x, y - 1, z);
        var left = this.check1(x + 1, y, z);
        var right = this.check1(x - 1, y, z);
        var front = this.check1(x, y, z + 1);
        var behind = this.check1(x, y, z - 1);
        this.findNear({
            x: this.x,
            y: this.y,
            z: this.z
        });
        //		Particles.addParticle(x, y + 0.2, z, Native.ParticleType.suspendedTown, 1, 1, 1, 0);
        if (this.data.tick >= 10000 && light(x, y + 1, z) <= 4) {
            left ? this.setTileEntity(x + 1, y, z, BlockID.ex_dirtEarth, 0) : up ? this.setTileEntity(x, y + 1, z, BlockID.ex_dirtEarth, 0) : front ? this.setTileEntity(x, y, z + 1, BlockID.ex_dirtEarth, 0) : right ? this.setTileEntity(x - 1, y, z, BlockID.ex_dirtEarth, 0) : behind ? this.setTileEntity(x, y, z - 1, BlockID.ex_dirtEarth, 0) : bottom ? this.setTileEntity(x, y - 1, z, BlockID.ex_dirtEarth, 0) : null;
        }
        if (light(x, y + 1, z) >= 8) {
            this.data.jin++;
            if (this.data.jin > 10) {
                this.blockSource.setBlock(x, y, z, 3, 0);
                if (Math.random() * 100 < 55) {
                    this.blockSource.setBlock(x, y + 1, z, 51, 0);
                }
            };
            if (World.getThreadTime() % 6 == 0) {
                try {
                    var all = EntityDataRegistry.getAllData();
                    for (var i in all) {
                        if (!ENT[Entity.getType(parseInt(i))] && Entity.getDistanceToCoords(parseInt(i), {
                            x: this.x,
                            y: this.y + 1,
                            z: this.z
                        }) < 1) {
                            Entity.damageEntity(parseInt(i), 13);
                        }
                    }
                }
                catch (e) { }
            };
        }
        if (World.getThreadTime() % 670 == 20 && Object.keys(this.data.entity)
            .length < config.EntityMax && light(x, y + 1, z) <= 6) {
            for (var i = 0; i < mob.length; i++) {
                if (Math.random() * 100 < mob[i].chance) {
                    Entity.spawn(x, y + 1.5, z, mob[i].id);
                    this.data.entity = {};
                }
            }
        }
        else if (Object.keys(this.data.entity)
            .length > config.EntityMax) {
            this.data.entity = {};
        };
        if (World.getThreadTime() % 12 == 0) {
            try {
                All = EntityDataRegistry.getAllData();
                for (var i in All) {
                    if (animal[Entity.getType(parseInt(i))]) {
                        if (Entity.getDistanceToCoords(parseInt(i), {
                            x: this.x,
                            y: this.y + 1,
                            z: this.z
                        }) < 1) {
                            Commands.exec("summon lightning_bolt" + " " + this.x + " " + this.y + " " + this.z);
                            return;
                        }
                    }
                }
            }
            catch (e) { }
        }
    }
});
IDRegistry.genBlockID("ex_chorusSprout");
Block.createBlock("ex_chorusSprout", [{ name: "Chorus Sprout", texture: [["enr_chorusSprout", 0]], inCreative: false }, { name: "Chorus Sprout", texture: [["enr_chorusSprout", 1]], inCreative: false }, { name: "Chorus Sprout", texture: [["enr_chorusSprout", 2]], inCreative: false }, { name: "Chorus Sprout", texture: [["enr_chorusSprout", 3]], inCreative: false }], { base: VanillaBlockID.leaves, sound: "grass", destroytime: 0.15 });
ToolAPI.registerBlockMaterial(BlockID.ex_chorusSprout, "plant");
for (i = 0; i < 4; i++) {
EMRenderTool.createModel({
    type: "static",
    disableCollision: false,
    blockID: BlockID.ex_chorusSprout,
    blockData: i,
    onCreate: function (emRender) {
        emRender.addBoxesWithArrayById(this.blockID, this.blockData, {
            "1": [0.2499, 0.01, 0, 0.25, 0.99, 1],
            "2": [0, 0.01, 0.2499, 1, 0.99, 0.252],
            "3": [0.7499, 0.01, 0, 0.75, 0.99, 1],
            "4": [0, 0.01, 0.7499, 1, 0.99, 0.75]
        }, "create");
    }
});
}
Block.setRandomTickCallback(BlockID.ex_chorusSprout, function (x, y, z, id, data, blockSource) {
    if (data < 3)
        blockSource.setBlock(x, y, z, BlockID.ex_chorusSprout, ++data);
});
Block.registerDropFunctionForID(BlockID.ex_chorusSprout, function (id, data) {
    if (data < 3) {
        return [[ItemID.ex_seedsChorus, 1, 0]];
    }
    else {
        var count = Math.round() * 100 < 20 ? 1 : 2;
        return [[432, count, 0]];
    }
});
EvaporatingDish.addRecipe("water", BlockID.ex_saltcoarse, "ex_coarsesalt");
EvaporatingDish.addDish("ex_evaporatingdish_oak", "Oak Evaporating dish", "planks_oak", "wood");
EvaporatingDish.addDish("ex_evaporatingdish_birch", "Birch Evaporating dish", "planks_birch", "wood");
EvaporatingDish.addDish("ex_evaporatingdish_acacia", "Acacia Evaporating dish", "planks_acacia", "wood");
EvaporatingDish.addDish("ex_evaporatingdish_big_oak", "Big Oak Evaporating dish", "planks_big_oak", "wood");
EvaporatingDish.addDish("ex_evaporatingdish_jungle", "Jungle Evaporating dish", "planks_jungle", "wood");
EvaporatingDish.addDish("ex_evaporatingdish_spruce", "Spruce Evaporating dish", "planks_spruce", "wood");
Barrel.modelset({
    "VanillaBlockID.dirt": { texture: [["dirt", 0]] },
    "VanillaBlockID.end_stone": { texture: [["end_stone", 0]] },
    "VanillaBlockID.obsidian": { texture: [["obsidian", 0]] },
    "VanillaBlockID.netherrack": { texture: [["netherrack", 0]] },
    "VanillaBlockID.clay": { texture: [["clay", 0]] },
    "VanillaBlockID.ice": { texture: [["ice", 0]] },
    "VanillaBlockID.soul_sand": { texture: [["soul_sand", 0]] },
    "VanillaItemID.slime_ball": { texture: [["ex_slime", 0]] }
});
Barrel.modeladd(BlockID.ex_beeTrapTreated, { texture: [["ex_ScentedArtificialHive", 0]] });
Barrel.modeladd(BlockID.ex_beeTrap, { texture: [["ex_ArtificialHive", 0]] });
Barrel.dataSet("water", {});
Barrel.dataSet("seedOil", {});
Barrel.dataSet("waterwitch", {
    "VanillaBlockID.sand:0": { output: VanillaBlockID.soul_sand }
});
Barrel.dataSet("waterslime", {});
Barrel.dataAdd("water", BlockID.ex_dust, 0, { output: VanillaBlockID.clay });
Barrel.dataAdd("seedOil", BlockID.ex_beeTrap, 0, { output: BlockID.ex_beeTrapTreated });
Barrel.dataSet("lava", {
    "VanillaItemID.glowstone_dust:0": { output: VanillaBlockID.end_stone },
    "VanillaItemID.redstone:0": { output: VanillaBlockID.netherrack }
});
Barrel.dataSet("null", {
    "VanillaBlockID.sapling:0": { volume: 125, texture: [["ex_1", 0]] },
    "VanillaBlockID.sapling:1": { volume: 125, texture: [["ex_1", 0]] },
    "VanillaBlockID.sapling:2": { volume: 125, texture: [["ex_1", 0]] },
    "VanillaBlockID.sapling:3": { volume: 125, texture: [["ex_1", 0]] },
    "VanillaBlockID.sapling:4": { volume: 125, texture: [["ex_1", 0]] },
    "VanillaBlockID.sapling:5": { volume: 125, texture: [["ex_1", 0]] },
    "VanillaBlockID.leaves:0": { volume: 125, texture: [["ex_1", 0]] },
    "VanillaBlockID.leaves:1": { volume: 125, texture: [["ex_1", 0]] },
    "VanillaBlockID.leaves:2": { volume: 125, texture: [["ex_1", 0]] },
    "VanillaBlockID.leaves:3": { volume: 125, texture: [["ex_1", 0]] },
    "VanillaBlockID.leaves2:0": { volume: 125, texture: [["ex_1", 0]] },
    "VanillaBlockID.leaves2:1": { volume: 125, texture: [["ex_1", 0]] },
    "VanillaItemID.rotten_flesh:0": { volume: 100, texture: [["ex_2", 0]] },
    "VanillaItemID.spider_eye:0": { volume: 160, texture: [["ex_3", 0]] },
    "VanillaItemID.yellow_flower:0": { volume: 100, texture: [["ex_14", 0]] },
    "VanillaBlockID.red_flower:0": { volume: 100, texture: [["ex_5", 0]] },
    "VanillaBlockID.red_flower:1": { volume: 100, texture: [["ex_6", 0]] },
    "VanillaBlockID.red_flower:2": { volume: 100, texture: [["ex_4", 0]] },
    "VanillaBlockID.red_flower:3": { volume: 100, texture: [["ex_7", 0]] },
    "VanillaBlockID.red_flower:4": { volume: 100, texture: [["ex_9", 0]] },
    "VanillaBlockID.red_flower:5": { volume: 100, texture: [["ex_9", 0]] },
    "VanillaBlockID.red_flower:6": { volume: 100, texture: [["ex_0", 0]] },
    "VanillaBlockID.red_flower:7": { volume: 100, texture: [["ex_10", 0]] },
    "VanillaBlockID.red_flower:8": { volume: 100, texture: [["ex_7", 0]] },
    "VanillaBlockID.double_plant:0": { volume: 125, texture: [["ex_14", 0]] },
    "VanillaBlockID.double_plant:1": { volume: 125, texture: [["ex_4", 0]] },
    "VanillaBlockID.double_plant:2": { volume: 125, texture: [["ex_1", 0]] },
    "VanillaBlockID.double_plant:3": { volume: 125, texture: [["ex_1", 0]] },
    "VanillaBlockID.double_plant:4": { volume: 125, texture: [["ex_8", 0]] },
    "VanillaBlockID.double_plant:5": { volume: 125, texture: [["ex_10", 0]] },
    "VanillaBlockID.brown_mushroom:0": { volume: 125, texture: [["ex_11", 0]] },
    "VanillaBlockID.red_mushroom:0": { volume: 125, texture: [["ex_12", 0]] },
    "VanillaItemID.wheat:0": { volume: 160, texture: [["ex_13", 0]] },
    "VanillaItemID.pumpkin_pie:0": { volume: 160, texture: [["ex_2", 0]] },
    "VanillaItemID.egg:0": { volume: 80, texture: [["ex_13", 0]] },
    "VanillaItemID.porkchop:0": { volume: 200, texture: [["ex_15", 0]] },
    "VanillaItemID.beef:0": { volume: 200, texture: [["ex_8", 0]] },
    "VanillaItemID.cooked_beef:0": { volume: 200, texture: [["ex_16", 0]] },
    "VanillaItemID.chicken:0": { volume: 200, texture: [["ex_12", 0]] },
    "VanillaItemID.cooked_chicken:0": { volume: 200, texture: [["ex_2", 0]] },
    "VanillaItemID.fish:0": { volume: 150, texture: [["ex_17", 0]] },
    "VanillaItemID.cooked_fish:0": { volume: 150, texture: [["ex_18", 0]] },
    "VanillaItemID.apple:0": { volume: 180, texture: [["ex_8", 0]] },
    "VanillaItemID.golden_apple:0": { volume: 180, texture: [["ex_14", 0]] },
    "VanillaItemID.melon:0": { volume: 40, texture: [["ex_8", 0]] },
    "VanillaBlockID.melon_block:0": { volume: 166.7, texture: [["ex_8", 0]] },
    "VanillaBlockID.pumpkin:0": { volume: 166.7, texture: [["ex_13", 0]] },
    "VanillaBlockID.cactus:0": { volume: 166.7, texture: [["ex_19", 0]] },
    "VanillaItemID.carrot:0": { volume: 80, texture: [["ex_9", 0]] },
    "VanillaItemID.potato:0": { volume: 160, texture: [["ex_13", 0]] },
    "VanillaItemID.baked_potato:0": { volume: 160, texture: [["ex_13", 0]] },
    "VanillaItemID.poisonous_potato:0": { volume: 160, texture: [["ex_19", 0]] },
    "VanillaBlockID.waterlily:0": { volume: 100, texture: [["ex_1", 0]] },
    "VanillaBlockID.vine:0": { volume: 100, texture: [["ex_1", 0]] },
    "VanillaItemID.salmon:0": { volume: 150, texture: [["ex_5", 0]] },
    "VanillaItemID.cooked_salmon:0": { volume: 150, texture: [["ex_2", 0]] },
    "VanillaItemID.clownfish:0": { volume: 150, texture: [["ex_9", 0]] },
    "VanillaItemID.pufferfish:0": { volume: 150, texture: [["ex_20", 0]] },
    "VanillaItemID.muttonraw:0": { volume: 200, texture: [["ex_8", 0]] },
    "VanillaItemID.muttoncooked:0": { volume: 200, texture: [["ex_16", 0]] },
    "VanillaItemID.rabbit:0": { volume: 200, texture: [["ex_12", 0]] },
    "VanillaItemID.cooked_rabbit:0": { volume: 200, texture: [["ex_2", 0]] },
    "VanillaItemID.string:0": { volume: 30, texture: [["ex_0", 0]] },
    "VanillaItemID.ghast_tear:0": { volume: 160, texture: [["ex_0", 0]] },
    "VanillaItemID.nether_wart:0": { volume: 100, texture: [["ex_5", 0]] },
    "VanillaItemID.reeds:0": { volume: 100, texture: [["ex_19", 0]] }
});
Barrel.dataAdd("null", ItemID.ex_dustSaw, 0, { volume: 125, texture: [["ex_13", 0]] });
Barrel.dataAdd("null", -163, 0, { volume: 125, texture: [["ex_19", 0]] });
Barrel.dataAdd("null", -156, 0, { volume: 160, texture: [["ex_13", 0]] });
Barrel.dataAdd("null", 335, 0, { volume: 125, texture: [["ex_1", 0]] });
Barrel.dataAdd("null", ItemID.ex_silkWorm, 0, { volume: 40, texture: [["ex_7", 0]] });
Barrel.dataAdd("null", ItemID.ex_cookedSilkWorm, 0, { volume: 40, texture: [["ex_16", 0]] });
Barrel.add("ex_barrelStone", "Stone Barrel", "stone", "stone");
//planks update
Barrel.add("ex_barrelOak", "Oak Barrel", "planks_oak", "wood");
Barrel.add("ex_barrelBirch", "Birch Barrel", "planks_birch", "wood");
Barrel.add("ex_barrelAcacia", "Acacia Barrel", "planks_acacia", "wood");
Barrel.add("ex_barrelBigOak", "Big Oak Barrel", "planks_big_oak", "wood");
Barrel.add("ex_barrelJungle", "Jungle Barrel", "planks_jungle", "wood");
Barrel.add("ex_barrelSpruce", "Spruce Barrel", "planks_spruce", "wood");
//glass update
Barrel.add("ex_barrel_glass_black", "Black Glass Barrel", "glass_black", "glass");
Barrel.add("ex_barrel_glass_blue", "Blue Glass Barrel", "glass_blue", "glass");
Barrel.add("ex_barrel_glass_brown", "Brown Glass Barrel", "glass_brown", "glass");
Barrel.add("ex_barrel_glass_cyan", "Cyan Glass Barrel", "glass_cyan", "glass");
Barrel.add("ex_barrel_glass_gray", "Gray Glass Barrel", "glass_gray", "glass");
Barrel.add("ex_barrel_glass_green", "Green Glass Barrel", "glass_green", "glass");
Barrel.add("ex_barrel_glass_light_blue", "Light blue Glass Barrel", "glass_light_blue", "glass");
Barrel.add("ex_barrel_glass_lime", "Lime Glass Barrel", "glass_lime", "glass");
Barrel.add("ex_barrel_glass_magenta", "Magenta Glass Barrel", "glass_magenta", "glass");
Barrel.add("ex_barrel_glass_orange", "Orange Glass Barrel", "glass_orange", "glass");
Barrel.add("ex_barrel_glass_pink", "Pink Glass Barrel", "glass_pink", "glass");
Barrel.add("ex_barrel_glass_purple", "Purple Glass Barrel", "glass_purple", "glass");
Barrel.add("ex_barrel_glass_red", "Red Glass Barrel", "glass_red", "glass");
Barrel.add("ex_barrel_glass_silver", "Silver Glass Barrel", "glass_silver", "glass");
Barrel.add("ex_barrel_glass_white", "White Glass Barrel", "glass_white", "glass");
Barrel.add("ex_barrel_glass_yellow", "Yellow Glass Barrel", "glass_yellow", "glass");
var Crucible;
(function (Crucible) {
    IDRegistry.genBlockID("ex_crucibleRaw");
    Block.createBlock("ex_crucibleRaw", [{ name: "Raw Crucible", texture: [["enr_uncrucible", 0], ["enr_uncrucible", 2], ["enr_uncrucible", 1]], inCreative: true }]);
    IDRegistry.genBlockID("ex_crucible");
    Block.createBlock("ex_crucible", [{ name: "Crucible", texture: [["enr_crucible", 0], ["enr_crucible", 2], ["enr_crucible", 1]], inCreative: true }]);
    ToolAPI.registerBlockMaterial(BlockID.ex_crucible, "stone");
    ToolAPI.registerBlockMaterial(BlockID.ex_crucibleRaw, "stone");
    Block.registerNeighbourChangeFunction(BlockID.ex_crucible, function (coords, block, changedCoords, blockSource) {
        if (changedCoords.y < coords.y) {
            var block_1 = blockSource.getBlockId(changedCoords.x, changedCoords.y, changedCoords.z);
            var heatSource = Crucible.dataGet("energy", block_1, 0);
            if (!heatSource)
                return;
            World.getTileEntity(coords.x, coords.y, coords.z, blockSource).data.energy = heatSource.energy;
        }
    });
    World.setBlockChangeCallbackEnabled(BlockID.ex_crucible, true);
    function CrucibleBoxFunc(ydata1, ydata2, data1, x, y, z, dim) {
        if (ydata2 < 0.0005)
            return; //用于限制精度丢失之后产生的小数影响动画。
        var emRender = EMRenderTool.updateBox(BlockID.ex_crucible, 0);
        emRender.addModelBox(c1, ydata1, c1, c15, ydata2, c15, [[data1, 0]]);
        emRender.addCollisionBox(c1, ydata1, c1, c15, ydata2, c15);
        emRender.addFullModel();
        BlockRenderer.mapAtCoords(x, y, z, emRender.icRender);
        BlockRenderer.mapCollisionModelAtCoords(dim, x, y, z, emRender.icCollision);
        emRender = null;
    }
    var crucibleUI = new UI.StandartWindow({
        standart: {
            header: { text: { text: "Crusher" } },
            inventory: true,
            background: true
        },
        elements: {
            slotInPut: { type: "slot", x: 600, y: 146 },
            slot3: { type: "slot", x: 670 + 70, y: 146 }
        }
    });
    ExTileEntity.register(BlockID.ex_crucible);
    var tileEntity = ExTileEntity.get(BlockID.ex_crucible);
    StorageInterface.createInterface(BlockID.ex_crucible, {
        slots: {
            "slotInPut": {
                input: true
            },
        },
        isValidInput: function (item, side, tileEntity) {
            return tileEntity.canInPut(item);
        }
    });
    tileEntity.useNetworkItemContainer = true;
    tileEntity.defaultValues = { worktime: 0, energy: 0, liquiddata: [0, 0, 0], amount: 0, blocktexture: "air" };
    tileEntity.client = {};
    tileEntity.cruciblebox = function (ydata1, ydata2, data1) {
        this.networkData.putFloat("ydata1", ydata1);
        this.networkData.putFloat("ydata2", ydata2);
        this.networkData.putString("data1", data1);
        this.networkData.sendChanges();
    };
    tileEntity.client.renderModel = function () {
        var ydata1 = this.networkData.getFloat("ydata1");
        var ydata2 = this.networkData.getFloat("ydata2");
        var data1 = this.networkData.getString("data1");
        data1 && CrucibleBoxFunc(ydata1, ydata2, data1, this.x, this.y, this.z, this.dimension);
    };
    tileEntity.client.load = function () {
        this.renderModel();
        var self = this;
        this.networkData.addOnDataChangedListener(function (data, isExternal) {
            self.renderModel();
        });
    };
    tileEntity.init = function () {
        var stored = this.liquidStorage.getLiquidStored();
        var amount = this.liquidStorage.getAmount(stored);
        var block = this.blockSource.getBlockId(this.x, this.y - 1, this.z);
        var heatSource = Crucible.dataGet("energy", block, 0);
        if (!heatSource)
            return;
        this.data.energy = heatSource.energy;
        this.liquidStorage.setLimit("", 10);
        if (!this.data.liquiddata)
            return;
        this.show();
    };
    tileEntity.getScreenName = function (player, coords) {
        var item = Entity.getCarriedItem(player);
        if (item.id == ItemID.ex_crookwriter) {
            return "crucibleUI";
        }
    };
    tileEntity.destroy = function () {
        BlockRenderer.unmapAtCoords(this.x, this.y, this.z);
        BlockRenderer.unmapCollisionModelAtCoords(this.dimension, this.x, this.y, this.z);
        this.slot("slotInPut").setSlot(0, 0, 0);
    };
    tileEntity.show = function () {
        var stored = this.liquidStorage.getLiquidStored();
        var amount = this.liquidStorage.getAmount(stored);
        if (this.data.worktime > 0 || amount > 0) {
            if (this.data.worktime > amount * 1000) {
                this.cruciblebox(c4, c4 + c12 * this.data.worktime / 10000, this.data.blocktexture);
            }
            else {
                this.cruciblebox(c4, c4 + c12 * amount / 10, this.data.liquiddata[0]);
            } //石头体积大于岩浆的时候显示石头反之岩浆。
            //显示原理是将坩埚底至顶部12/16(即c12)像素高度分成10000份，每tick按实际情更新
        }
        /*
            c12
            ￣￣￣ × this.data.worktime 液体显示以此类推。
            10000
            */
        if (this.data.worktime + amount * 1000 == 0) {
            BlockRenderer.unmapAtCoords(this.x, this.y, this.z);
        }
    };
    tileEntity.canInPut = function (item) {
        var stored = this.liquidStorage.getLiquidStored();
        var amount = this.liquidStorage.getAmount(stored);
        if (this.data.worktime <= 7500 && this.data.worktime / 10000 + amount < 10 && Crucible.dataGet("crucible", item.id, item.data)) {
            return true;
        }
    };
    tileEntity.slot = function (name) {
        return this.container.getSlot(name);
    };
    tileEntity.getLiquid = function (full, amount, id, data, count, player) {
        Game.prevent();
        if (amount < 1)
            return;
        this.liquidStorage.getLiquid("lava", 1);
        if (count >= 1) {
            new PlayerEntity(player).setCarriedItem(id, count - 1, data);
            new PlayerEntity(player).addItemToInventory(full.id, 1, full.data);
            return true;
        }
        else {
            new PlayerEntity(player)
                .setCarriedItem(full.id, 1, full.data);
            return true;
        }
    };
    tileEntity.click = function (id, count, data, coords, player) {
        var amount = this.liquidStorage.getAmount("lava");
        var get = Crucible.dataGet("crucible", id, data);
        var lavafull = LiquidRegistry.getFullItem(id, data, "lava");
        if (this.data.worktime <= 7500 && this.data.worktime / 10000 + amount < 10) {
            if (get) {
                new PlayerEntity(player).setCarriedItem(id, count - 1, data);
                this.slot("slotInPut").setSlot(id, this.slot("slotInPut").count++, data);
                Game.prevent();
            }
        }
        id == ItemID.ex_crookwriter && Debug.message("LAVA:" + amount);
        lavafull && this.getLiquid(lavafull, amount, id, data, count, player);
    };
    tileEntity.tick = function () {
        var stored = this.liquidStorage.getLiquidStored();
        var amount = this.liquidStorage.getAmount(stored);
        var get = Crucible.dataGet("crucible", this.slot("slotInPut").id, this.slot("slotInPut").data);
        StorageInterface.checkHoppers(this);
        if (get) {
            this.slot("slotInPut").setSlot(0, this.slot("slotInPut").count--, 0);
            this.data.liquiddata = get.liquiddata;
            this.data.worktime += get.addworktime;
            this.data.blocktexture = get.blocktexture;
        }
        if (amount < this.liquidStorage.getLimit(this.data.liquiddata[0]) && this.data.worktime > 0 && this.data.energy > 0) {
            this.data.amount = plus(amount, times(this.data.liquiddata[2], this.data.energy));
            this.liquidStorage.setAmount(this.data.liquiddata[1], this.data.amount);
            this.data.worktime -= this.data.energy;
        }
        this.show();
    };
    EMRenderTool.createModel({
        type: "coord",
        disableCollision: false,
        blockID: BlockID.ex_crucible,
        onCreate: function (emRender) {
            emRender.addBoxesWithArrayById(this.blockID, 0, {
                "1": [c0, c3, c0, c1, c16, c16],
                "2": [c15, c3, c0, c16, c16, c16],
                "3": [c1, c3, c0, c15, c16, c1],
                "4": [c1, c3, c15, c15, c16, c16],
                "5": [c0, c0, c0, c1, c3, c1],
                "6": [c0, c0, c15, c1, c3, c16],
                "7": [c1, c2, c1, c15, c3, c15],
                "8": [c15, c0, c0, c16, c3, c1],
                "9": [c15, c0, c15, c16, c3, c16],
                "10": [c2, c1, c2, c14, c2, c14],
                "11": [c1, c2, c1, c15, c3, c15]
            }, "create");
        }
    });
    EMRenderTool.createModel({
        type: "coord",
        disableCollision: false,
        blockID: BlockID.ex_crucibleRaw,
        onCreate: function (emRender) {
            emRender.addBoxesWithArrayById(this.blockID, 0, {
                "1": [c0, c3, c0, c1, c16, c16],
                "2": [c15, c3, c0, c16, c16, c16],
                "3": [c1, c3, c0, c15, c16, c1],
                "4": [c1, c3, c15, c15, c16, c16],
                "5": [c0, c0, c0, c1, c3, c1],
                "6": [c0, c0, c15, c1, c3, c16],
                "7": [c1, c2, c1, c15, c3, c15],
                "8": [c15, c0, c0, c16, c3, c1],
                "9": [c15, c0, c15, c16, c3, c16],
                "10": [c2, c1, c2, c14, c2, c14],
                "11": [c1, c2, c1, c15, c3, c15]
            }, "create");
        }
    });
})(Crucible || (Crucible = {}));
Crucible.dataSet("crucible", {
    "1:0": { addworktime: 2500, blocktexture: "stone", liquiddata: ["ex_lava", "lava", "0.0001"] },
    "4:0": { addworktime: 2500, blocktexture: "cobblestone", liquiddata: ["ex_lava", "lava", "0.0001"] },
    "13:0": { addworktime: 2500, blocktexture: "gravel", liquiddata: ["ex_lava", "lava", "0.0001"] }
});
Crucible.dataSet("energy", {
    "0:0": { energy: 0 },
    "10:0": { energy: 3 },
    "11:0": { energy: 2.5 },
    "50:0": { energy: 1 },
    "51:0": { energy: 1.5 }
});
IDRegistry.genBlockID("ex_furnacehalf");
Block.createBlock("ex_furnacehalf", [{
        name: "Furnace Half",
        texture: [
            ["ex_furnace_top", 0],
            ["ex_furnace_top", 0],
            ["ex_furnace_side", 1],
            ["ex_furnace_front_off", 1],
            ["ex_furnace_side", 1],
            ["ex_furnace_side", 1]
        ],
        inCreative: true
    }], {
    sound: "stone"
});
Block.setShape(BlockID.ex_furnacehalf, 0, 0, 0, 1, 0.5, 1, -1);
ToolAPI.registerBlockMaterial(BlockID["ex_furnacehalf"], "stone");
TileRender_private.setSlabModel(BlockID.ex_furnacehalf, [
    ["ex_furnace_top", 0],
    ["ex_furnace_top", 0],
    ["ex_furnace_side", 0],
    ["ex_furnace_front_off", 1],
    ["ex_furnace_side", 0],
    ["ex_furnace_side", 0]
]);
TileRender_private.registerSlabRotationModel(BlockID.ex_furnacehalf, 0, [
    ["ex_furnace_top", 0],
    ["ex_furnace_top", 0],
    ["ex_furnace_side", 1],
    ["ex_furnace_front_off", 1],
    ["ex_furnace_side", 1],
    ["ex_furnace_side", 1]
]);
TileRender_private.registerSlabRotationModel(BlockID.ex_furnacehalf, 4, [
    ["ex_furnace_top", 0],
    ["ex_furnace_top", 0],
    ["ex_furnace_side", 1],
    ["ex_furnace_front_on", 1],
    ["ex_furnace_side", 1],
    ["ex_furnace_side", 1]
]);
//TileRender_private.setRotationPlaceFunction(BlockID.ex_furnacehalf);
(function () {
    var FurnaceGui = new UI.StandartWindow({
        standart: {
            header: {
                text: {
                    text: Translation.translate("Furnace Half")
                }
            },
            inventory: {
                standart: true
            },
            background: {
                standart: true
            }
        },
        drawing: [{
                type: "bitmap",
                x: 480,
                y: 180,
                bitmap: "arrow_0",
                scale: 3
            }, {
                type: "bitmap",
                x: 400,
                y: 180,
                bitmap: "fire_0",
                scale: 4
            }],
        elements: {
            "fireScale": {
                type: "scale",
                x: 400,
                y: 180,
                direction: 1,
                value: 0.5,
                bitmap: "fire_1",
                scale: 4
            },
            "arrowScale": {
                type: "scale",
                x: 480,
                y: 180,
                direction: 0,
                value: 0.5,
                bitmap: "arrow_1",
                scale: 3
            },
            "desert": {
                type: "slot",
                x: 400,
                y: 100,
                size: 60
            },
            "result": {
                type: "slot",
                x: 560,
                y: 170,
                size: 60
            },
            "fuel": {
                type: "slot",
                x: 400,
                y: 240,
                size: 60
            }
        }
    });
    TileEntity.registerPrototype(BlockID.ex_furnacehalf, {
        useNetworkItemContainer: true,
        defaultValues: {
            isActive: false,
            burn: 0,
            burnMax: 200,
            make: 0,
            meta: 0,
            isCreate: false
        },
        getFacing: function () {
            return this.data.meta + 4;
        },
        init: function () {
            //this.blockSource.setBlock(this.x, this.y, this.z, this.blockID, this.data.meta + 4);
            this.networkData.putInt("blockId", this.blockID);
            this.networkData.putInt("meta", this.data.meta);
            this.networkData.putInt("blockData", this.getFacing());
            this.container.setSlotAddTransferPolicy("desert", function (container, name, id, count, data, extra, player) {
                if (Recipes.getFurnaceRecipeResult(id, data)) {
                    return count;
                }
                else {
                    return 0;
                }
            });
            this.container.setSlotAddTransferPolicy("fuel", function (container, name, id, count, data) {
                if (Recipes.getFuelBurnDuration(id, data) > 0) {
                    return count;
                }
                else {
                    return 0;
                }
            });
            this.container.setSlotAddTransferPolicy("result", function () {
                return 0;
            });
            this.networkData.sendChanges();
        },
        client: {
            renderModel: function () {
                if (this.networkData.getBoolean("isActive")) {
                    var blockId = Network.serverToLocalId(this.networkData.getInt("blockId"));
                    var blockData = this.networkData.getInt("blockData");
                    TileRender_private.mapAtCoords(this.x, this.y, this.z, blockId, blockData);
                }
                if (!this.networkData.getBoolean("isActive")) {
                    var blockId = Network.serverToLocalId(this.networkData.getInt("blockId"));
                    var meta = this.networkData.getInt("meta");
                    TileRender_private.mapAtCoords(this.x, this.y, this.z, blockId, meta);
                }
            },
            load: function () {
                this.renderModel();
                var self = this;
                this.networkData.addOnDataChangedListener(function (data, isExternal) {
                    self.renderModel();
                });
            }
        },
        getFuel: function (Name) {
            var fuelSlot = this.container.getSlot(Name);
            var fuel = Recipes.getFuelBurnDuration(fuelSlot.id, fuelSlot.data);
            if (fuelSlot.id == 325 && fuelSlot.data == 10) {
                this.container.setSlot(Name, fuelSlot.id, 1, 0);
            }
            else if (fuel > 0) {
                this.container.setSlot(Name, fuelSlot.id, fuelSlot.count - 1, 0);
                this.container.validateSlot(Name);
            }
            return this.data.burnMax = this.data.burn = fuel;
        },
        tick: function () {
            var desert = this.container.getSlot("desert");
            var resultSlot = this.container.getSlot("result");
            var fuelSlot = this.container.getSlot("fuel");
            var result = Recipes.getFurnaceRecipeResult(desert.id, desert.data);
            if (result && ((resultSlot.id == result.id && resultSlot.data == result.data) || resultSlot.id == 0)) {
                if (this.data.burn > 0) {
                    this.data.isCreate = true;
                    this.data.make += 1;
                }
                else if (fuelSlot.id > 0) {
                    this.getFuel("fuel");
                }
                else {
                    this.data.make = 0;
                    this.data.isCreate = false;
                }
                if (this.data.make == 300) {
                    resultSlot.setSlot(result.id, resultSlot.count + 1, result.data);
                    desert.setSlot(desert.id, desert.count - 1, desert.data);
                    this.container.validateSlot("desert");
                    this.data.make = 0;
                    this.data.isCreate = false;
                }
            }
            if (this.data.burn > 0) {
                this.data.burn -= 1;
            }
            if (desert.id == 0) {
                this.data.isCreate = false;
            }
            if (!this.data.isCreate) {
                this.data.make = 0;
            }
            if (this.data.burn <= 0 && !this.data.isCreate) {
                this.data.burn = this.data.make = 0;
                this.data.burnMax = 200;
                result = null;
            }
            this.setActive(this.data.burn > 0);
            this.container.setScale("arrowScale", this.data.make / 300);
            this.container.setScale("fireScale", this.data.burn / this.data.burnMax);
            this.container.sendChanges();
        },
        click: function (id, count, data, coords, player) {
            if (Entity.getSneaking(player)) {
                //  this.blockSource.setBlock(this.x, this.y, this.z, BlockID.ex_furnace, 0);
            }
        },
        getScreenByName: function (screenName) {
            return FurnaceGui;
        },
        getScreenName: function (screenName) {
            return "FurnaceGui";
        },
        setActive: function (isActive) {
            if (this.networkData.getBoolean("isActive") != isActive) {
                this.networkData.putBoolean("isActive", isActive);
                this.networkData.sendChanges();
            }
        }
    });
})();
IDRegistry.genBlockID("ex_furnace");
Block.createBlock("ex_furnace", [{
        name: "Furnace",
        texture: [
            ["ex_furnace_top", 0],
            ["ex_furnace_top", 0],
            ["ex_furnace_side", 0],
            ["ex_furnace_front_off", 0],
            ["ex_furnace_side", 0],
            ["ex_furnace_side", 0]
        ],
        inCreative: false
    }], {
    sound: "stone"
});
ToolAPI.registerBlockMaterial(BlockID["ex_furnace"], "stone");
TileRender_private.setStandartModel(BlockID.ex_furnace, [
    ["ex_furnace_top", 0],
    ["ex_furnace_top", 0],
    ["ex_furnace_side", 0],
    ["ex_furnace_front_off", 0],
    ["ex_furnace_side", 0],
    ["ex_furnace_side", 0]
]);
TileRender_private.registerRotationModel(BlockID.ex_furnace, 0, [
    ["ex_furnace_top", 0],
    ["ex_furnace_top", 0],
    ["ex_furnace_side", 0],
    ["ex_furnace_front_off", 0],
    ["ex_furnace_side", 0],
    ["ex_furnace_side", 0]
]);
TileRender_private.registerRotationModel(BlockID.ex_furnace, 4, [
    ["ex_furnace_top", 0],
    ["ex_furnace_top", 0],
    ["ex_furnace_side", 0],
    ["ex_furnace_front_on", 0],
    ["ex_furnace_side", 0],
    ["ex_furnace_side", 0]
]);
Block.registerPlaceFunction(BlockID.ex_furnace0, function (coords, item, block, player, region) {
    if (region.getBlockId(coords.x, coords.y, coords.z) == BlockID.ex_furnace0 && Entity.getSneaking(player)) {
        var tile = TileEntity.getTileEntity(coords.x, coords.y, coords.z, region);
        var desert = tile.container.getSlot("desert");
        var result = tile.container.getSlot("result");
        var fuel = tile.container.getSlot("fuel");
        var data = tile.data;
        var desertSlot = {
            id: desert.id,
            count: desert.count,
            data: desert.data,
            extra: desert.extra
        };
        var resultSlot = {
            id: result.id,
            count: result.count,
            data: result.data,
            extra: result.extra
        };
        var fuelSlot = {
            id: fuel.id,
            count: fuel.count,
            data: fuel.data,
            extra: fuel.extra
        };
        desert.setSlot(0, 0, 0);
        result.setSlot(0, 0, 0);
        fuel.setSlot(0, 0, 0);
        BlockRenderer.unmapAtCoords(coords.x, coords.y, coords.z);
        TileEntity.destroyTileEntity(tile);
        region.setBlock(coords.x, coords.y, coords.z, BlockID.ex_furnace, 0);
        var newtile = TileEntity.addTileEntity(coords.x, coords.y, coords.z);
        newtile.container.getSlot("desert").setSlot(desertSlot.id, desertSlot.count, desertSlot.data);
        newtile.container.getSlot("result").setSlot(resultSlot.id, resultSlot.count, resultSlot.data);
        newtile.container.getSlot("fuel").setSlot(fuelSlot.id, fuelSlot.count, fuelSlot.data);
        newtile.data = data;
        World.playSound(coords.x, coords.y, coords.z, "dig.stone", 1, 0.8);
        TileRender_private.mapAtCoords(coords.x, coords.y, coords.z, tile.data.meta);
    }
    else {
        var place = World.canTileBeReplaced(block.id, block.data) ? coords : coords.relative;
        region.setBlock(place.x, place.y, place.z, item.id, 0);
        World.playSound(place.x, place.y, place.z, "dig.stone", 1, 0.8);
        var rotation = TileRender_private.getBlockRotation(player, false);
        var tile = TileEntity.addTileEntity(place.x, place.y, place.z, region);
        tile.data.meta = rotation;
        TileRender_private.mapAtCoords(place.x, place.y, place.z, item.id, rotation);
        return place;
    }
});
(function () {
    var FurnaceGui = new UI.StandartWindow({
        standart: {
            header: {
                text: {
                    text: Translation.translate("Furnace")
                }
            },
            inventory: {
                standart: true
            },
            background: {
                standart: true
            }
        },
        drawing: [{
                type: "bitmap",
                x: 480,
                y: 210,
                bitmap: "arrow_0",
                scale: 3
            },
            {
                type: "bitmap",
                x: 480,
                y: 150,
                bitmap: "arrow_0",
                scale: 3
            }, {
                type: "bitmap",
                x: 400,
                y: 210,
                bitmap: "fire_0",
                scale: 4
            }],
        elements: {
            "fireScale": {
                type: "scale",
                x: 400,
                y: 210,
                direction: 1,
                value: 0.5,
                bitmap: "fire_1",
                scale: 4
            },
            "arrowScale": {
                type: "scale",
                x: 480,
                y: 210,
                direction: 0,
                value: 0.5,
                bitmap: "arrow_1",
                scale: 3
            },
            "arrowScale1": {
                type: "scale",
                x: 480,
                y: 150,
                direction: 0,
                value: 0.5,
                bitmap: "arrow_1",
                scale: 3
            },
            "desert": {
                type: "slot",
                x: 400,
                y: 130,
                size: 60
            },
            "result": {
                type: "slot",
                x: 560,
                y: 200,
                size: 60
            },
            "desert1": {
                type: "slot",
                x: 400,
                y: 70,
                size: 60
            },
            "result1": {
                type: "slot",
                x: 560,
                y: 140,
                size: 60
            },
            "fuel": {
                type: "slot",
                x: 400,
                y: 270,
                size: 60
            }
        }
    });
    TileEntity.registerPrototype(BlockID.ex_furnace, {
        useNetworkItemContainer: true,
        defaultValues: {
            isActive: false,
            burn: 0,
            burnMax: 200,
            make: 0,
            make1: 0,
            meta: 0,
            isCreate: false,
            isCreate1: false
        },
        getFacing: function () {
            return this.data.meta + 4;
        },
        init: function () {
            //this.blockSource.setBlock(this.x, this.y, this.z, this.blockID, this.data.meta + 4);
            this.networkData.putInt("blockId", this.blockID);
            this.networkData.putInt("meta", this.data.meta);
            this.networkData.putInt("blockData", this.getFacing());
            this.container.setSlotAddTransferPolicy("desert", function (container, name, id, count, data, extra, player) {
                if (Recipes.getFurnaceRecipeResult(id, data)) {
                    return count;
                }
                else {
                    return 0;
                }
            });
            this.container.setSlotAddTransferPolicy("fuel", function (container, name, id, count, data) {
                if (Recipes.getFuelBurnDuration(id, data) > 0) {
                    return count;
                }
                else {
                    return 0;
                }
            });
            this.container.setSlotAddTransferPolicy("result", function () {
                return 0;
            });
            this.container.setSlotAddTransferPolicy("desert1", function (container, name, id, count, data, extra, player) {
                if (Recipes.getFurnaceRecipeResult(id, data)) {
                    return count;
                }
                else {
                    return 0;
                }
            });
            this.container.setSlotAddTransferPolicy("result1", function () {
                return 0;
            });
            this.networkData.sendChanges();
        },
        client: {
            renderModel: function () {
                if (this.networkData.getBoolean("isActive")) {
                    var blockId = Network.serverToLocalId(this.networkData.getInt("blockId"));
                    var blockData = this.networkData.getInt("blockData");
                    TileRender_private.mapAtCoords(this.x, this.y, this.z, blockId, blockData);
                }
                if (!this.networkData.getBoolean("isActive")) {
                    var blockId = Network.serverToLocalId(this.networkData.getInt("blockId"));
                    var meta = this.networkData.getInt("meta");
                    TileRender_private.mapAtCoords(this.x, this.y, this.z, blockId, meta);
                }
            },
            load: function () {
                this.renderModel();
                var self = this;
                this.networkData.addOnDataChangedListener(function (data, isExternal) {
                    self.renderModel();
                });
            }
        },
        getFuel: function (Name) {
            var fuelSlot = this.container.getSlot(Name);
            var fuel = Recipes.getFuelBurnDuration(fuelSlot.id, fuelSlot.data);
            if (fuelSlot.id == 325 && fuelSlot.data == 10) {
                this.container.setSlot(Name, fuelSlot.id, 1, 0);
            }
            else if (fuel > 0) {
                this.container.setSlot(Name, fuelSlot.id, fuelSlot.count - 1, 0);
                this.container.validateSlot(Name);
            }
            return this.data.burnMax = this.data.burn = fuel;
        },
        tick: function () {
            var desert = this.container.getSlot("desert");
            var desert1 = this.container.getSlot("desert1");
            var resultSlot = this.container.getSlot("result");
            var resultSlot1 = this.container.getSlot("result1");
            var fuelSlot = this.container.getSlot("fuel");
            var result = Recipes.getFurnaceRecipeResult(desert.id, desert.data);
            var result1 = Recipes.getFurnaceRecipeResult(desert1.id, desert1.data);
            if ((result && ((resultSlot.id == result.id && resultSlot.data == result.data) || resultSlot.id == 0)) || (result1 && ((resultSlot1.id == result1.id && resultSlot1.data == result1.data) || resultSlot1.id == 0))) {
                if (this.data.burn > 0) {
                    this.data.isCreate = true;
                    this.data.isCreate1 = true;
                    this.data.make += 1;
                    this.data.make1 += 1;
                }
                else if (fuelSlot.id > 0) {
                    this.getFuel("fuel");
                }
                else {
                    this.data.make = 0;
                    this.data.make1 = 0;
                    this.data.isCreate = false;
                }
                if (this.data.make == 200) {
                    resultSlot.setSlot(result.id, resultSlot.count + 1, result.data);
                    desert.setSlot(desert.id, desert.count - 1, desert.data);
                    this.container.validateSlot("desert");
                    this.data.make = 0;
                    this.data.isCreate = false;
                }
                if (this.data.make1 == 200) {
                    resultSlot1.setSlot(result1.id, resultSlot1.count + 1, result1.data);
                    desert1.setSlot(desert1.id, desert1.count - 1, desert1.data);
                    this.container.validateSlot("desert1");
                    this.data.make1 = 0;
                    this.data.isCreate1 = false;
                }
            }
            if (this.data.burn > 0) {
                this.data.burn -= 1;
            }
            if (desert.id == 0) {
                this.data.isCreate = false;
            }
            if (desert1.id == 0) {
                this.data.isCreate1 = false;
            }
            if (!this.data.isCreate) {
                this.data.make = 0;
            }
            if (!this.data.isCreate1) {
                this.data.make1 = 0;
            }
            if (this.data.burn <= 0 && !this.data.isCreate && !this.data.isCreate1) {
                this.data.burn = this.data.make = this.data.make1 = 0;
                this.data.burnMax = 200;
                result = null;
            }
            this.setActive(this.data.burn > 0);
            this.container.setScale("arrowScale", this.data.make / 200);
            this.container.setScale("arrowScale1", this.data.make1 / 200);
            this.container.setScale("fireScale", this.data.burn / this.data.burnMax);
            this.container.sendChanges();
        },
        click: function (id, count, data, coords, player) {
        },
        getScreenByName: function (screenName) {
            return FurnaceGui;
        },
        getScreenName: function (screenName) {
            return "FurnaceGui";
        },
        setActive: function (isActive) {
            if (this.networkData.getBoolean("isActive") != isActive) {
                this.networkData.putBoolean("isActive", isActive);
                this.networkData.sendChanges();
            }
        }
    });
})();
var Damage_TYPE_ = Block.createSpecialType({
    sound: "stone"
});
IDRegistry.genBlockID("ex_damage0");
Block.createBlock("ex_damage0", [{
        name: "Damage",
        texture: [
            ["ex_damageSide", 0],
            ["ex_damageSide", 0],
            ["ex_damageSide", 0],
            ["ex_damageFront", 0],
            ["ex_damageSide", 0],
            ["ex_damageSide", 0]
        ],
        inCreative: true
    }, {
        name: "Damage1",
        texture: [
            ["ex_damageSide", 0],
            ["ex_damageSide", 0],
            ["ex_damageFront", 0],
            ["ex_damageSide", 0],
            ["ex_damageSide", 0],
            ["ex_damageSide", 0]
        ],
        inCreative: false
    }, {
        name: "Damage2",
        texture: [
            ["ex_damageSide", 0],
            ["ex_damageSide", 0],
            ["ex_damageSide", 0],
            ["ex_damageSide", 0],
            ["ex_damageFront", 0],
            ["ex_damageSide", 0]
        ],
        inCreative: false
    }, {
        name: "Damage3",
        texture: [
            ["ex_damageSide", 0],
            ["ex_damageSide", 0],
            ["ex_damageSide", 0],
            ["ex_damageSide", 0],
            ["ex_damageSide", 0],
            ["ex_damageFront", 0],
        ],
        inCreative: false
    }], Damage_TYPE_);
//damage z+ 0
//damage1 z- 1
//damage2 x- 2
//damage3 x+ 3
ToolAPI.registerBlockMaterial(BlockID["ex_damage0"], "stone");
Block.registerPlaceFunction("ex_damage0", function (coords, item, block, player, blocksource) {
    if (TileRender_private.getBlockRotation(player, false) == 0) {
        blocksource.setBlock(coords.relative.x, coords.relative.y, coords.relative.z, item.id, 1);
    }
    else if (TileRender_private.getBlockRotation(player, false) == 1) {
        blocksource.setBlock(coords.relative.x, coords.relative.y, coords.relative.z, item.id, 0);
    }
    else if (TileRender_private.getBlockRotation(player, false) == 2) {
        blocksource.setBlock(coords.relative.x, coords.relative.y, coords.relative.z, item.id, 2);
    }
    else if (TileRender_private.getBlockRotation(player, false) == 3) {
        blocksource.setBlock(coords.relative.x, coords.relative.y, coords.relative.z, item.id, 3);
    }
});
Block.registerDropFunctionForID(BlockID["ex_damage0"], function (id, data) {
    return [
        [BlockID["ex_damage0"], 1, 0]
    ];
});
var LIST = {
    "0": true,
    "7": true,
    "8": true,
    "9": true,
    "10": true,
    "11": true,
    "34": true,
    "51": true,
    "90": true,
    "95": true,
    "119": true,
    "120": true,
    "122": true,
    "137": true,
    "188": true,
    "189": true,
    "192": true,
    "199": true,
    "205": true,
    "209": true,
    "217": true,
    "218": true,
    "415": true,
    "416": true,
    "466": true,
    "470": true,
    "472": true,
    "6": true,
    "31": true,
    "32": true,
    "37": true,
    "38": true,
    "39": true,
    "40": true,
    "104": true,
    "105": true,
    "115": true,
    "127": true,
    "141": true,
    "142": true,
    "175": true,
    "244": true,
    "385": true,
    "386": true,
    "387": true,
    "388": true,
    "389": true,
    "390": true,
    "391": true,
    "392": true,
    "462": true,
    "140": true,
};
function checkAlow(ID) {
    if (Config.checkAlow) {
        return LIST[ID] ? false : true;
    }
    else {
        return true;
    };
};
TileEntity.registerPrototype(BlockID.ex_damage0, {
    defaultValues: {
        blockData: 0,
        workTime: 0,
    },
    work: function (x, y, z) {
        this.data.workTime += 1;
        var ST = this.blockSource.getBlock(this.x + x, this.y + y, this.z + z);
        if (this.data.workTime == 50) {
            this.blockSource.destroyBlock(this.x + x, this.y + y, this.z + z, false);
            if (checkAlow(ST.id)) {
                if (ST.id > 255 && ST.id < 8000) {
                    this.blockSource.spawnDroppedItem(this.x + x, this.y + y, this.z + z, 255 - ST.id, 1, ST.data);
                }
                else {
                    this.blockSource.spawnDroppedItem(this.x + x, this.y + y, this.z + z, ST.id, 1, ST.data);
                };
            };
            this.data.workTime = 0;
        };
    },
    checkData: function (blocksource) {
        this.data.blockData = blocksource.getBlockData(this.x, this.y, this.z);
    },
    tick: function () {
        this.checkData(this.blockSource);
        if (this.data.blockData == 0) {
            this.work(0, 0, 1);
        };
        if (this.data.blockData == 1) {
            this.work(0, 0, -1);
        };
        if (this.data.blockData == 2) {
            this.work(-1, 0, 0);
        };
        if (this.data.blockData == 3) {
            this.work(1, 0, 0);
        };
    }
});
ModAPI.addAPICallback("ICore", function (api) {
    IDRegistry.genBlockID("ex_autosieve");
    var modelfunc = function (ydata, texture, x, y, z) {
        var render = new ICRender.Model();
        var model = BlockRenderer.Model();
        model.addBox(0, 0, 0, 1, 1 / 16, 1, [
            ["ex_top", 0]
        ]);
        model.addBox(0, 15 / 16, 0, 1, 1, 1, [
            ["ex_top", 0]
        ]);
        model.addBox(0, 0, 0, 1 / 16, 1, 1 / 16, [
            ["ex_side", 0]
        ]);
        model.addBox(15 / 16, 0, 0, 1, 1, 1 / 16, [
            ["ex_side", 0]
        ]);
        model.addBox(0, 0, 15 / 16, 1 / 16, 1, 1, [
            ["ex_side", 0]
        ]);
        model.addBox(15 / 16, 0, 15 / 16, 1, 1, 1, [
            ["ex_side", 0]
        ]);
        model.addBox(1 / 16, 1 / 16, 1 / 16, 15 / 16, 15 / 16, 2 / 16, [
            ["glass", 0]
        ]);
        model.addBox(1 / 16, 1 / 16, 1 / 16, 2 / 16, 15 / 16, 15 / 16, [
            ["glass", 0]
        ]);
        model.addBox(1 / 16, 1 / 16, 14 / 16, 15 / 16, 15 / 16, 15 / 16, [
            ["glass", 0]
        ]);
        model.addBox(14 / 16, 1 / 16, 1 / 16, 15 / 16, 15 / 16, 15 / 16, [
            ["glass", 0]
        ]);
        model.addBox(c0 + 0.25, c4 + c1, c0 + 0.25, c8 + 0.25, 3 / 8 + c1, 1 / 32 + 0.25, [
            ["planks", 0]
        ]);
        model.addBox(c0 + 0.25, c4 + c1, c15 / 2 + 0.25, c8 + 0.25, c6 + c1, c8 + 0.25, [
            ["planks", 0]
        ]);
        model.addBox(c0 + 0.25, c4 + c1, c1 / 2 + 0.25, c1 / 2 + 0.25, c6 + c1, c15 / 2 + 0.25, [
            ["planks", 0]
        ]);
        model.addBox(c15 / 2 + 0.25, c4 + c1, c1 / 2 + 0.25, c8 + 0.25, c6 + c1, c15 / 2 + 0.25, [
            ["planks", 0]
        ]);
        model.addBox(c1 / 2 + 0.25, c0 + c1, c1 / 2 + 0.25, c1 + 0.25, c9 / 2 + c1, c1 + 0.25, [
            ["planks", 0]
        ]);
        model.addBox(c7 + 0.25, c0 + c1, c7 + 0.25, c15 / 2 + 0.25, c9 / 2 + c1, c15 / 2 + 0.25, [
            ["planks", 0]
        ]);
        model.addBox(c7 + 0.25, c0 + c1, c1 / 2 + 0.25, c15 / 2 + 0.25, c9 / 2 + c1, c1 + 0.25, [
            ["planks", 0]
        ]);
        model.addBox(c1 / 2 + 0.25, c0 + c1, c7 + 0.25, c1 + 0.25, c9 / 2 + c1, c15 / 2 + 0.25, [
            ["planks", 0]
        ]);
        model.addBox(c0 + 0.25, 0.5623 / 2 + c1, c0 + 0.25, c8 + 0.25, 9.3 / 32 + c1, c8 + 0.25, [
            ["筛子", 2]
        ]);
        model.addBox(c1 / 2 + 0.25, 0.6255 / 2, c1 / 2 + 0.25, c15 / 2 + 0.25, c5, c15 / 2 + 0.25, [
            ["筛网", 0]
        ]);
        model.addBox(c1 / 2 + 0.25, 0.6255 / 2 + 0.05, c1 / 2 + 0.25, c15 / 2 + 0.25, c5 + ydata, c15 / 2 + 0.25, [
            [texture, 0]
        ]);
        render.addEntry(model);
        BlockRenderer.mapAtCoords(x, y, z, render);
    };
    Block.createBlock("ex_autosieve", [{
            name: "Auto Sieve",
            texture: [
                ["ex_top", 0],
                ["ex_top", 0],
                ["ex_side", 0],
                ["ex_side", 0],
                ["ex_side", 0],
                ["ex_side", 0]
            ],
            inCreative: true
        }]);
    Recipes.addShaped({
        id: BlockID.ex_autosieve,
        count: 1,
        data: 0
    }, ["aba", "bcb", "dbd"], ["a", VanillaBlockID.iron_block, 0, "b", VanillaBlockID.glass_pane, 0, "c", BlockID.ex_sieve_birch, 0, "d", VanillaItemID.iron_ingot, 0]);
    Recipes.addShaped({
        id: BlockID.ex_autosieve,
        count: 1,
        data: 0
    }, ["aba", "bcb", "dbd"], ["a", VanillaBlockID.iron_block, 0, "b", VanillaBlockID.glass_pane, 0, "c", BlockID.ex_sieve_acacia, 0, "d", VanillaItemID.iron_ingot, 0]);
    Recipes.addShaped({
        id: BlockID.ex_autosieve,
        count: 1,
        data: 0
    }, ["aba", "bcb", "dbd"], ["a", VanillaBlockID.iron_block, 0, "b", VanillaBlockID.glass_pane, 0, "c", BlockID.ex_sieve_big_oak, 0, "d", VanillaItemID.iron_ingot, 0]);
    Recipes.addShaped({
        id: BlockID.ex_autosieve,
        count: 1,
        data: 0
    }, ["aba", "bcb", "dbd"], ["a", VanillaBlockID.iron_block, 0, "b", VanillaBlockID.glass_pane, 0, "c", BlockID.ex_sieve_jungle, 0, "d", VanillaItemID.iron_ingot, 0]);
    Recipes.addShaped({
        id: BlockID.ex_autosieve,
        count: 1,
        data: 0
    }, ["aba", "bcb", "dbd"], ["a", VanillaBlockID.iron_block, 0, "b", VanillaBlockID.glass_pane, 0, "c", BlockID.ex_sieve_spruce, 0, "d", VanillaItemID.iron_ingot, 0]);
    Recipes.addShaped({
        id: BlockID.ex_autosieve,
        count: 1,
        data: 0
    }, ["aba", "bcb", "dbd"], ["a", VanillaBlockID.iron_block, 0, "b", VanillaBlockID.glass_pane, 0, "c", BlockID.ex_sieve_oak, 0, "d", VanillaItemID.iron_ingot, 0]);
    Block.setShape(BlockID.ex_autosieve, 0, 0, 0, 1, 1, 1);
    var autosieverender = new ICRender.CollisionShape();
    var entry = autosieverender.addEntry();
    entry.addBox(0, 0, 0, 1, 1, 1);
    BlockRenderer.setCustomCollisionShape(BlockID.ex_autosieve, 0, autosieverender);
    var render = new ICRender.Model();
    var model = BlockRenderer.Model();
    model.addBox(0, 0, 0, 1, 1 / 16, 1, [
        ["ex_top", 0]
    ]);
    model.addBox(0, 15 / 16, 0, 1, 1, 1, [
        ["ex_top", 0]
    ]);
    model.addBox(0, 0, 0, 1 / 16, 1, 1 / 16, [
        ["ex_side", 0]
    ]);
    model.addBox(15 / 16, 0, 0, 1, 1, 1 / 16, [
        ["ex_side", 0]
    ]);
    model.addBox(0, 0, 15 / 16, 1 / 16, 1, 1, [
        ["ex_side", 0]
    ]);
    model.addBox(15 / 16, 0, 15 / 16, 1, 1, 1, [
        ["ex_side", 0]
    ]);
    model.addBox(1 / 16, 1 / 16, 1 / 16, 15 / 16, 15 / 16, 2 / 16, [
        ["glass", 0]
    ]);
    model.addBox(1 / 16, 1 / 16, 1 / 16, 2 / 16, 15 / 16, 15 / 16, [
        ["glass", 0]
    ]);
    model.addBox(1 / 16, 1 / 16, 14 / 16, 15 / 16, 15 / 16, 15 / 16, [
        ["glass", 0]
    ]);
    model.addBox(14 / 16, 1 / 16, 1 / 16, 15 / 16, 15 / 16, 15 / 16, [
        ["glass", 0]
    ]);
    model.addBox(c0 + 0.25, c4 + c1, c0 + 0.25, c8 + 0.25, 3 / 8 + c1, 1 / 32 + 0.25, [
        ["planks", 0]
    ]);
    model.addBox(c0 + 0.25, c4 + c1, c15 / 2 + 0.25, c8 + 0.25, c6 + c1, c8 + 0.25, [
        ["planks", 0]
    ]);
    model.addBox(c0 + 0.25, c4 + c1, c1 / 2 + 0.25, c1 / 2 + 0.25, c6 + c1, c15 / 2 + 0.25, [
        ["planks", 0]
    ]);
    model.addBox(c15 / 2 + 0.25, c4 + c1, c1 / 2 + 0.25, c8 + 0.25, c6 + c1, c15 / 2 + 0.25, [
        ["planks", 0]
    ]);
    model.addBox(c1 / 2 + 0.25, c0 + c1, c1 / 2 + 0.25, c1 + 0.25, c9 / 2 + c1, c1 + 0.25, [
        ["planks", 0]
    ]);
    model.addBox(c7 + 0.25, c0 + c1, c7 + 0.25, c15 / 2 + 0.25, c9 / 2 + c1, c15 / 2 + 0.25, [
        ["planks", 0]
    ]);
    model.addBox(c7 + 0.25, c0 + c1, c1 / 2 + 0.25, c15 / 2 + 0.25, c9 / 2 + c1, c1 + 0.25, [
        ["planks", 0]
    ]);
    model.addBox(c1 / 2 + 0.25, c0 + c1, c7 + 0.25, c1 + 0.25, c9 / 2 + c1, c15 / 2 + 0.25, [
        ["planks", 0]
    ]);
    model.addBox(c1 / 2 + 0.25, 0.6255 / 2, c1 / 2 + 0.25, c15 / 2 + 0.25, c5 + 0.028, c15 / 2 + 0.25, [
        ["ex_string_mesh", 0]
    ]);
    render.addEntry(model);
    BlockRenderer.enableCoordMapping(BlockID.ex_autosieve, 0, render);
    var AutoSieveUI = {
        standart: {
            header: {
                text: Translation.translate("Auto Sieve")
            }
        },
        drawing: [{
                type: "bitmap",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 2.3 - 2,
                y: (UIbase / 12) * 4.5 - (UIbase / 12) * 1.32 - 2,
                bitmap: "ex_sieve",
                scale: (UIbase / 170)
            }, {
                type: "bitmap",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 9.6 - 2,
                y: UIbase / 7.5 - 2,
                bitmap: "ex_energyground",
                scale: (UIbase / 170)
            }],
        elements: {
            jindu1: {
                type: "scale",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 2.3,
                y: (UIbase / 12) * 4.5 - (UIbase / 12) * 1.32,
                direction: 0,
                value: 0.5,
                bitmap: "ex_sievefull",
                scale: (UIbase / 170)
            },
            jindu2: {
                type: "scale",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 9.6,
                y: UIbase / 7.5 + 2,
                bitmap: "ex_energy",
                scale: (UIbase / 170),
                direction: 1
            },
            slot0: {
                type: "slot",
                x: (510 - UIbase * 0.49) + (UIbase / 12),
                y: (UIbase / 12) * 3.3,
                size: (UIbase / 12)
            }
        }
    };
    for (var i = 0; i < 20; i++) {
        AutoSieveUI.elements["slot" + (i + 1)] = {
            type: "slot",
            x: (510 - UIbase * 0.49) + (i % 5) * (UIbase / 12) + (UIbase / 12) * 3.7,
            y: 75 + parseInt(i / 5) * (UIbase / 12),
            size: (UIbase / 12)
        };
    };
    AutoSieveUI = new UIRegistry(AutoSieveUI);
    var prototype = {
        useNetworkItemContainer: true,
        defaultValues: {
            power_tier: 1,
            work_time: 160,
            energy_storage: 10000,
            energy_consumption: 2,
            progress: 0,
            meta: 0,
            isActive: false,
            AutoSieveOnce: false
        },
        tick: function () {
            StorageInterface.checkHoppers(this);
            var inputSlot = this.container.getSlot("slot0");
            var SievedBlock = Sieve.sieve.ex[inputSlot.id];
            if (SievedBlock) {
                if (this.data.energy >= this.data.energy_consumption) {
                    this.data.progress += 1 / this.data.work_time;
                    this.data.energy -= this.data.energy_consumption;
                    if (this.data.progress > 0.2 && this.data.progress < 0.4) {
                        this.setModel(0.2, SievedBlock.texture);
                    }
                    ;
                    if (this.data.progress > 0.4 && this.data.progress < 0.6) {
                        this.setModel(0.15, SievedBlock.texture);
                    }
                    ;
                    if (this.data.progress > 0.6 && this.data.progress < 0.8) {
                        this.setModel(0.1, SievedBlock.texture);
                    }
                    ;
                    if (this.data.progress > 0.8 && this.data.progress < 1) {
                        this.setModel(0.05, SievedBlock.texture);
                    }
                    ;
                    if (this.data.progress.toFixed(3) >= 1) {
                        BlockRenderer.unmapAtCoords(this.x, this.y, this.z);
                        for (var a = 0; a < 6; a++) {
                            for (i in Sieve[inputSlot.id]) {
                                if (Math.random() * 100 <= Sieve[inputSlot.id][i].chance) {
                                    try {
                                        this.setOutput(i || 0, randomNum(Sieve[inputSlot.id][i].dropmin, Sieve[inputSlot.id][i].dropmax, 1 / 4) || 0, Sieve[inputSlot.id][i].data || 0);
                                    }
                                    catch (e) { }
                                }
                                ;
                            }
                            ;
                            a++;
                        }
                        ;
                        inputSlot.setSlot(inputSlot.id, inputSlot.count - 1, inputSlot.data);
                        this.container.validateAll();
                        this.data.progress = 0;
                    }
                    ;
                };
            }
            else {
                BlockRenderer.unmapAtCoords(this.x, this.y, this.z);
                this.data.progress = 0;
            };
            var tier = this.getTier();
            var energyStorage = this.getEnergyStorage();
            this.data.energy = Math.min(this.data.energy, energyStorage);
            this.data.energy += api.ChargeRegistry.getEnergyFrom(this.container.getSlot("slotEnergy"), "Eu", energyStorage - this.data.energy, 32, tier);
            this.container.setScale("jindu1", this.data.progress);
            this.container.setScale("jindu2", this.data.energy / energyStorage);
            this.container.sendChanges();
        },
        destroy: function () {
            BlockRenderer.unmapAtCoords(this.x, this.y, this.z);
        },
        setModel: function (ydata, texture) {
            this.data.AutoSieveOnce = true;
            this.networkData.putInt("ydata", ydata);
            this.networkData.putString("texture", texture);
            modelfunc(ydata, texture, this.x, this.y, this.z);
        },
        client: {
            renderModel: function () {
                var ydata = this.networkData.getInt("ydata");
                var texture = this.networkData.getString("texture");
                if (prototype.defaultValues.AutoSieveOnce != false)
                    modelfunc(ydata, texture, this.x, this.y, this.z);
            },
            load: function () {
                this.renderModel();
                var self = this;
                this.networkData.addOnDataChangedListener(function (data, isExternal) {
                    self.renderModel();
                });
            }
        },
        setOutput: function (id, count, data) {
            for (var slot = 1; slot < 21; slot++) {
                var output = this.container.getSlot("slot" + slot);
                if (output.id == 0 || output.id == id && output.data == data && output.count < 64) {
                    if (output.count + count > 64) {
                        var output_count = 64 - output.count;
                        output.setSlot(id, output.count + output_count, data);
                        this.setOutput(id, (output.count + count - 64) - output_count, data);
                        this.container.sendChanges();
                    }
                    else {
                        output.setSlot(id, output.count + count, data);
                        this.container.sendChanges();
                    }
                    ;
                    break;
                };
            };
        },
        getScreenByName: function (screenName) {
            return AutoSieveUI;
        },
        getScreenName: function (screenName) {
            return "AutoSieveUI";
        },
        getEnergyStorage: function () {
            return this.data.energy_storage;
        },
        energyReceive: api.Machine.basicEnergyReceiveFunc
    };
    api.Machine.registerElectricMachine(BlockID.ex_autosieve, prototype);
});
StorageInterface.createInterface(BlockID.ex_autosieve, {
    slots: {
        "slot^1-20": {
            output: true
        },
        "slot0": {
            input: true
        }
    }
});
ModAPI.addAPICallback("ICore", function (api) {
    IDRegistry.genBlockID("ex_autoheavysieve");
    Block.createBlock("ex_autoheavysieve", [{
            name: "Auto Heavy Sieve",
            texture: [
                ["ex_bottom", 0],
                ["ex_bottom", 0],
                ["ex_heavy", 0],
                ["ex_heavy", 0],
                ["ex_heavy", 0],
                ["ex_heavy", 0]
            ],
            inCreative: true
        }]);
    Recipes.addShaped({ id: BlockID.ex_autoheavysieve, count: 1, data: 0 }, ["aba", "bcb", "dbd"], ["a", BlockID.blockSteel, 0, "b", VanillaBlockID.glass_pane, 0, "c", BlockID.ex_heavysieve_oak, 0, "d", ItemID.ingotSteel, 0]);
    var modelfunc = function (ydata, texture, x, y, z) {
        var render = new ICRender.Model();
        var model = BlockRenderer.Model();
        model.addBox(0, 0, 0, 1, 1 / 16, 1, [
            ["ex_bottom", 0]
        ]);
        model.addBox(0, 15 / 16, 0, 1, 1, 1, [
            ["ex_bottom", 0]
        ]);
        model.addBox(0, 0, 0, 1 / 16, 1, 1 / 16, [
            ["ex_heavy", 0]
        ]);
        model.addBox(15 / 16, 0, 0, 1, 1, 1 / 16, [
            ["ex_heavy", 0]
        ]);
        model.addBox(0, 0, 15 / 16, 1 / 16, 1, 1, [
            ["ex_heavy", 0]
        ]);
        model.addBox(15 / 16, 0, 15 / 16, 1, 1, 1, [
            ["ex_heavy", 0]
        ]);
        model.addBox(1 / 16, 1 / 16, 1 / 16, 15 / 16, 15 / 16, 2 / 16, [
            ["glass", 0]
        ]);
        model.addBox(1 / 16, 1 / 16, 1 / 16, 2 / 16, 15 / 16, 15 / 16, [
            ["glass", 0]
        ]);
        model.addBox(1 / 16, 1 / 16, 14 / 16, 15 / 16, 15 / 16, 15 / 16, [
            ["glass", 0]
        ]);
        model.addBox(14 / 16, 1 / 16, 1 / 16, 15 / 16, 15 / 16, 15 / 16, [
            ["glass", 0]
        ]);
        model.addBox(c0 + 0.25, c5, c0 + 0.25, c8 + 0.25, c10 - c1, 1 / 32 + 0.25, [
            ["log_oak", 0]
        ]);
        model.addBox(c0 + 0.25, c5, c15 / 2 + 0.25, c8 + 0.25, c10 - c1, c8 + 0.25, [
            ["log_oak", 0]
        ]);
        model.addBox(c0 + 0.25, c5, c1 / 2 + 0.25, c1 / 2 + 0.25, c10 - c1, c15 / 2 + 0.25, [
            ["log_oak", 0]
        ]);
        model.addBox(c15 / 2 + 0.25, c5, c1 / 2 + 0.25, c8 + 0.25, c10 - c1, c15 / 2 + 0.25, [
            ["log_oak", 0]
        ]);
        model.addBox(c1 / 2 + 0.25, c0 + c1, c1 / 2 + 0.25, c3 / 2 + 0.25, c11 / 2, c3 / 2 + 0.25, [
            ["log_oak", 0]
        ]);
        model.addBox(c13 / 2 + 0.25, c0 + c1, c13 / 2 + 0.25, c15 / 2 + 0.25, c11 / 2, c15 / 2 + 0.25, [
            ["log_oak", 0]
        ]);
        model.addBox(c13 / 2 + 0.25, c0 + c1, c1 / 2 + 0.25, c15 / 2 + 0.25, c11 / 2, c3 / 2 + 0.25, [
            ["log_oak", 0]
        ]);
        model.addBox(c1 / 2 + 0.25, c0 + c1, c13 / 2 + 0.25, c3 / 2 + 0.25, c11 / 2, c15 / 2 + 0.25, [
            ["log_oak", 0]
        ]);
        model.addBox(0.05 / 2 + 0.25, 0.72 / 2 + 0.03, 0.05 / 2 + 0.25, 0.99375 / 2 + 0.23, 0.71 / 2 + ydata, 0.99375 / 2 + 0.23, [
            [texture, 0]
        ]);
        model.addBox(0.05 / 2 + 0.25, 0.72 / 2, 0.05 / 2 + 0.25, 0.99375 / 2 + 0.23, 0.71 / 2, 0.99375 / 2 + 0.23, [
            ["ex_string_mesh", 0]
        ]);
        render.addEntry(model);
        BlockRenderer.mapAtCoords(x, y, z, render);
    };
    var render = new ICRender.CollisionShape();
    var entry = render.addEntry();
    entry.addBox(c1, c0, c1, c15, c16, c15);
    BlockRenderer.setCustomCollisionShape(BlockID.ex_autoheavysieve, 0, render);
    var render = new ICRender.Model();
    var model = BlockRenderer.Model();
    model.addBox(0, 0, 0, 1, 1 / 16, 1, [
        ["ex_bottom", 0]
    ]);
    model.addBox(0, 15 / 16, 0, 1, 1, 1, [
        ["ex_bottom", 0]
    ]);
    model.addBox(0, 0, 0, 1 / 16, 1, 1 / 16, [
        ["ex_heavy", 0]
    ]);
    model.addBox(15 / 16, 0, 0, 1, 1, 1 / 16, [
        ["ex_heavy", 0]
    ]);
    model.addBox(0, 0, 15 / 16, 1 / 16, 1, 1, [
        ["ex_heavy", 0]
    ]);
    model.addBox(15 / 16, 0, 15 / 16, 1, 1, 1, [
        ["ex_heavy", 0]
    ]);
    model.addBox(1 / 16, 1 / 16, 1 / 16, 15 / 16, 15 / 16, 2 / 16, [
        ["glass", 0]
    ]);
    model.addBox(1 / 16, 1 / 16, 1 / 16, 2 / 16, 15 / 16, 15 / 16, [
        ["glass", 0]
    ]);
    model.addBox(1 / 16, 1 / 16, 14 / 16, 15 / 16, 15 / 16, 15 / 16, [
        ["glass", 0]
    ]);
    model.addBox(14 / 16, 1 / 16, 1 / 16, 15 / 16, 15 / 16, 15 / 16, [
        ["glass", 0]
    ]);
    model.addBox(c0 + 0.25, c5, c0 + 0.25, c8 + 0.25, c10 - c1, 1 / 32 + 0.25, [
        ["log_oak", 0]
    ]);
    model.addBox(c0 + 0.25, c5, c15 / 2 + 0.25, c8 + 0.25, c10 - c1, c8 + 0.25, [
        ["log_oak", 0]
    ]);
    model.addBox(c0 + 0.25, c5, c1 / 2 + 0.25, c1 / 2 + 0.25, c10 - c1, c15 / 2 + 0.25, [
        ["log_oak", 0]
    ]);
    model.addBox(c15 / 2 + 0.25, c5, c1 / 2 + 0.25, c8 + 0.25, c10 - c1, c15 / 2 + 0.25, [
        ["log_oak", 0]
    ]);
    model.addBox(c1 / 2 + 0.25, c0 + c1, c1 / 2 + 0.25, c3 / 2 + 0.25, c11 / 2, c3 / 2 + 0.25, [
        ["log_oak", 0]
    ]);
    model.addBox(c13 / 2 + 0.25, c0 + c1, c13 / 2 + 0.25, c15 / 2 + 0.25, c11 / 2, c15 / 2 + 0.25, [
        ["log_oak", 0]
    ]);
    model.addBox(c13 / 2 + 0.25, c0 + c1, c1 / 2 + 0.25, c15 / 2 + 0.25, c11 / 2, c3 / 2 + 0.25, [
        ["log_oak", 0]
    ]);
    model.addBox(c1 / 2 + 0.25, c0 + c1, c13 / 2 + 0.25, c3 / 2 + 0.25, c11 / 2, c15 / 2 + 0.25, [
        ["log_oak", 0]
    ]);
    model.addBox(0.05 / 2 + 0.25, 0.72 / 2, 0.05 / 2 + 0.25, 0.99375 / 2 + 0.23, 0.71 / 2, 0.99375 / 2 + 0.23, [
        ["ex_string_mesh", 0]
    ]);
    render.addEntry(model);
    BlockRenderer.enableCoordMapping(BlockID.ex_autoheavysieve, 0, render);
    var AutoHeavySieveUI = {
        standart: {
            header: {
                text: Translation.translate("Auto Sieve")
            }
        },
        drawing: [{
                type: "bitmap",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 2.3 - 2,
                y: (UIbase / 12) * 4.5 - (UIbase / 12) * 1.32 - 2,
                bitmap: "ex_sieve",
                scale: (UIbase / 170)
            }, {
                type: "bitmap",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 9.6 - 2,
                y: UIbase / 7.5 - 2,
                bitmap: "ex_energyground",
                scale: (UIbase / 170)
            }],
        elements: {
            jindu1: {
                type: "scale",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 2.3,
                y: (UIbase / 12) * 4.5 - (UIbase / 12) * 1.32,
                direction: 0,
                value: 0.5,
                bitmap: "ex_sievefull",
                scale: (UIbase / 170)
            },
            jindu2: {
                type: "scale",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 9.6,
                y: UIbase / 7.5 + 2,
                bitmap: "ex_energy",
                scale: (UIbase / 170),
                direction: 1
            },
            slot0: {
                type: "slot",
                x: (510 - UIbase * 0.49) + (UIbase / 12),
                y: (UIbase / 12) * 3.3,
                size: (UIbase / 12)
            }
        }
    };
    for (var i = 0; i < 20; i++) {
        AutoHeavySieveUI.elements["slot" + (i + 1)] = {
            type: "slot",
            x: (510 - UIbase * 0.49) + (i % 5) * (UIbase / 12) + (UIbase / 12) * 3.7,
            y: 75 + parseInt(i / 5) * (UIbase / 12),
            size: (UIbase / 12)
        };
    };
    AutoHeavySieveUI = new UIRegistry(AutoHeavySieveUI);
    var prototype = {
        useNetworkItemContainer: true,
        defaultValues: {
            power_tier: 1,
            work_time: 160,
            energy_storage: 10000,
            energy_consumption: 2,
            progress: 0,
            AutoHeavySieveOnce: false
        },
        tick: function () {
            var inputSlot = this.container.getSlot("slot0");
            var SievedBlock = Sieve.sieve.co[inputSlot.id];
            StorageInterface.checkHoppers(this);
            if (SievedBlock) {
                if (this.data.energy >= this.data.energy_consumption) {
                    this.data.progress += 1 / this.data.work_time;
                    this.data.energy -= this.data.energy_consumption;
                    if (this.data.progress > 0.2 && this.data.progress < 0.4) {
                        this.setModel(0.2, SievedBlock.texture);
                    }
                    ;
                    if (this.data.progress > 0.4 && this.data.progress < 0.6) {
                        this.setModel(0.15, SievedBlock.texture);
                    }
                    ;
                    if (this.data.progress > 0.6 && this.data.progress < 0.8) {
                        this.setModel(0.1, SievedBlock.texture);
                    }
                    ;
                    if (this.data.progress > 0.8 && this.data.progress < 1) {
                        this.setModel(0.05, SievedBlock.texture);
                    }
                    ;
                    if (this.data.progress.toFixed(3) >= 1) {
                        BlockRenderer.unmapAtCoords(this.x, this.y, this.z);
                        for (var a = 0; a < 20; a++) {
                            for (i in Sieve[inputSlot.id]) {
                                if (Math.random() * 100 <= Sieve[inputSlot.id][i].chance) {
                                    try {
                                        this.setOutput(i || 0, randomNum(Sieve[inputSlot.id][i].dropmin, Sieve[inputSlot.id][i].dropmax, 1 / 4) || 0, Sieve[inputSlot.id][i].data || 0);
                                    }
                                    catch (e) { }
                                }
                                ;
                            }
                            ;
                            a++;
                        }
                        ;
                        inputSlot.setSlot(inputSlot.id, inputSlot.count - 1, inputSlot.data);
                        this.container.validateAll();
                        this.data.progress = 0;
                    }
                    ;
                };
            }
            else {
                BlockRenderer.unmapAtCoords(this.x, this.y, this.z);
                this.data.progress = 0;
            };
            var tier = this.getTier();
            var energyStorage = this.getEnergyStorage();
            this.data.energy = Math.min(this.data.energy, energyStorage);
            this.data.energy += api.ChargeRegistry.getEnergyFrom(this.container.getSlot("slotEnergy"), "Eu", energyStorage - this.data.energy, 32, tier);
            this.container.setScale("jindu1", this.data.progress);
            this.container.setScale("jindu2", this.data.energy / energyStorage);
            this.container.sendChanges();
        },
        destroy: function () {
            BlockRenderer.unmapAtCoords(this.x, this.y, this.z);
        },
        setModel: function (ydata, texture) {
            this.data.AutoHeavySieveOnce = true;
            this.networkData.putInt("ydata", ydata);
            this.networkData.putString("texture", texture);
            modelfunc(ydata, texture, this.x, this.y, this.z);
        },
        client: {
            renderModel: function () {
                var ydata = this.networkData.getInt("ydata");
                var texture = this.networkData.getString("texture");
                if (prototype.defaultValues.AutoHeavySieveOnce != false)
                    modelfunc(ydata, texture, this.x, this.y, this.z);
            },
            load: function () {
                this.renderModel();
                var self = this;
                this.networkData.addOnDataChangedListener(function (data, isExternal) {
                    self.renderModel();
                });
            }
        },
        setOutput: function (id, count, data) {
            for (var slot = 1; slot < 21; slot++) {
                var output = this.container.getSlot("slot" + slot);
                if (output.id == 0 || output.id == id && output.data == data && output.count < 64) {
                    if (output.count + count > 64) {
                        var output_count = 64 - output.count;
                        output.setSlot(id, output.count + output_count, data);
                        this.setOutput(id, (output.count + count - 64) - output_count, data);
                        this.container.sendChanges();
                    }
                    else {
                        output.setSlot(id, output.count + count, data);
                        this.container.sendChanges();
                    }
                    ;
                    break;
                };
            };
        },
        getScreenByName: function (name) {
            return AutoHeavySieveUI;
        },
        getScreenName: function (name) {
            return "AutoHeavySieveUI";
        },
        getEnergyStorage: function () {
            return this.data.energy_storage;
        },
        energyReceive: api.Machine.basicEnergyReceiveFunc
    };
    api.Machine.registerElectricMachine(BlockID.ex_autoheavysieve, prototype);
    StorageInterface.createInterface(BlockID.ex_autoheavysieve, {
        slots: {
            "slot^1-20": { output: true },
            "slot0": { input: true }
        }
    });
});
ModAPI.addAPICallback("ICore", function (api) {
    IDRegistry.genBlockID("ex_autohammer"), Block.createBlock("ex_autohammer", [{
            name: "Auto Hammer",
            texture: [
                ["ex_top", 0],
                ["ex_top", 0],
                ["ex_side", 0],
                ["ex_side", 0],
                ["ex_side", 0],
                ["ex_side", 0]
            ],
            inCreative: true
        }]);
    Recipes.addShaped({ id: BlockID.ex_autohammer, count: 1, data: 0 }, ["aba", "aca", "aba"], ["a", VanillaItemID.iron_ingot, 0, "b", VanillaBlockID.heavy_weighted_pressure_plate, 0, "c", ItemID.ex_hammersDiamond, 0]);
    var render = new ICRender.CollisionShape();
    var entry = render.addEntry();
    entry.addBox(0, 0, 0, 1, 1, 1);
    BlockRenderer.setCustomCollisionShape(BlockID.ex_autohammer, 0, render);
    var render = new ICRender.Model();
    var model = BlockRenderer.Model();
    model.addBox(0, 0, 0, 1, 1 / 16, 1, [
        ["ex_top", 0]
    ]),
        model.addBox(0, .9375, 0, 1, 1, 1, [
            ["ex_top", 0]
        ]),
        model.addBox(0, 0, 0, 1 / 16, 1, 1 / 16, [
            ["ex_side", 0]
        ]),
        model.addBox(.9375, 0, 0, 1, 1, 1 / 16, [
            ["ex_side", 0]
        ]),
        model.addBox(0, 0, .9375, 1 / 16, 1, 1, [
            ["ex_side", 0]
        ]),
        model.addBox(.9375, 0, .9375, 1, 1, 1, [
            ["ex_side", 0]
        ]),
        model.addBox(1 / 16, 1 / 16, 1 / 16, .9375, .9375, .125, [
            ["glass", 0]
        ]),
        model.addBox(1 / 16, 1 / 16, 1 / 16, .125, .9375, .9375, [
            ["glass", 0]
        ]),
        model.addBox(1 / 16, 1 / 16, .875, .9375, .9375, .9375, [
            ["glass", 0]
        ]),
        model.addBox(.875, 1 / 16, 1 / 16, .9375, .9375, .9375, [
            ["glass", 0]
        ]),
        render.addEntry(model),
        BlockRenderer.setStaticICRender(BlockID.ex_autohammer, 0, render);
    var AutoHammerUI = {
        standart: {
            header: {
                text: Translation.translate("Auto Hammer")
            }
        },
        drawing: [{
                type: "bitmap",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 2.3 - 2,
                y: (UIbase / 12) * 4.5 - (UIbase / 12) * 1.32 - 2,
                bitmap: "ex_sieve",
                scale: (UIbase / 170)
            }, {
                type: "bitmap",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 9.6 - 2,
                y: UIbase / 7.5 - 2,
                bitmap: "ex_energyground",
                scale: (UIbase / 170)
            }],
        elements: {
            jindu1: {
                type: "scale",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 2.3,
                y: (UIbase / 12) * 4.5 - (UIbase / 12) * 1.32,
                direction: 0,
                value: 0.5,
                bitmap: "ex_sievefull",
                scale: (UIbase / 170)
            },
            jindu2: {
                type: "scale",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 9.6,
                y: UIbase / 7.5 + 2,
                bitmap: "ex_energy",
                scale: (UIbase / 170),
                direction: 1
            },
            slot0: {
                type: "slot",
                x: (510 - UIbase * 0.49) + (UIbase / 12),
                y: (UIbase / 12) * 3.3,
                size: (UIbase / 12)
            },
            slot21: {
                type: "slot",
                x: (510 - UIbase * 0.49) + (UIbase / 12),
                y: (UIbase / 12) * 5,
                size: (UIbase / 12)
            },
            slot22: {
                type: "slot",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 2,
                y: (UIbase / 12) * 5,
                size: (UIbase / 12)
            }
        }
    };
    for (var i = 0; i < 20; i++) {
        AutoHammerUI.elements["slot" + (i + 1)] = {
            type: "slot",
            x: (510 - UIbase * 0.49) + (i % 5) * (UIbase / 12) + (UIbase / 12) * 3.7,
            y: 75 + parseInt(i / 5) * (UIbase / 12),
            size: (UIbase / 12)
        };
    };
    AutoHammerUI = new UIRegistry(AutoHammerUI);
    CompressedCore.setMachineInPut("ex_autohammer", {
        "13:0": {
            id: 12,
            count: 1,
            data: 0
        },
        "12:0": {
            id: BlockID.ex_dust,
            count: 1,
            data: 0
        },
        "87:0": {
            id: BlockID.ex_ex_gravelNether,
            count: 1,
            data: 0
        },
        "121:0": {
            id: BlockID.ex_gravelEnder,
            count: 1,
            data: 0
        },
        "4:0": {
            id: 13,
            count: 1,
            data: 0
        }
    });
    api.Machine.registerElectricMachine(BlockID.ex_autohammer, {
        useNetworkItemContainer: true,
        defaultValues: {
            work_time: 200,
            energy_storage: 10000,
            energy_consumption: 2,
            speed: 0,
            progress: 0
        },
        tick: function () {
            var input = this.container.getSlot("slot0");
            var st21 = this.container.getSlot("slot21");
            var st22 = this.container.getSlot("slot22");
            StorageInterface.checkHoppers(this);
            var recipe = CompressedCore.getMachineInPut("ex_autohammer", input.id, input.data);
            if (recipe) {
                if (this.data.energy >= this.data.energy_consumption) {
                    if (st21.count == 1) {
                        if (Math.random() * 100 < 5) {
                            st21.data++;
                        }
                    }
                    if (st22.count == 1) {
                        if (Math.random() * 100 < 5) {
                            st22.data++;
                        }
                    }
                    this.data.progress += (1 + this.data.speed) / this.data.work_time;
                    this.data.energy -= this.data.energy_consumption;
                    if (this.data.progress.toFixed(3) >= 1) {
                        this.setOutput(recipe.id, recipe.count, recipe.data);
                        input.setSlot(input.id, input.count - 1, input.data);
                        this.container.validateAll();
                        this.data.progress = 0;
                    }
                }
            }
            else {
                this.data.progress = 0;
            }
            var tier = this.getTier();
            var energyStorage = this.getEnergyStorage();
            this.data.energy = Math.min(this.data.energy, energyStorage);
            this.data.energy += api.ChargeRegistry.getEnergyFrom(this.container.getSlot("slotEnergy"), "Eu", energyStorage - this.data.energy, 32, tier);
            this.container.setScale("jindu1", this.data.progress);
            this.container.setScale("jindu2", this.data.energy / energyStorage);
            this.data.speed = st21.count + st22.count;
            this.container.sendChanges();
        },
        setOutput: function (id, count, data) {
            for (var slot = 1; slot < 21; slot++) {
                var output = this.container.getSlot("slot" + slot);
                if (output.id == 0 || output.id == id && output.data == data && output.count < 64) {
                    if (output.count + count > 64) {
                        var output_count = 64 - output.count;
                        output.setSlot(id, output.count + output_count, data);
                        this.setOutput(id, (output.count + count - 64) - output_count, data);
                        this.container.sendChanges();
                    }
                    else {
                        output.setSlot(id, output.count + count, data);
                        this.container.sendChanges();
                    }
                    ;
                    break;
                };
            };
        },
        getScreenByName: function () {
            return AutoHammerUI;
        },
        getScreenName: function () {
            return "AutoHammerUI";
        },
        init: function () {
            this.anim();
            this.container.setSlotAddTransferPolicy("slot21", function (container, name, id, count, data, extra, player) {
                return id == ItemID.ex_hammersDiamond ? 1 : 0;
            });
            this.container.setSlotAddTransferPolicy("slot22", function (container, name, id, count, data, extra, player) {
                return id == ItemID.ex_hammersDiamond ? 1 : 0;
            });
        },
        anim: function () {
            this.ani_item = new Animation.Item(this.x + 0.5, this.y + 0.5, this.z + 0.5);
            this.ani_item.describeItem({
                id: ItemID.ex_hammersDiamond,
                count: 1,
                data: 0,
                size: 0.5
            });
            this.ani_item.load();
        },
        destroy: function () {
            if (this.ani_item) {
                this.ani_item.destroy();
            }
        },
        getEnergyStorage: function () {
            return this.data.energy_storage;
        },
        energyReceive: api.Machine.basicEnergyReceiveFunc
    });
    StorageInterface.createInterface(BlockID.ex_autohammer, {
        slots: {
            "slot^1-20": { output: true },
            "slot0": { input: true }
        }
    });
});
ModAPI.addAPICallback("ICore", function (api) {
    IDRegistry.genBlockID("ex_autocompressor");
    Block.createBlock("ex_autocompressor", [{
            name: "Auto Compressor",
            texture: [
                ["ex_bottom", 0],
                ["ex_compressor_top", 0],
                ["ex_bottom", 0],
                ["ex_bottom", 0],
                ["ex_bottom", 0],
                ["ex_bottom", 0]
            ],
            inCreative: true
        }], "opaque");
    Recipes.addShaped({
        id: BlockID.ex_autocompressor,
        count: 1,
        data: 0
    }, ["aba", "bcb", "aba"], ["a", VanillaBlockID.crafting_table, 0, "b", VanillaItemID.iron_ingot, 0, "c", VanillaBlockID.iron_block, 0]);
    var AutoCompressorUI = {
        standart: {
            header: {
                text: Translation.translate("Auto Compressor")
            }
        },
        drawing: [{
                type: "bitmap",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 4.5 - 2,
                y: (UIbase / 12) * 1.6 - 2,
                bitmap: "ex_sieve",
                scale: (UIbase / 170)
            }, {
                type: "bitmap",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 4.5 - 2,
                y: (UIbase / 12) * 3 - 2,
                bitmap: "ex_sieve",
                scale: (UIbase / 170)
            }, {
                type: "bitmap",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 4.5 - 2,
                y: (UIbase / 12) * 4.4 - 2,
                bitmap: "ex_sieve",
                scale: (UIbase / 170)
            }, {
                type: "bitmap",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 9.6 - 2,
                y: UIbase / 7.5 - 2,
                bitmap: "ex_energyground",
                scale: (UIbase / 170)
            }],
        elements: {
            jindu1: {
                type: "scale",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 4.5,
                y: (UIbase / 12) * 1.6,
                direction: 0,
                value: 0.5,
                bitmap: "ex_sievefull",
                scale: (UIbase / 170)
            },
            jindu2: {
                type: "scale",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 9.6,
                y: UIbase / 7.5 + 2,
                bitmap: "ex_energy",
                scale: (UIbase / 170),
                direction: 1
            },
            jindu3: {
                type: "scale",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 4.5,
                y: (UIbase / 12) * 3,
                direction: 0,
                value: 0.5,
                bitmap: "ex_sievefull",
                scale: (UIbase / 170)
            },
            jindu4: {
                type: "scale",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 4.5,
                y: (UIbase / 12) * 4.4,
                direction: 0,
                value: 0.5,
                bitmap: "ex_sievefull",
                scale: (UIbase / 170)
            }
        }
    };
    for (var i = 0; i < 12; i++) {
        AutoCompressorUI.elements["Slot" + (1 + i)] = {
            type: "slot",
            x: (510 - UIbase * 0.49) + (1 + i % 3) * (UIbase / 12),
            y: (1.6 + parseInt(i / 3)) * (UIbase / 12),
            size: (UIbase / 12)
        };
    };
    for (var i = 12; i < 24; i++) {
        AutoCompressorUI.elements["Slot" + (1 + i)] = {
            type: "slot",
            x: (510 - UIbase * 0.49) + (6 + i % 3) * (UIbase / 12),
            y: (1.6 + parseInt((i - 12) / 3)) * (UIbase / 12),
            size: (UIbase / 12)
        };
    };
    AutoCompressorUI = new UIRegistry(AutoCompressorUI);
    CompressedCore.setMachineInPut("ex_autocompressor", {});
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_Ironbroken, 0, {
        id: BlockID.ex_Irongravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_Goldbroken, 0, {
        id: BlockID.ex_Goldgravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_Copperbroken, 0, {
        id: BlockID.ex_Coppergravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_Tinbroken, 0, {
        id: BlockID.ex_Tingravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_Leadbroken, 0, {
        id: BlockID.ex_Leadgravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_Silverbroken, 0, {
        id: BlockID.ex_Silvergravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_Platinumbroken, 0, {
        id: BlockID.ex_Platinumgravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_Aluminumbroken, 0, {
        id: BlockID.ex_Aluminumgravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_Nickelbroken, 0, {
        id: BlockID.ex_Nickelgravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.crushediron, 0, {
        id: BlockID.ex_Ironsand,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.crushedgold, 0, {
        id: BlockID.ex_Goldsand,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.crushedcopper, 0, {
        id: BlockID.ex_Coppersand,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.crushedtin, 0, {
        id: BlockID.ex_Tinsand,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.crushedlead, 0, {
        id: BlockID.ex_Leadsand,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.crushedsilver, 0, {
        id: BlockID.ex_Silversand,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.crushedplatinum, 0, {
        id: BlockID.ex_Platinumsand,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.crushedaluminum, 0, {
        id: BlockID.ex_Aluminumsand,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.crushednickel, 0, {
        id: BlockID.ex_Nickelsand,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_IronpoweredIron, 0, {
        id: BlockID.ex_Irondust,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_GoldpoweredIron, 0, {
        id: BlockID.ex_Golddust,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_CopperpoweredIron, 0, {
        id: BlockID.ex_Copperdust,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_TinpoweredIron, 0, {
        id: BlockID.ex_Tindust,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_LeadpoweredIron, 0, {
        id: BlockID.ex_Leaddust,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_SilverpoweredIron, 0, {
        id: BlockID.ex_Silverdust,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_PlatinumpoweredIron, 0, {
        id: BlockID.ex_Platinumdust,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_AluminumpoweredIron, 0, {
        id: BlockID.ex_Aluminumdust,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_NickelpoweredIron, 0, {
        id: BlockID.ex_Nickeldust,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_netherIronBroken, 0, {
        id: BlockID.ex_netherIrongravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_netherGoldBroken, 0, {
        id: BlockID.ex_netherGoldgravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_netherCopperBroken, 0, {
        id: BlockID.ex_netherCoppergravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_netherTinBroken, 0, {
        id: BlockID.ex_netherTingravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_netherLeadBroken, 0, {
        id: BlockID.ex_netherLeadgravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_netherSilverBroken, 0, {
        id: BlockID.ex_netherSilvergravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_netherPlatinumBroken, 0, {
        id: BlockID.ex_netherPlatinumgravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_netherAluminumBroken, 0, {
        id: BlockID.ex_netherAluminumgravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_netherNickelBroken, 0, {
        id: BlockID.ex_netherNickelgravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_enderIronBroken, 0, {
        id: BlockID.ex_enderIrongravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_enderGoldBroken, 0, {
        id: BlockID.ex_enderGoldgravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_enderCopperBroken, 0, {
        id: BlockID.ex_enderCoppergravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_enderTinBroken, 0, {
        id: BlockID.ex_enderTingravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_enderLeadBroken, 0, {
        id: BlockID.ex_enderLeadgravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_enderSilverBroken, 0, {
        id: BlockID.ex_enderSilvergravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_enderPlatinumBroken, 0, {
        id: BlockID.ex_enderPlatinumgravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_enderAluminumBroken, 0, {
        id: BlockID.ex_enderAluminumgravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", ItemID.ex_enderNickelBroken, 0, {
        id: BlockID.ex_enderNickelgravel,
        count: 4,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", 3, 0, {
        id: BlockID.compresseddirt,
        count: 9,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", 13, 0, {
        id: BlockID.compressedgravel,
        count: 9,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", 12, 0, {
        id: BlockID.compressedsand,
        count: 9,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", BlockID.ex_dust, 0, {
        id: BlockID.compresseddust,
        count: 9,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", 87, 0, {
        id: BlockID.compressednetherrack,
        count: 9,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", 1, 0, {
        id: BlockID.compressedstone,
        count: 9,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", 318, 0, {
        id: BlockID.compressedflint,
        count: 9,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", 4, 0, {
        id: BlockID.compressedcobblestone,
        count: 9,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", BlockID.ex_gravelNether, 0, {
        id: BlockID.compressednethergravel,
        count: 9,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", 121, 0, {
        id: BlockID.compressedendstone,
        count: 9,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", BlockID.ex_gravelEnder, 0, {
        id: BlockID.compressedendergravel,
        count: 9,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressor", 88, 0, {
        id: BlockID.compressedsoulsand,
        count: 9,
        data: 0
    });
    api.Machine.registerElectricMachine(BlockID.ex_autocompressor, {
        useNetworkItemContainer: true,
        defaultValues: {
            power_tier: 1,
            work_time: 200,
            energy_storage: 10000,
            energy_consumption: 2,
            recipe: {},
            decreaseCount: 0,
            isWorking: {},
            workingItemId: 0,
            progress: 0,
            slotCount: {}
        },
        decreaseItem: function (id, count) {
            for (var slotid = 1; slotid < 13; slotid++) {
                var slot = this.container.getSlot("Slot" + slotid);
                if (slot.id == id && slot.count > 0) {
                    (slot.count - 1 == 0) ? slot.setSlot(0, 0, 0) : slot.setSlot(id, slot.count - 1, slot.data);
                    this.data.slotCount[slotid][slot.id] -= 1;
                    this.data.decreaseCount += 1;
                    break;
                };
            };
            if (this.data.decreaseCount < count) {
                this.decreaseItem(id, count);
            }
            else {
                this.data.decreaseCount = 0;
            };
        },
        getItemCount: function (id) {
            var count = 0;
            for (var slotId in this.data.slotCount) {
                for (var itemId in this.data.slotCount[slotId]) {
                    if (itemId == id) {
                        count += this.data.slotCount[slotId][itemId];
                    }
                    ;
                };
            };
            return count;
        },
        init: function () {
            for (var slotid = 1; slotid < 13; slotid++) {
                this.container.setSlotAddTransferPolicy("Slot" + slotid, function (container, name, id, count, data, extra, player) {
                    if (CompressedCore.getMachineInPut("ex_autocompressor", id, data)) {
                        return count;
                    }
                    else {
                        return 0;
                    }
                });
            };
        },
        tick: function () {
            StorageInterface.checkHoppers(this);
            for (var slotid = 1; slotid < 13; slotid++) {
                var slot = this.container.getSlot("Slot" + slotid);
                if (CompressedCore.getMachineInPut("ex_autocompressor", slot.id, slot.data)) {
                    var item = CompressedCore.getMachineInPut("ex_autocompressor", slot.id, slot.data);
                    if (!this.data.recipe[slot.id]) {
                        this.data.recipe[slot.id] = {
                            item: item,
                            slotId: slotid,
                            id: slot.id
                        };
                    }
                    ;
                };
                if (this.data.slotCount && this.data.slotCount[slotid] == null || this.data.slotCount[slotid] == undefined) {
                    this.data.slotCount[slotid] = {};
                    this.data.slotCount[slotid][slot.id] = slot.count;
                    this.data.slotCount[slotid][slot.id] = this.data.slotCount[slotid][slot.id] < 0 ? 0 : this.data.slotCount[slotid][slot.id];
                }
                else {
                    this.data.slotCount[slotid][slot.id] = slot.count;
                    this.data.slotCount[slotid][slot.id] = this.data.slotCount[slotid][slot.id] < 0 ? 0 : this.data.slotCount[slotid][slot.id];
                };
                if (slot.id == 0) {
                    for (var itemCount in this.data.slotCount[slotid]) {
                        this.data.slotCount[slotid][itemCount] = 0;
                    }
                    ;
                };
            };
            for (var itemId in this.data.recipe) {
                if (this.data.recipe[itemId]) {
                    if (this.data.workingItemId == 0) {
                        if (this.getItemCount(itemId) >= this.data.recipe[itemId]["item"]["count"]) {
                            if (this.data.workingItemId != itemId) {
                                this.data.progress = 0;
                            }
                            ;
                            this.data.workingItemId = itemId;
                            this.data.isWorking[itemId] = true;
                        }
                        else {
                            this.data.isWorking[itemId] = false;
                        }
                        ;
                    }
                    ;
                };
            };
            if (!this.data.isWorking[this.data.workingItemId]) {
                this.data.workingItemId = 0;
                this.data.progress = 0;
            };
            if (this.data.isWorking[this.data.workingItemId] && this.getItemCount(this.data.workingItemId) < this.data.recipe[this.data.workingItemId]["item"]["count"]) {
                this.data.workingItemId = 0;
                this.data.progress = 0;
            };
            if (this.data.isWorking[this.data.workingItemId]) {
                if (this.data.energy >= this.data.energy_consumption && this.canOutput(this.data.recipe[this.data.workingItemId]["item"]["id"])) {
                    this.data.progress += 1 / this.data.work_time;
                    this.data.energy -= this.data.energy_consumption;
                    if (this.data.progress.toFixed(3) >= 1) {
                        this.setOutput(this.data.recipe[this.data.workingItemId]["item"]["id"]);
                        this.decreaseItem(this.data.recipe[this.data.workingItemId]["id"], this.data.recipe[this.data.workingItemId]["item"]["count"]);
                        this.data.progress = 0;
                        this.data.recipe = {};
                        this.data.isWorking[this.data.workingItemId] = false;
                        this.data.workingItemId = 0;
                    }
                    ;
                };
            };
            var tier = this.getTier();
            var energyStorage = this.getEnergyStorage();
            this.data.energy = Math.min(this.data.energy, energyStorage);
            this.data.energy += api.ChargeRegistry.getEnergyFrom(this.container.getSlot("slotEnergy"), "Eu", energyStorage - this.data.energy, 32, tier);
            this.container.setScale("jindu1", this.data.progress);
            this.container.setScale("jindu3", this.data.progress);
            this.container.setScale("jindu4", this.data.progress);
            this.container.setScale("jindu2", this.data.energy / energyStorage);
            this.container.sendChanges();
        },
        canOutput: function (id) {
            this.boolean = false;
            for (var slot = 13; slot < 25; slot++) {
                var output = this.container.getSlot("Slot" + slot);
                if ((output.id == 0 || output.id == id) && output.count < 64) {
                    this.boolean = true;
                    break;
                };
                if (output.id != 0 && (output.id != id || output.count == 64)) {
                    this.boolean = false;
                };
            };
            return this.boolean;
        },
        setOutput: function (id) {
            for (var slot = 13; slot < 25; slot++) {
                var output = this.container.getSlot("Slot" + slot);
                if ((output.id == 0 || output.id == id) && output.count < 64) {
                    output.setSlot(id, output.count + 1, 0);
                    this.container.sendChanges();
                    break;
                };
            };
        },
        getScreenByName: function () {
            return AutoCompressorUI;
        },
        getScreenName: function () {
            return "AutoCompressorUI";
        },
        getEnergyStorage: function () {
            return this.data.energy_storage;
        },
        energyReceive: api.Machine.basicEnergyReceiveFunc
    });
    StorageInterface.createInterface(BlockID.ex_autocompressor, {
        slots: {
            "Slot^11-24": {
                output: true
            },
            "Slot^0-12": {
                input: true
            }
        }
    });
});
ModAPI.addAPICallback("ICore", function (api) {
    IDRegistry.genBlockID("ex_autocompressedhammer");
    Block.createBlock("ex_autocompressedhammer", [{
            name: "Auto Compressed Hammer",
            texture: [
                ["ex_bottom", 0],
                ["ex_bottom", 0],
                ["ex_heavy", 0],
                ["ex_heavy", 0],
                ["ex_heavy", 0],
                ["ex_heavy", 0]
            ],
            inCreative: true
        }]);
    Recipes.addShaped({ id: BlockID.ex_autocompressedhammer, count: 1, data: 0 }, ["aba", "aca", "aba"], ["a", ItemID.ingotSteel, 0, "b", VanillaBlockID.heavy_weighted_pressure_plate, 0, "c", ItemID.ex_hammersCompressedDiamond, 0]);
    var render = new ICRender.CollisionShape();
    var entry = render.addEntry();
    entry.addBox(0, 0, 0, 1, 1, 1);
    BlockRenderer.setCustomCollisionShape(BlockID.ex_autocompressedhammer, 0, render);
    render = new ICRender.Model();
    var model = BlockRenderer.Model();
    model.addBox(0, 0, 0, 1, 1 / 16, 1, [
        ["ex_bottom", 0]
    ]);
    model.addBox(0, 15 / 16, 0, 1, 1, 1, [
        ["ex_bottom", 0]
    ]);
    model.addBox(0, 0, 0, 1 / 16, 1, 1 / 16, [
        ["ex_heavy", 0]
    ]);
    model.addBox(15 / 16, 0, 0, 1, 1, 1 / 16, [
        ["ex_heavy", 0]
    ]);
    model.addBox(0, 0, 15 / 16, 1 / 16, 1, 1, [
        ["ex_heavy", 0]
    ]);
    model.addBox(15 / 16, 0, 15 / 16, 1, 1, 1, [
        ["ex_heavy", 0]
    ]);
    model.addBox(1 / 16, 1 / 16, 1 / 16, 15 / 16, 15 / 16, 2 / 16, [
        ["glass", 0]
    ]);
    model.addBox(1 / 16, 1 / 16, 1 / 16, 2 / 16, 15 / 16, 15 / 16, [
        ["glass", 0]
    ]);
    model.addBox(1 / 16, 1 / 16, 14 / 16, 15 / 16, 15 / 16, 15 / 16, [
        ["glass", 0]
    ]);
    model.addBox(14 / 16, 1 / 16, 1 / 16, 15 / 16, 15 / 16, 15 / 16, [
        ["glass", 0]
    ]);
    render.addEntry(model);
    BlockRenderer.setStaticICRender(BlockID.ex_autocompressedhammer, 0, render);
    var AutoCompressedHammerUI = {
        standart: {
            header: {
                text: Translation.translate("Auto Hammer")
            }
        },
        drawing: [{
                type: "bitmap",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 2.3 - 2,
                y: (UIbase / 12) * 4.5 - (UIbase / 12) * 1.32 - 2,
                bitmap: "ex_sieve",
                scale: (UIbase / 170)
            }, {
                type: "bitmap",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 9.6 - 2,
                y: UIbase / 7.5 - 2,
                bitmap: "ex_energyground",
                scale: (UIbase / 170)
            }],
        elements: {
            jindu1: {
                type: "scale",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 2.3,
                y: (UIbase / 12) * 4.5 - (UIbase / 12) * 1.32,
                direction: 0,
                value: 0.5,
                bitmap: "ex_sievefull",
                scale: (UIbase / 170)
            },
            jindu2: {
                type: "scale",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 9.6,
                y: UIbase / 7.5 + 2,
                bitmap: "ex_energy",
                scale: (UIbase / 170),
                direction: 1
            },
            slot0: {
                type: "slot",
                x: (510 - UIbase * 0.49) + (UIbase / 12),
                y: (UIbase / 12) * 3.3,
                size: (UIbase / 12)
            },
            slot21: {
                type: "slot",
                x: (510 - UIbase * 0.49) + (UIbase / 12),
                y: (UIbase / 12) * 5,
                size: (UIbase / 12)
            },
            slot22: {
                type: "slot",
                x: (510 - UIbase * 0.49) + (UIbase / 12) * 2,
                y: (UIbase / 12) * 5,
                size: (UIbase / 12)
            }
        }
    };
    for (var i = 0; i < 20; i++) {
        AutoCompressedHammerUI.elements["slot" + (i + 1)] = {
            type: "slot",
            x: (510 - UIbase * 0.49) + (i % 5) * (UIbase / 12) + (UIbase / 12) * 3.7,
            y: 75 + parseInt(i / 5) * (UIbase / 12),
            size: (UIbase / 12)
        };
    };
    AutoCompressedHammerUI = new UIRegistry(AutoCompressedHammerUI);
    CompressedCore.setMachineInPut("ex_autocompressedhammer", {});
    CompressedCore.machineAdd("ex_autocompressedhammer", BlockID.compressedgravel, 0, {
        id: 12,
        count: 9,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressedhammer", BlockID.compressedsand, 0, {
        id: BlockID.ex_dust,
        count: 9,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressedhammer", BlockID.compressednetherrack, 0, {
        id: BlockID.ex_gravelNether,
        count: 9,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressedhammer", BlockID.compressednethergravel, 0, {
        id: BlockID.ex_gravelEnder,
        count: 9,
        data: 0
    });
    CompressedCore.machineAdd("ex_autocompressedhammer", BlockID.compressedcobblestone, 0, {
        id: 13,
        count: 9,
        data: 0
    });
    api.Machine.registerElectricMachine(BlockID.ex_autocompressedhammer, {
        useNetworkItemContainer: true,
        defaultValues: {
            work_time: 200,
            energy_storage: 10000,
            energy_consumption: 2,
            speed: 0,
            progress: 0
        },
        tick: function () {
            StorageInterface.checkHoppers(this);
            var input = this.container.getSlot("slot0"), st21 = this.container.getSlot("slot21"), st22 = this.container.getSlot("slot22"), recipe = CompressedCore.getMachineInPut("ex_autocompressedhammer", input.id, input.data);
            if (recipe) {
                if (this.data.energy >= this.data.energy_consumption) {
                    this.data.progress += (1 + this.data.speed) / this.data.work_time;
                    this.data.energy -= this.data.energy_consumption;
                    if (st21.count == 1) {
                        if (Math.random() * 100 < 5) {
                            st21.data++;
                        }
                    }
                    if (st22.count == 1) {
                        if (Math.random() * 100 < 5) {
                            st22.data++;
                        }
                    }
                    if (this.data.progress.toFixed(3) >= 1) {
                        this.setOutput(recipe.id, recipe.count, recipe.data);
                        input.count -= 1;
                        this.container.validateAll();
                        this.data.progress = 0;
                    }
                }
            }
            else {
                this.data.progress = 0;
            }
            var tier = this.getTier();
            var energyStorage = this.getEnergyStorage();
            this.data.energy = Math.min(this.data.energy, energyStorage);
            this.data.energy += api.ChargeRegistry.getEnergyFrom(this.container.getSlot("slotEnergy"), "Eu", energyStorage - this.data.energy, 32, tier);
            this.container.setScale("jindu1", this.data.progress);
            this.container.setScale("jindu2", this.data.energy / energyStorage);
            this.data.speed = st21.count + st22.count;
            this.container.sendChanges();
        },
        setOutput: function (id, count, data) {
            for (var slot = 1; slot < 21; slot++) {
                var output = this.container.getSlot("slot" + slot);
                if (output.id == 0 || output.id == id && output.data == data && output.count < 64) {
                    if (output.count + count > 64) {
                        var output_count = 64 - output.count;
                        output.setSlot(id, output.count + output_count, data);
                        this.setOutput(id, (output.count + count - 64) - output_count, data);
                        this.container.sendChanges();
                    }
                    else {
                        output.setSlot(id, output.count + count, data);
                        this.container.sendChanges();
                    }
                    ;
                    break;
                };
            };
        },
        getScreenByName: function () {
            return AutoCompressedHammerUI;
        },
        getScreenName: function () {
            return "AutoCompressedHammerUI";
        },
        init: function () {
            this.anim();
        },
        destroy: function () {
            if (this.ani_item) {
                this.ani_item.destroy();
            }
        },
        anim: function () {
            this.ani_item = new Animation.Item(this.x + 0.5, this.y + 0.5, this.z + 0.5);
            this.ani_item.describeItem({
                id: ItemID.ex_hammersCompressedDiamond,
                count: 1,
                data: 0,
                size: 0.5
            });
            this.ani_item.load();
        },
        getEnergyStorage: function () {
            return this.data.energy_storage;
        },
        energyReceive: api.Machine.basicEnergyReceiveFunc
    });
    StorageInterface.createInterface(BlockID.ex_autocompressedhammer, {
        slots: {
            "slot^1-20": { output: true },
            "slot0": { input: true }
        }
    });
});
IDRegistry.genBlockID("ex_auto_crafting_table");
Block.createBlock("ex_auto_crafting_table", [{
        name: "Auto Crafting Table",
        texture: [
            ["ex_side", 0],
            ["ex_compressor_top", 0],
            ["ex_side", 0],
            ["ex_side", 0],
            ["ex_side", 0],
            ["ex_side", 0]
        ],
        inCreative: true
    }]);
var auto_crafting_tableGui = {
    standart: {
        header: { text: { text: Translation.translate("Auto Crafting Table") } },
        inventory: { standart: true },
        background: { standart: true }
    },
    drawing: [
        { type: "bitmap", x: 680, y: 140, bitmap: "arrow_0", scale: 3 },
        { type: "bitmap", x: 858, y: 78, bitmap: "ex_energyground", scale: 3 }
    ],
    elements: {
        "arrowScale": { type: "scale", x: 680, y: 140, direction: 0, value: 0.5, bitmap: "arrow_1", scale: 3 },
        "energyScale": { type: "scale", x: 860, y: 80, bitmap: "ex_energy", scale: 3, direction: 1 }
    }
};
for (var i = 0; i < 9; i++) {
    auto_crafting_tableGui.elements["slot" + i] = {
        type: "slot",
        x: 400 + (i % 3) * 60,
        y: 75 + parseInt(i / 3) * 60,
        size: 60
    };
};
for (var i = 0; i < 12; i++) {
    auto_crafting_tableGui.elements["Slot" + i] = {
        type: "slot",
        x: 400 + (i % 6) * 60,
        y: 270 + parseInt(i / 6) * 60,
        size: 60
    };
};
auto_crafting_tableGui.elements["result"] = { type: "slot", x: 770, y: 135, size: 60 };
auto_crafting_tableGui = new UI.StandartWindow(auto_crafting_tableGui);
ModAPI.addAPICallback("ICore", function (api) {
    api.Machine.registerElectricMachine(BlockID.ex_auto_crafting_table, {
        useNetworkItemContainer: true,
        defaultValues: {
            worktime: 0,
            worklimit: 200,
            isWorking: false,
            energy: 0,
            energy_storage: 20000,
            decreaseCount: 0
        },
        tick: function () {
            var result = Recipes.getRecipeResult(this.container.asLegacyContainer());
            StorageInterface.checkHoppers(this);
            var resultSlot = this.container.getSlot("result");
            var recipe = Recipes.getRecipeByField(this.container.asLegacyContainer());
            var callback = recipe && recipe.getCallback();
            if (this.data.energy > 0 && !callback && this.canRun() && result && (resultSlot.id == 0 || (result.id == resultSlot.id && result.data == resultSlot.data && resultSlot.count + result.count < Item.getMaxStack(result.id)))) {
                this.data.worktime += 1;
                this.data.energy -= 4;
                if (this.data.worktime >= 200) {
                    this.data.worktime = 0;
                    resultSlot.setSlot(result.id, resultSlot.count + result.count, result.data);
                    this.decreaseItem();
                };
            };
            if (!result || !this.canRun()) {
                this.data.worktime = 0;
            };
            var energyStorage = this.getEnergyStorage();
            this.container.setScale("arrowScale", this.data.worktime / 200);
            this.container.setScale("energyScale", this.data.energy / energyStorage);
            this.container.sendChanges();
        },
        canRun: function () {
            return this.decreaseItem(true);
        },
        decreaseItem: function (bool) {
            var item = {};
            for (var slotId = 0; slotId < 9; slotId++) {
                var slot = this.container.getSlot("slot" + slotId);
                if (slot.id != 0) {
                    if (!item[slot.id + ":" + slot.data]) {
                        item[slot.id + ":" + slot.data] = 0;
                        item[slot.id + ":" + slot.data]++;
                    }
                    else if (item[slot.id + ":" + slot.data]) {
                        item[slot.id + ":" + slot.data]++;
                    }
                    ;
                };
            };
            return this.setInputSlot(bool, item);
        },
        setInputSlot: function (bool, item) {
            var vitem = {};
            for (var slotId = 0; slotId < 12; slotId++) {
                var inputSlot = this.container.getSlot("Slot" + slotId);
                for (var group in item) {
                    var id = group.split(":")[0];
                    var data = group.split(":")[1];
                    if (inputSlot.id == id && inputSlot.data == data && inputSlot.id != 0) {
                        if (!vitem[group]) {
                            vitem[group] = 0;
                            vitem[group] += inputSlot.count;
                        }
                        else if (vitem[group]) {
                            vitem[group] += inputSlot.count;
                        }
                        ;
                    }
                    ;
                };
            };
            var boolean = false;
            for (var group in item) {
                if (vitem[group] >= item[group]) {
                    boolean = true;
                }
                else {
                    boolean = false;
                };
            };
            if (boolean && !bool) {
                for (var group in item) {
                    var id = group.split(":")[0];
                    var data = group.split(":")[1];
                    this.setInputSlotCount(id, data, item[group]);
                };
            };
            return boolean;
        },
        setInputSlotCount: function (id, data, count) {
            for (var slotid = 0; slotid < 12; slotid++) {
                var slot = this.container.getSlot("Slot" + slotid);
                if (slot.id == id && slot.data == data && slot.count > 0) {
                    (slot.count - 1 == 0) ? slot.setSlot(0, 0, 0) : slot.setSlot(id, slot.count - 1, data);
                    this.data.decreaseCount += 1;
                    break;
                };
            };
            if (this.data.decreaseCount < count) {
                this.setInputSlotCount(id, data, count);
            }
            else {
                this.data.decreaseCount = 0;
            };
        },
        getEnergyStorage: function () {
            return this.data.energy_storage;
        },
        energyReceive: api.Machine.basicEnergyReceiveFunc,
        getScreenByName: function (screenName) {
            return auto_crafting_tableGui;
        },
        getScreenName: function (screenName) {
            return "auto_crafting_tableGui";
        }
    });
    StorageInterface.createInterface(BlockID.ex_auto_crafting_table, {
        slots: {
            "Slot^0-11": { input: true },
            "result": { output: true }
        }
    });
});
ToolType.crook = {
    isWeapon: false,
    damage: 1,
    baseDamage: 0,
    blockTypes: ["plant", "fibre", "fiber"],
    calcDestroyTime: function (item, coords, block, params, destroyTime, enchant) {
        if (block.id == 18 || block.id == 161) {
            return 0.2;
        }
        else {
            return destroyTime;
        }
    }
};
IDRegistry.genItemID("ex_crookwriter");
Item.createItem("ex_crookwriter", "Author Crook", {
    name: "enr_Crook",
    meta: 0
}, {
    stack: 1
});
IDRegistry.genItemID("ex_crookWood");
Item.createItem("ex_crookWood", "Wooden Crook", {
    name: "enr_Crook",
    meta: 0
}, {
    stack: 1
});
IDRegistry.genItemID("ex_crookBone");
Item.createItem("ex_crookBone", "Bone Crook", {
    name: "enr_Crook",
    meta: 1
}, {
    stack: 1
});
IDRegistry.genItemID("ex_crookReed");
Item.createItem("ex_crookReed", "Sugarcane Crook", {
    name: "enr_Crook",
    meta: 2
}, {
    stack: 1
});
IDRegistry.genItemID("ex_crookHay");
Item.createItem("ex_crookHay", "Hay Crook", {
    name: "enr_Crook",
    meta: 3
}, {
    stack: 1
});
IDRegistry.genItemID("ex_crookGold");
Item.createItem("ex_crookGold", "Gold Crook", {
    name: "enr_Crook",
    meta: 4
}, {
    stack: 1
});
Item.addCreativeGroup("crook", Translation.translate("Crooks"), [ItemID["ex_crookwriter"], ItemID["ex_crookWood"], ItemID["ex_crookBone"], ItemID["ex_crookReed"], ItemID["ex_crookHay"], ItemID["ex_crookGold"],]);
ToolAPI.setTool(ItemID.ex_crookWood, {
    durability: 60,
    level: 1,
    efficiency: 1,
    damage: 2
}, ToolType.crook);
ToolAPI.setTool(ItemID.ex_crookBone, {
    durability: 90,
    level: 1,
    efficiency: 1,
    damage: 3
}, ToolType.crook);
ToolAPI.setTool(ItemID.ex_crookReed, {
    durability: 45,
    level: 1,
    efficiency: 2,
    damage: 2
}, ToolType.crook);
ToolAPI.setTool(ItemID.ex_crookHay, {
    durability: 110,
    level: 1,
    efficiency: 3,
    damage: 2
}, ToolType.crook);
ToolAPI.setTool(ItemID.ex_crookGold, {
    durability: 30,
    level: 1,
    efficiency: 12,
    damage: 2
}, ToolType.crook);
Callback.addCallback("DestroyBlock", function (coords, block, player) {
    if (block.id == 18 || block.id == 161) {
        Callback.invokeCallback("DestroyBlock_hook", coords, block, player);
    }
});
Callback.addCallback("DestroyBlock_hook", function (coords, block, player) {
    var item = Entity.getCarriedItem(player);
    var blockSource = BlockSource.getDefaultForActor(player);
    var x = coords.x, y = coords.y, z = coords.z;
    if (block.id != 18)
        return;
    if (item.id == ItemID.ex_crookWood || item.id == ItemID.ex_crookBone) {
        if (block.data == 0 || block.data == 4) {
            (Math.random() * 100 < 12) && blockSource.spawnDroppedItem(x, y, z, 6, 1, 0);
            (Math.random() * 100 < 6) && blockSource.spawnDroppedItem(x, y, z, 260, 1, 0);
            (Math.random() * 100 < 2) && blockSource.spawnDroppedItem(x, y, z, ItemID.ex_silkWorm, 1, 0);
        };
        if (block.data == 1 || block.data == 5) {
            (Math.random() * 100 < 12) && blockSource.spawnDroppedItem(x, y, z, 6, 1, 1);
            (Math.random() * 100 < 6) && blockSource.spawnDroppedItem(x, y, z, 6, 2, 1);
            (Math.random() * 100 < 2) && blockSource.spawnDroppedItem(x, y, z, ItemID.ex_silkWorm, 1, 0);
        };
        if (block.data == 2 || block.data == 6) {
            (Math.random() * 100 < 12) && blockSource.spawnDroppedItem(x, y, z, 6, 1, 2);
            (Math.random() * 100 < 6) && blockSource.spawnDroppedItem(x, y, z, 260, 1, 0);
            (Math.random() * 100 < 2) && blockSource.spawnDroppedItem(x, y, z, ItemID.ex_silkWorm, 1, 0);
        }
        if (block.data == 3 || block.data == 7) {
            (Math.random() * 100 < 12) && blockSource.spawnDroppedItem(x, y, z, 6, 1, 3);
            (Math.random() * 100 < 1) && blockSource.spawnDroppedItem(x, y, z, 106, 1, 0);
            (Math.random() * 100 < 2) && blockSource.spawnDroppedItem(x, y, z, ItemID.ex_silkWorm, 1, 0);
        }
    }
    if (item.id == ItemID.ex_crookGold) {
        if (block.data == 0 || block.data == 4) {
            (Math.random() * 100 < 20) && blockSource.spawnDroppedItem(x, y, z, 6, 1, 0);
            (Math.random() * 100 < 14) && blockSource.spawnDroppedItem(x, y, z, 260, 1, 0);
            (Math.random() * 100 < 10) && blockSource.spawnDroppedItem(x, y, z, ItemID.ex_silkWorm, 1, 0);
        }
        if (block.data == 3 || block.data == 7) {
            (Math.random() * 100 < 20) && blockSource.spawnDroppedItem(x, y, z, 6, 1, 3);
            (Math.random() * 100 < 9) && blockSource.spawnDroppedItem(x, y, z, 106, 1, 0);
            (Math.random() * 100 < 10) && blockSource.spawnDroppedItem(x, y, z, ItemID.ex_silkWorm, 1, 0);
        }
        if (block.data == 1 || block.data == 5) {
            (Math.random() * 100 < 20) && blockSource.spawnDroppedItem(x, y, z, 6, 1, 1);
            (Math.random() * 100 < 14) && blockSource.spawnDroppedItem(x, y, z, 6, 2, 1);
            (Math.random() * 100 < 10) && blockSource.spawnDroppedItem(x, y, z, ItemID.ex_silkWorm, 1, 0);
        }
        if (block.data == 2 || block.data == 6) {
            (Math.random() * 100 < 20) && blockSource.spawnDroppedItem(x, y, z, 6, 1, 2);
            (Math.random() * 100 < 14) && blockSource.spawnDroppedItem(x, y, z, 260, 1, 0);
            (Math.random() * 100 < 10) && blockSource.spawnDroppedItem(x, y, z, ItemID.ex_silkWorm, 1, 0);
        }
    }
    if (item.id == ItemID.ex_crookHay || item.id == ItemID.ex_crookReed) {
        if (block.data == 0 || block.data == 4) {
            (Math.random() * 100 < 15) && blockSource.spawnDroppedItem(x, y, z, 6, 1, 0);
            (Math.random() * 100 < 9) && blockSource.spawnDroppedItem(x, y, z, 260, 1, 0);
            (Math.random() * 100 < 5) && blockSource.spawnDroppedItem(x, y, z, ItemID.ex_silkWorm, 1, 0);
        }
        if (block.data == 1 || block.data == 5) {
            (Math.random() * 100 < 15) && blockSource.spawnDroppedItem(x, y, z, 6, 1, 1);
            (Math.random() * 100 < 9) && blockSource.spawnDroppedItem(x, y, z, 6, 2, 1);
            (Math.random() * 100 < 5) && blockSource.spawnDroppedItem(x, y, z, ItemID.ex_silkWorm, 1, 0);
        }
        if (block.data == 2 || block.data == 6) {
            (Math.random() * 100 < 15) && blockSource.spawnDroppedItem(x, y, z, 6, 1, 2);
            (Math.random() * 100 < 9) && blockSource.spawnDroppedItem(x, y, z, 260, 1, 0);
            (Math.random() * 100 < 5) && blockSource.spawnDroppedItem(x, y, z, ItemID.ex_silkWorm, 1, 0);
        }
        if (block.data == 3 || block.data == 7) {
            (Math.random() * 100 < 15) && blockSource.spawnDroppedItem(x, y, z, 6, 1, 3);
            (Math.random() * 100 < 4) && blockSource.spawnDroppedItem(x, y, z, 106, 1, 0);
            (Math.random() * 100 < 5) && blockSource.spawnDroppedItem(x, y, z, ItemID.ex_silkWorm, 1, 0);
        }
    }
});
Callback.addCallback("DestroyBlock_hook", function (coords, block, player) {
    var item = Entity.getCarriedItem(player);
    var blockSource = BlockSource.getDefaultForActor(player);
    var x = coords.x, y = coords.y, z = coords.z;
    if (block.id != 161)
        return;
    if (item.id == ItemID.ex_crookWood || item.id == ItemID.ex_crookBone) {
        if (block.data == 0) {
            (Math.random() * 100 < 12) && blockSource.spawnDroppedItem(x, y, z, 6, 1, 4);
            (Math.random() * 100 < 2) && blockSource.spawnDroppedItem(x, y, z, ItemID.ex_silkWorm, 1, 0);
        };
        if (block.data == 1 || block.data == 5) {
            (Math.random() * 100 < 12) && blockSource.spawnDroppedItem(x, y, z, 6, 1, 5);
            (Math.random() * 100 < 9) && blockSource.spawnDroppedItem(x, y, z, 260, 1, 0);
            (Math.random() * 100 < 2) && blockSource.spawnDroppedItem(x, y, z, ItemID.ex_silkWorm, 1, 0);
        };
    };
    if (item.id == ItemID.ex_crookGold) {
        if (data == 0) {
            (Math.random() * 100 < 20) && blockSource.spawnDroppedItem(x, y, z, 6, 1, 4);
            (Math.random() * 100 < 10) && blockSource.spawnDroppedItem(x, y, z, ItemID.ex_silkWorm, 1, 0);
        }
        if (data == 1 || data == 5) {
            (Math.random() * 100 < 20) && blockSource.spawnDroppedItem(x, y, z, 6, 1, 5);
            (Math.random() * 100 < 17) && blockSource.spawnDroppedItem(x, y, z, 260, 1, 0);
            (Math.random() * 100 < 10) && blockSource.spawnDroppedItem(x, y, z, ItemID.ex_silkWorm, 1, 0);
        };
    };
    if (item.id == ItemID.ex_crookHay || item.id == ItemID.ex_crookReed) {
        if (data == 0) {
            (Math.random() * 100 < 15) && blockSource.spawnDroppedItem(x, y, z, 6, 1, 4);
            (Math.random() * 100 < 5) && blockSource.spawnDroppedItem(x, y, z, ItemID.ex_silkWorm, 1, 0);
        }
        if (data == 1 || data == 5) {
            (Math.random() * 100 < 15) && blockSource.spawnDroppedItem(x, y, z, 6, 1, 5);
            (Math.random() * 100 < 12) && blockSource.spawnDroppedItem(x, y, z, 260, 1, 0);
            (Math.random() * 100 < 5) && blockSource.spawnDroppedItem(x, y, z, ItemID.ex_silkWorm, 1, 0);
        };
    };
});
Item.registerUseFunction("ex_crookwriter", function (coords, item, block, player) {
    var blockSource = BlockSource.getDefaultForActor(player);
    Debug.message("ID:" + blockSource.getBlockId(coords.x, coords.y, coords.z));
    Debug.message("DATA:" + blockSource.getBlockData(coords.x, coords.y, coords.z));
    //	Debug.message(World.getTileEntity(coords.x, coords.y, coords.z,blockSource))
    //	Debug.message(World.getTileEntity(coords.x, coords.y, coords.z,blockSource).getTransportSlots)
});
ToolType.pickaxe = {
    damage: 2,
    blockTypes: ["stone", "dirt"],
    onAttack: function (item) {
        if (item.data > Item.getMaxDamage(item.id)) {
            item.id = item.data = item.count = 0;
        }
    }
};
EXCore.registerHammer("Wood", "enr_hammers_Wood", 0);
EXCore.registerHammer("Stone", "enr_hammers_Stone", 0);
EXCore.registerHammer("Iron", "enr_hammers_Iron", 0);
EXCore.registerHammer("Gold", "enr_hammers_Gold", 0);
EXCore.registerHammer("Diamond", "enr_hammers_Diamond", 0);
EXCore.registerHammer("Copper", "enr_hammers_Copper", 0);
EXCore.registerHammer("Tin", "enr_hammers_Tin", 0);
EXCore.registerHammer("Lead", "enr_hammers_Lead", 0);
EXCore.registerHammer("Silver", "enr_hammers_Silver", 0);
EXCore.registerHammer("Platinum", "enr_hammers_Platinum", 0);
EXCore.registerHammer("Aluminum", "enr_hammers_Aluminum", 0);
EXCore.registerHammer("Invar", "enr_hammers_Invar", 0);
EXCore.registerHammer("Nickel", "enr_hammers_Nickel", 0);
ToolAPI.setTool(ItemID.ex_hammersWood, {
    durability: 60,
    level: 1,
    efficiency: 2,
    damage: 2
}, ToolType.pickaxe);
ToolAPI.setTool(ItemID.ex_hammersStone, {
    durability: 132,
    level: 2,
    efficiency: 3,
    damage: 3
}, ToolType.pickaxe);
ToolAPI.setTool(ItemID.ex_hammersIron, {
    durability: 251,
    level: 3,
    efficiency: 6,
    damage: 4
}, ToolType.pickaxe);
ToolAPI.setTool(ItemID.ex_hammersGold, {
    durability: 33,
    level: 1,
    efficiency: 12,
    damage: 2
}, ToolType.pickaxe);
ToolAPI.setTool(ItemID.ex_hammersDiamond, {
    durability: 1562,
    level: 4,
    efficiency: 8,
    damage: 5
}, ToolType.pickaxe);
ToolAPI.setTool(ItemID.ex_hammersCopper, {
    durability: 175,
    level: 1,
    efficiency: 4,
    damage: 1
}, ToolType.pickaxe);
ToolAPI.setTool(ItemID.ex_hammersTin, {
    durability: 200,
    level: 1,
    efficiency: 5,
    damage: 1
}, ToolType.pickaxe);
ToolAPI.setTool(ItemID.ex_hammersSilver, {
    durability: 200,
    level: 2,
    efficiency: 6,
    damage: 2
}, ToolType.pickaxe);
ToolAPI.setTool(ItemID.ex_hammersLead, {
    durability: 150,
    level: 1,
    efficiency: 5,
    damage: 1
}, ToolType.pickaxe);
ToolAPI.setTool(ItemID.ex_hammersAluminum, {
    durability: 225,
    level: 1,
    efficiency: 10,
    damage: 1
}, ToolType.pickaxe);
ToolAPI.setTool(ItemID.ex_hammersNickel, {
    durability: 300,
    level: 2,
    efficiency: 6,
    damage: 2
}, ToolType.pickaxe);
ToolAPI.setTool(ItemID.ex_hammersPlatinum, {
    durability: 1700,
    level: 4,
    efficiency: 9,
    damage: 4
}, ToolType.pickaxe);
ToolAPI.setTool(ItemID.ex_hammersInvar, {
    durability: 450,
    level: 2,
    efficiency: 7,
    damage: 3
}, ToolType.pickaxe);
Callback.addCallback("PostLoaded", function () {
    EXCore.transformation(VanillaBlockID.cobblestone, VanillaBlockID.gravel, 1, 0);
    EXCore.transformation(VanillaBlockID.gravel, VanillaBlockID.sand, 1, 0);
    EXCore.transformation(VanillaBlockID.sand, BlockID.ex_dust, 1, 0);
    EXCore.transformation(VanillaBlockID.log, ItemID.ex_dustSaw, 4, 0);
    EXCore.transformation(VanillaBlockID.log2, ItemID.ex_dustSaw, 4, 0);
});
ModAPI.addAPICallback("ENR", function (api) {
    IDRegistry.genItemID("doublecompresseddiamondhammer");
    Item.createItem("doublecompresseddiamondhammer", "Double Compressed Diamond Hammer", {
        name: "ex_double_compressed_diamond_hammer",
        meta: 0
    });
    IDRegistry.genItemID("ex_hammersoresmasher");
    Item.createItem("ex_hammersoresmasher", "Ore Smasher", {
        name: "ex_ore_smasher",
        meta: 0
    });
    api.EX.addHammer(ItemID.ex_hammersoresmasher);
    api.EX.registerHammer("CompressedWood", "ex_compressed_hammer_wood", 0);
    api.EX.registerHammer("CompressedStone", "ex_compressed_hammer_stone", 0);
    api.EX.registerHammer("CompressedIron", "ex_compressed_hammer_iron", 0);
    api.EX.registerHammer("CompressedGold", "ex_compressed_hammer_gold", 0);
    api.EX.registerHammer("CompressedDiamond", "ex_compressed_hammer_diamond", 0);
    CompressedCore.addHammer(ItemID.ex_hammersCompressedWood);
    CompressedCore.addHammer(ItemID.ex_hammersCompressedStone);
    CompressedCore.addHammer(ItemID.ex_hammersCompressedIron);
    CompressedCore.addHammer(ItemID.ex_hammersCompressedGold);
    CompressedCore.addHammer(ItemID.ex_hammersCompressedDiamond);
    ToolAPI.setTool(ItemID.ex_hammersCompressedWood, {
        durability: 540,
        level: 1,
        efficiency: 2,
        damage: 2
    }, ToolType.CompressedHammer);
    ToolAPI.setTool(ItemID.ex_hammersCompressedStone, {
        durability: 1188,
        level: 2,
        efficiency: 3,
        damage: 3
    }, ToolType.CompressedHammer);
    ToolAPI.setTool(ItemID.ex_hammersCompressedIron, {
        durability: 2259,
        level: 3,
        efficiency: 6,
        damage: 4
    }, ToolType.CompressedHammer);
    ToolAPI.setTool(ItemID.ex_hammersCompressedGold, {
        durability: 297,
        level: 1,
        efficiency: 12,
        damage: 2
    }, ToolType.CompressedHammer);
    ToolAPI.setTool(ItemID.ex_hammersCompressedDiamond, {
        durability: 14058,
        level: 4,
        efficiency: 8,
        damage: 5
    }, ToolType.CompressedHammer);
    ToolAPI.setTool(ItemID.ex_hammersoresmasher, {
        durability: 2000,
        level: 4,
        efficiency: 8,
        damage: 5
    }, ToolType.CompressedHammer);
    CompressedCore.transformation(BlockID.compressedcobblestone, 13, 9, 0);
    CompressedCore.transformation(BlockID.compressedgravel, 12, 9, 0);
    CompressedCore.transformation(BlockID.compressedsand, BlockID.ex_dust, 9, 0);
    CompressedCore.transformation(BlockID.compressednetherrack, BlockID.ex_gravelNether, 9, 0);
    CompressedCore.transformation(BlockID.compressedendstone, BlockID.ex_gravelEnder, 9, 0);
    function searchItem(player, id) {
        for (var i = 9; i < 45; i++) {
            if (new PlayerEntity(player).getInventorySlot(i).id == id) {
                return {
                    id: new PlayerEntity(player).getInventorySlot(i).id,
                    data: new PlayerEntity(player).getInventorySlot(i).data,
                    extra: new PlayerEntity(player).getInventorySlot(i).extra,
                    count: new PlayerEntity(player).getInventorySlot(i).count,
                    slot: i
                };
            };
        };
    };
    function set(x, y, z, ID, id, player) {
        var blockSource = BlockSource.getDefaultForActor(player);
        var block = blockSource.getBlock(x, y, z)["id"];
        if (block == 0 || block == 9 || block == 11) {
            var item = searchItem(player, id);
            if (!item || item.count < 4)
                return;
            new PlayerEntity(player).setInventorySlot(item.slot, id, item.count - 4, 0);
            blockSource.setBlock(x, y, z, ID, 0);
            if (item.count <= 0) {
                new PlayerEntity(player).setInventorySlot(item.slot, 0, 0, 0);
            };
        };
    };
    Item.registerUseFunction("ex_hammersoresmasher", function (coords, item, b, player) {
        var x = coords.relative.x;
        y = coords.relative.y;
        z = coords.relative.z;
        set(x, y, z, BlockID.ex_Irongravel, ItemID.ex_Ironbroken, player);
        set(x, y, z, BlockID.ex_Goldgravel, ItemID.ex_Goldbroken, player);
        set(x, y, z, BlockID.ex_Coppergravel, ItemID.ex_Copperbroken, player);
        set(x, y, z, BlockID.ex_Tingravel, ItemID.ex_Tinbroken, player);
        set(x, y, z, BlockID.ex_Leadgravel, ItemID.ex_Leadbroken, player);
        set(x, y, z, BlockID.ex_Silvergravel, ItemID.ex_Silverbroken, player);
        set(x, y, z, BlockID.ex_Platinumgravel, ItemID.ex_Platinumbroken, player);
        set(x, y, z, BlockID.ex_Aluminumgravel, ItemID.ex_Aluminumbroken, player);
        set(x, y, z, BlockID.ex_Nickelgravel, ItemID.ex_Nickelbroken, player);
        set(x, y, z, BlockID.ex_Ironsand, ItemID.ex_Ironcrushed, player);
        set(x, y, z, BlockID.ex_Goldsand, ItemID.ex_Goldcrushed, player);
        set(x, y, z, BlockID.ex_Coppersand, ItemID.ex_Coppercrushed, player);
        set(x, y, z, BlockID.ex_Tinsand, ItemID.ex_Tincrushed, player);
        set(x, y, z, BlockID.ex_Leadsand, ItemID.ex_Leadcrushed, player);
        set(x, y, z, BlockID.ex_Silversand, ItemID.ex_Silvercrushed, player);
        set(x, y, z, BlockID.ex_Platinumsand, ItemID.ex_Platinumcrushed, player);
        set(x, y, z, BlockID.ex_Aluminumsand, ItemID.ex_Aluminumcrushed, player);
        set(x, y, z, BlockID.ex_Nickelsand, ItemID.ex_Nickelcrushed, player);
        set(x, y, z, BlockID.ex_Irondust, ItemID.ex_Ironpowered, player);
        set(x, y, z, BlockID.ex_Golddust, ItemID.ex_Goldpowered, player);
        set(x, y, z, BlockID.ex_Copperdust, ItemID.ex_Copperpowered, player);
        set(x, y, z, BlockID.ex_Tindust, ItemID.ex_Tinpowered, player);
        set(x, y, z, BlockID.ex_Leaddust, ItemID.ex_Leadpowered, player);
        set(x, y, z, BlockID.ex_Silverdust, ItemID.ex_Silverpowered, player);
        set(x, y, z, BlockID.ex_Platinumdust, ItemID.ex_Platinumpowered, player);
        set(x, y, z, BlockID.ex_Aluminumdust, ItemID.ex_Aluminumpowered, player);
        set(x, y, z, BlockID.ex_Nickeldust, ItemID.ex_Nickelpowered, player);
        set(x, y, z, BlockID.ex_netherIrongravel, ItemID.ex_netherIronbroken, player);
        set(x, y, z, BlockID.ex_netherGoldgravel, ItemID.ex_netherGoldbroken, player);
        set(x, y, z, BlockID.ex_netherCoppergravel, ItemID.ex_netherCopperbroken, player);
        set(x, y, z, BlockID.ex_netherTingravel, ItemID.ex_netherTinbroken, player);
        set(x, y, z, BlockID.ex_netherLeadgravel, ItemID.ex_netherLeadbroken, player);
        set(x, y, z, BlockID.ex_netherSilvergravel, ItemID.ex_netherSilverbroken, player);
        set(x, y, z, BlockID.ex_netherPlatinumgravel, ItemID.ex_netherPlatinumbroken, player);
        set(x, y, z, BlockID.ex_netherAluminumgravel, ItemID.ex_netherAluminumbroken, player);
        set(x, y, z, BlockID.ex_netherNickelgravel, ItemID.ex_netherNickelbroken, player);
        set(x, y, z, BlockID.ex_enderIrongravel, ItemID.ex_enderIronbroken, player);
        set(x, y, z, BlockID.ex_enderGoldgravel, ItemID.ex_enderGoldbroken, player);
        set(x, y, z, BlockID.ex_enderCoppergravel, ItemID.ex_enderCopperbroken, player);
        set(x, y, z, BlockID.ex_enderTingravel, ItemID.ex_enderTinbroken, player);
        set(x, y, z, BlockID.ex_enderLeadgravel, ItemID.ex_enderLeadbroken, player);
        set(x, y, z, BlockID.ex_enderSilvergravel, ItemID.ex_enderSilverbroken, player);
        set(x, y, z, BlockID.ex_enderPlatinumgravel, ItemID.ex_enderPlatinumbroken, player);
        set(x, y, z, BlockID.ex_enderAluminumgravel, ItemID.ex_enderAluminumbroken, player);
        set(x, y, z, BlockID.ex_enderNickelgravel, ItemID.ex_enderNickelbroken, player);
    });
});
IDRegistry.genItemID("ex_bucketPorcelainRaw");
Item.createItem("ex_bucketPorcelainRaw", "Unfired Bucket", { name: "enr_bucketPorcelainRaw", meta: 0 }, { stack: 16 });
IDRegistry.genItemID("ex_bucketPorcelainEmpty");
Item.createItem("ex_bucketPorcelainEmpty", "Bucket", { name: "enr_bucketPorcelainEmpty", meta: 0 }, { stack: 16 });
IDRegistry.genItemID("ex_bucketPorcelainWater");
Item.createItem("ex_bucketPorcelainWater", "Water Bucket", { name: "enr_bucketPorcelainWater", meta: 0 }, { stack: 1 });
IDRegistry.genItemID("ex_bucketPorcelainLava");
Item.createItem("ex_bucketPorcelainLava", "Lava Bucket", { name: "enr_bucketPorcelainLava", meta: 0 }, { stack: 1 });
LiquidRegistry.registerItem("water", { id: ItemID.ex_bucketPorcelainEmpty, data: 0 }, { id: ItemID.ex_bucketPorcelainWater, data: 0 });
LiquidRegistry.registerItem("lava", { id: ItemID.ex_bucketPorcelainEmpty, data: 0 }, { id: ItemID.ex_bucketPorcelainLava, data: 0 });
BcuketRegister.registerAll(ItemID.ex_bucketPorcelainEmpty, ItemID.ex_bucketPorcelainWater, 8, function (blockID) {
    if (blockID == 0 || blockID > 7 && blockID < 12)
        return true;
}, function (blockID, block) {
    if (block.id == 8 || (block.id == 9 && block.data == 0))
        return true;
});
BcuketRegister.registerAll(ItemID.ex_bucketPorcelainEmpty, ItemID.ex_bucketPorcelainLava, 10, function (blockID) {
    if (blockID == 0 || blockID > 7 && blockID < 12)
        return true;
}, function (blockID, block) {
    if (block.id == 10 || (block.id == 11 && block.data == 0))
        return true;
});
var ExSeeds = {
    seeds_data: {},
    registryAsSet: function (ID, name, texture, object) {
        IDRegistry.genItemID(ID, name, texture, object);
        Item.createItem(ID, name, {
            name: texture,
            meta: 0
        });
        this.seeds_data[ID] = object;
        Item.addCreativeGroup("seeds", Translation.translate("Seeds"), [ItemID[ID]]);
    }
};
ExSeeds.registryAsSet("ex_seedsOak", "Acorn", "ex_seedsOak", {
    id: VanillaTileID.sapling,
    data: 0
});
ExSeeds.registryAsSet("ex_seedsSpruce", "Spruce Seed", "ex_seedsSpruce", {
    id: VanillaTileID.sapling,
    data: 1
});
ExSeeds.registryAsSet("ex_seedsBirch", "Birch Seed", "ex_seedsBirch", {
    id: VanillaTileID.sapling,
    data: 2
});
ExSeeds.registryAsSet("ex_seedsJungle", "Exotic Seed", "ex_seedsJungle", {
    id: VanillaTileID.sapling,
    data: 3
});
ExSeeds.registryAsSet("ex_seedsAcacia", "Acacia Seeds", "ex_seedsAcacia", {
    id: VanillaTileID.sapling,
    data: 4
});
ExSeeds.registryAsSet("ex_seedsDarkOak", "Dark Acorn", "ex_seedsDarkOak", {
    id: VanillaTileID.sapling,
    data: 5
});
ExSeeds.registryAsSet("ex_seedsCarrot", "Carrot Seeds", "ex_seedsCarrot", {
    id: VanillaTileID.carrots,
    data: 0
});
ExSeeds.registryAsSet("ex_seedsPotato", "Potato Seeds", "ex_seedsPotato", {
    id: VanillaTileID.potatoes,
    data: 0
});
ExSeeds.registryAsSet("ex_seedsBamboo", "Bamboo Seeds", "ex_seedsBamboo", {
    id: VanillaTileID.bamboo_sapling,
    data: 0
});
ExSeeds.registryAsSet("ex_seedsBerries", "Berries Seeds", "ex_seedsBerries", {
    id: VanillaTileID.sweet_berry_bush,
    data: 0
});
IDRegistry.genItemID("ex_seedsGrass");
Item.createItem("ex_seedsGrass", "Grass Seeds", {
    name: "ex_seedsGrass",
    meta: 0
});
IDRegistry.genItemID("ex_seedsCactus");
Item.createItem("ex_seedsCactus", "Cactus Seeds", {
    name: "ex_seedsCactus",
    meta: 0
});
IDRegistry.genItemID("ex_seedsCanes");
Item.createItem("ex_seedsCanes", "Sugarcane Seeds", {
    name: "ex_seedsCanes",
    meta: 0
});
IDRegistry.genItemID("ex_spores");
Item.createItem("ex_spores", "Spores", {
    name: "ex_spores",
    meta: 0
});
IDRegistry.genItemID("ex_seedsChorus");
Item.createItem("ex_seedsChorus", "Chorus Seeds", {
    name: "ex_seedsChorus",
    meta: 0
});
Item.addCreativeGroup("seeds", Translation.translate("Seeds"), [
    ItemID["ex_seedsGrass"],
    ItemID["ex_seedsOak"],
    ItemID["ex_seedsJungle"],
    ItemID["ex_seedsDarkOak"],
    ItemID["ex_seedsBirch"],
    ItemID["ex_seedsSpruce"],
    ItemID["ex_seedsAcacia"],
    ItemID["ex_seedsPotato"],
    ItemID["ex_seedsCarrot"],
    ItemID["ex_seedsCactus"],
    ItemID["ex_seedsCanes"],
    ItemID["ex_spores"],
    ItemID["ex_seedsChorus"],
    ItemID["ex_seedsBamboo"],
    ItemID["ex_seedsBerries"]
]);
Callback.addCallback("ItemUse", function (coords, item, block, isExternal, player) {
    var blockSource = BlockSource.getDefaultForActor(player);
    var x = coords.x;
    var y = coords.y;
    var z = coords.z;
    var ID = blockSource.getBlock(x, y, z).id;
    if (blockSource.getBlock(x, y + 1, z).id != 0)
        return;
    if (coords.side != 1)
        return;
    if (ID == 2 || ID == 3) {
        if (item.id == ItemID.ex_seedsGrass && blockSource.getBlock(x, y, z).id == 3) {
            SoundManager.playSoundAtEntity(player, "sieve.ogg");
            blockSource.setBlock(x, y, z, 2, 0);
            new PlayerEntity(player).setCarriedItem(item.id, item.count - 1, item.data);
        }
        for (var key in ExSeeds.seeds_data) {
            if (item.id == ItemID[key]) {
                SoundManager.playSoundAtEntity(player, "sieve.ogg");
                blockSource.setBlock(x, y + 1, z, ExSeeds.seeds_data[key].id, ExSeeds.seeds_data[key].data);
                new PlayerEntity(player).setCarriedItem(item.id, item.count - 1, item.data);
            }
        }
    }
    if (ID == 60) {
        for (var key in ExSeeds.seeds_data) {
            if (item.id == ItemID[key]) {
                blockSource.setBlock(x, y + 1, z, ExSeeds.seeds_data[key].id, ExSeeds.seeds_data[key].data);
                new PlayerEntity(player).setCarriedItem(item.id, item.count - 1, item.data);
            }
        }
    }
    if (item.id == ItemID.ex_seedsCanes) {
        if (ID == 2 || ID == 3 || ID == 12) {
            blockSource.setBlock(x, y + 1, z, 83, 0);
            new PlayerEntity(player).setCarriedItem(item.id, item.count - 1, item.data);
        }
    }
    if (item.id == ItemID.ex_spores) {
        if (ID == 2 || ID == 3) {
            blockSource.setBlock(x, y, z, 110, 1);
            new PlayerEntity(player).setCarriedItem(item.id, item.count - 1, item.data);
        }
    }
    if (item.id == ItemID.ex_seedsCactus) {
        if (ID == 12) {
            blockSource.setBlock(x, y + 1, z, 81, 0);
            new PlayerEntity(player).setCarriedItem(item.id, item.count - 1, item.data);
        }
    }
    if (item.id == ItemID.ex_seedsChorus) {
        if (ID == 121) {
            blockSource.setBlock(x, y + 1, z, BlockID.ex_chorusSprout, 0);
            new PlayerEntity(player).setCarriedItem(item.id, item.count - 1, item.data);
        }
    }
});
IDRegistry.genItemID("ex_silkWorm");
Item.createItem("ex_silkWorm", "Silkworm", { name: "enr_SilkWorm", meta: 0 });
IDRegistry.genItemID("ex_cookedSilkWorm");
Item.createFoodItem("ex_cookedSilkWorm", "Cooked Silkworm", { name: "enr_CookedSilkWorm", meta: 0 }, { food: 1 });
Item.registerIconOverrideFunction(ItemID.ex_silkWorm, function (item, name) {
    return {
        name: "enr_SilkWorm",
        meta: Math.floor(Math.random() * 8)
    };
});
Item.registerUseFunction("ex_silkWorm", function (coords, item, block, player) {
    var id = block.id;
    var data = block.data;
    var blockSource = BlockSource.getDefaultForActor(player);
    switch (id) {
        case 18:
            switch (data) {
                case 0:
                case 1:
                case 2:
                case 3:
                case 4:
                case 5:
                case 6:
                case 7:
                    new PlayerEntity(player).setCarriedItem(item.id, item.count - 1, item.data);
                    blockSource.setBlock(coords.x, coords.y, coords.z, LeafGroup[18][data]);
                    TileEntity.addTileEntity(coords.x, coords.y, coords.z);
                    break;
            };
            break;
        case 161:
            switch (data) {
                case 0:
                case 1:
                case 2:
                case 3:
                    new PlayerEntity(player).setCarriedItem(item.id, item.count - 1, item.data);
                    blockSource.setBlock(coords.x, coords.y, coords.z, LeafGroup[161][data]);
                    TileEntity.addTileEntity(coords.x, coords.y, coords.z);
            };
            break;
    }
});
IDRegistry.genItemID("ex_ash");
Item.createItem("ex_ash", "Ash", { name: "enr_ash", meta: 0 });
IDRegistry.genItemID("ex_porcelain");
Item.createItem("ex_porcelain", "Porcelain Clay", { name: "enr_porcelain", meta: 0 });
IDRegistry.genItemID("ex_stoneSmall");
Item.createItem("ex_stoneSmall", "Small Stone", { name: "enr_stoneSmall", meta: 0 });
// var __itemMesh = ItemModel.getFor(ItemID.ex_ash, 0).getItemRenderMesh(1, false);
// var __itemuiMesh = ItemModel.getFor(ItemID.ex_ash, 0).getItemRenderMesh(1, false);
// __itemMesh.rotate(0,0,0,0, 0.89, -0.4);
// __itemMesh.translate(0.11, 0.8, 0.25);
// __itemMesh.scale(1.5, 1.5, 1.5);
// __itemuiMesh.rotate(0,0,0,-0.5, 0.65, -0.09);
// __itemuiMesh.translate(0.5, 0.3, 0.2);
// __itemuiMesh.scale(1.7, 1.7, 1.7);
// ItemModel.getFor(VanillaItemID.bone_meal, 15).setHandModel(__itemMesh,"items-opaque/Others/enr_ash_0.png");
// ItemModel.getFor(VanillaItemID.bone_meal, 15).setUiModel(__itemuiMesh,"items-opaque/Others/enr_ash_0.png");
IDRegistry.genItemID("ex_dustSaw");
Item.createItem("ex_dustSaw", "Saw Dust", {
    name: "enr_dustSaw",
    meta: 0
});
IDRegistry.genBlockID("ex_world_core");
Block.createBlockWithRotation("ex_world_core", [{
        name: "World Core",
        texture: [
            ["world_core", 0]
        ],
        inCreative: true
    }], {
    base: VanillaBlockID.obsidian,
    explosionres: 99999
});
ModelHelper.loadModel(BlockID.ex_world_core, 0, "world_core_0");
ModelHelper.loadModel(BlockID.ex_world_core, 1, "world_core_0");
ModelHelper.loadModel(BlockID.ex_world_core, 2, "world_core_1");
ModelHelper.loadModel(BlockID.ex_world_core, 3, "world_core_1");
Block.registerDropFunctionForID(BlockID.ex_world_core, function (blockCoords, blockID, blockData, diggingLevel) {
    //    SummonAPI.spawnItemEntity(blockCoords.x, blockCoords.y, blockCoords.z, blockID, 1, blockData);
    if (diggingLevel >= 4) {
        return [[blockID, 1, blockData]];
    }
    else {
        return [];
    }
});
/*SummonAPI.setItemEntityAddedCallbackOpen(BlockID.ex_world_core);
Callback.addCallback("ItemEntityAdded", function(id, count, entity, tag, coords){
    if (id == BlockID.ex_world_core) {
        SummonAPI.spawnLightningBolt(coords.x, coords.y, coords.z);
    };
});
*/
/*SummonAPI.setItemEntityAddedCallbackOpen(BlockID.ex_world_core);
Callback.addCallback("ItemEntityAdded",
function(id, count, entity, tag) {
    if (id == BlockID.ex_world_core) {
        let tags = tag.toScriptable();
        alert(JSON.stringify(tags));
    };
});
Callback.addCallback("ItemUse",
function(coords, item, block, isExternal, player) {
    SummonAPI.spawnItemEntity(coords.x, coords.y, coords.z, BlockID.ex_world_core, 1, 0, 0);
});
for (var i in Native.Dimension) {
    alert(i+":"+Native.Dimension[i]);
}
*/ 
IDRegistry.genBlockID("ex_compressedObsidian_level1");
Block.createBlock("ex_compressedObsidian_level1", [{
        name: "Compressed Obsidian level1",
        texture: [["ex_compressedObsidian_level1", 0]],
        inCreative: true
    }], {
    base: VanillaBlockID.obsidian,
    explosionres: 99999
});
IDRegistry.genBlockID("ex_compressedObsidian_level2");
Block.createBlock("ex_compressedObsidian_level2", [{
        name: "Compressed Obsidian level2",
        texture: [["ex_compressedObsidian_level2", 0]],
        inCreative: true
    }], {
    base: VanillaBlockID.obsidian,
    explosionres: 99999
});
var GeneratorAPI = {
    FloatingIsland: function (blockSource, x, y, z) {
        blockSource.setBlock(x, y, z, VanillaBlockID.stone, 0);
        blockSource.setBlock(x, y + 1, z, VanillaBlockID.stone, 0);
        blockSource.setBlock(x + 1, y + 1, z, VanillaBlockID.stone, 0);
        blockSource.setBlock(x, y + 1, z + 1, VanillaBlockID.stone, 0);
        blockSource.setBlock(x - 1, y + 1, z, VanillaBlockID.stone, 0);
        blockSource.setBlock(x, y + 1, z - 1, VanillaBlockID.stone, 0);
        for (var coords_X = x - 2; coords_X <= x + 2; coords_X++) {
            for (var coords_Z = z - 2; coords_Z <= z + 2; coords_Z++) {
                blockSource.setBlock(coords_X, y + 2, coords_Z, VanillaBlockID.stone, 0);
                blockSource.setBlock(coords_X, y + 3, coords_Z, VanillaBlockID.stone, 0);
            };
        };
        blockSource.setBlock(x - 2, y + 3, z - 2, 0, 0);
        blockSource.setBlock(x - 2, y + 3, z + 2, 0, 0);
        blockSource.setBlock(x + 2, y + 3, z - 2, 0, 0);
        blockSource.setBlock(x + 2, y + 3, z + 2, 0, 0);
        for (var coords_X = x - 1; coords_X <= x + 1; coords_X++) {
            for (var coords_Z = z - 1; coords_Z <= z + 1; coords_Z++) {
                blockSource.setBlock(coords_X, y + 4, coords_Z, VanillaBlockID.stone, 0);
            };
        };
        blockSource.setBlock(x, y + 5, z, VanillaBlockID.shulker_box, 8);
        TrophyAPI.setTrophyAtCoords(x, y + 5, z, blockSource);
    }
};
var ex_dimension = new Dimensions.CustomDimension("ex_broken_dimension", 45);
var ex_dimension_generator = Dimensions.newGenerator({
    layers: [{
            minY: 0,
            maxY: 128,
            yConversion: [
                [0, 0.5],
                [1, -0.5]
            ],
            material: {
                base: VanillaBlockID.stone,
                surface: {
                    id: VanillaBlockID.grass,
                    data: 0,
                    width: 2
                },
            },
            noise: {
                octaves: {
                    count: 4,
                    scale: 20
                }
            },
            materials: [{
                    base: VanillaBlockID.dirt,
                    diffuse: 0.1,
                    noise: {
                        octaves: [{
                                scale: 0.1,
                                weight: 0.6
                            }, {
                                scale: 0.2,
                                weight: 0.3
                            }]
                    }
                }]
        }]
});
ex_dimension_generator.setGenerateVanillaStructures(false);
ex_dimension_generator.setGenerateModStructures(true);
ex_dimension_generator.setModGenerationBaseDimension(2);
ex_dimension.setGenerator(ex_dimension_generator);
Callback.addCallback("ItemUse", function (coords, item, block, i, player) {
    if (block.id != BlockID.ex_world_core)
        return;
    Game.prevent();
    var blockSource = BlockSource.getDefaultForActor(player);
    var dim = Entity.getDimension(player);
    dim == 0 && Dimensions.transfer(player, ex_dimension.id);
    dim == ex_dimension.id && Dimensions.transfer(player, 0);
    dim != ex_dimension.id && dim != 0 && blockSource.explode(coords.x, coords.y, coords.z, 3, true);
});
Callback.addCallback("CustomDimensionTransfer", function (entity, dimfrom, dimto) {
    if (dimfrom == 0 && dimto == ex_dimension.id || dimfrom == ex_dimension.id && dimto == 0) {
        Updatable.addUpdatable({
            timer: 0,
            update: function () {
                this.timer++;
                if (this.timer == 20) {
                    var region = BlockSource.getDefaultForDimension(dimto);
                    var pos = Entity.getPosition(entity);
                    var surf_1 = GenerationUtils.findSurface(pos.x, 92, pos.z);
                    Updatable.addUpdatable({
                        age: 0,
                        update: function () {
                            Entity.setPosition(entity, surf_1.x, surf_1.y + 3, surf_1.z);
                            this.remove = this.age++ > 5;
                        }
                    });
                    this.remove = true;
                }
            }
        });
    };
});
World.addGenerationCallback(getMCPEVersion().array[1] == 11 ? "GenerateChunk" : "PreProcessChunk", function (chunkX, chunkZ, random, dimension, chunkSeed, worldSeed, dimensionSeed) {
    if (dimension == ex_dimension.id) {
        var blockSource = BlockSource.getCurrentWorldGenRegion();
        var chance = Math.floor(Math.random() * 100);
        for (var i = 0; i < 16; i++) {
            var coords = GenerationUtils.randomCoords(chunkX, chunkZ, 0, 32);
            GenerationUtils.generateOreCustom(coords.x, coords.y, coords.z, 0, 0, 20, true, [VanillaBlockID.stone, VanillaBlockID.dirt]);
        };
        for (var i = 0; i < 15; i++) {
            var coords = GenerationUtils.randomCoords(chunkX, chunkZ, 40, 64);
            GenerationUtils.generateOre(coords.x, coords.y, coords.z, VanillaBlockID.coal_ore, 0, Math.floor(Math.random() * 11) + 5);
        };
        for (var i = 0; i < 15; i++) {
            var coords = GenerationUtils.randomCoords(chunkX, chunkZ, 20, 40);
            GenerationUtils.generateOre(coords.x, coords.y, coords.z, VanillaBlockID.iron_ore, 0, Math.floor(Math.random() * 11) + 2);
        };
        for (var i = 0; i < 9; i++) {
            var coords = GenerationUtils.randomCoords(chunkX, chunkZ, 15, 20);
            GenerationUtils.generateOre(coords.x, coords.y, coords.z, VanillaBlockID.gold_ore, 0, Math.floor(Math.random() * 7));
        };
        for (var i = 0; i < 6; i++) {
            var coords = GenerationUtils.randomCoords(chunkX, chunkZ, 11, 12);
            GenerationUtils.generateOre(coords.x, coords.y, coords.z, VanillaBlockID.diamond_ore, 0, Math.floor(Math.random() * 6) + 1);
        };
        if (chance > 98) {
            var coords = GenerationUtils.randomCoords(chunkX, chunkZ, 128, 256);
            GeneratorAPI.FloatingIsland(blockSource, coords.x, coords.y, coords.z);
        };
    }
});
ModAPI.addAPICallback("ICore", function (api) {
    var RUBBER_SAPLING_GROUND_TILES = {
        2: true,
        3: true,
        60: true
    };
    IDRegistry.genItemID("ex_seedsRubber");
    Item.createItem("ex_seedsRubber", "Rubber Seeds", { name: "ex_seedsRubber", meta: 0 });
    Item.registerUseFunction("ex_seedsRubber", function (coords, item, tile, player) {
        var place = coords.relative;
        var blockSource = BlockSource.getDefaultForActor(player);
        var tile1 = blockSource.getBlock(place.x, place.y, place.z);
        var tile2 = blockSource.getBlock(place.x, place.y - 1, place.z);
        if (GenerationUtils.isTransparentBlock(tile1.id) && RUBBER_SAPLING_GROUND_TILES[tile2.id]) {
            blockSource.setBlock(place.x, place.y, place.z, BlockID.rubberTreeSapling);
            TileEntity.addTileEntity(place.x, place.y, place.z, blockSource);
            new PlayerEntity(player).setCarriedItem(item.id, item.count - 1, item.data);
        };
    });
    Recipes.addShaped({ id: ItemID.ex_hammersCopper, count: 1, data: 0 }, ["owo", "ohw", "hoo"], ["w", ItemID.ingotCopper, -1, "h", VanillaItemID.stick, 0]);
    Recipes.addShaped({ id: ItemID.ex_hammersTin, count: 1, data: 0 }, ["owo", "ohw", "hoo"], ["w", ItemID.ingotTin, -1, "h", VanillaItemID.stick, 0]);
    Recipes.addShaped({ id: ItemID.ex_hammersSilver, count: 1, data: 0 }, ["owo", "ohw", "hoo"], ["w", ItemID.ingotSilver, -1, "h", VanillaItemID.stick, 0]);
    Callback.addCallback("LevelSelected", function () {
        Recipes.addFurnace(BlockID.ex_oreSaltsCopper, BlockID.blockCopper, 0);
        Recipes.addFurnace(BlockID.ex_oreSaltsTin, BlockID.blockTin, 0);
        Recipes.addFurnace(BlockID.ex_oreSaltsLead, BlockID.blockLead, 0);
        Recipes.addFurnace(BlockID.ex_oreSaltsSilver, BlockID.blockSilver, 0);
        EXCore.registerFurnaceRecipes("Nickel", ItemID.ingotNickel, 0, 4);
        EXCore.registerFurnaceRecipes("Platinum", ItemID.ingotPlatinum, 0, 4);
        EXCore.registerFurnaceRecipes("Aluminum", ItemID.ingotAluminum, 0, 4);
    });
    EXCore.register("Copper", ItemID.ingotCopper, 0, 4);
    EXCore.register("Tin", ItemID.ingotTin, 0, 4);
    EXCore.register("Lead", ItemID.ingotLead, 0, 4);
    EXCore.register("Silver", ItemID.ingotSilver, 0, 4);
    Sieve.addSieved(VanillaBlockID.gravel, ItemID.ex_Copperbroken, 0, 1, 4, 14);
    Sieve.addSieved(VanillaBlockID.gravel, ItemID.ex_Tinbroken, 0, 1, 4, 14);
    Sieve.addSieved(VanillaBlockID.gravel, ItemID.ex_Leadbroken, 0, 1, 4, 11);
    Sieve.addSieved(VanillaBlockID.gravel, ItemID.ex_Silverbroken, 0, 1, 4, 9);
    Sieve.addSieved(VanillaBlockID.sand, ItemID.ex_seedsRubber, 0, 1, 1, 1);
    Sieve.addSieved(VanillaBlockID.sand, ItemID.ex_Coppercrushed, 0, 1, 4, 14);
    Sieve.addSieved(VanillaBlockID.sand, ItemID.ex_Tincrushed, 0, 1, 4, 14);
    Sieve.addSieved(VanillaBlockID.sand, ItemID.ex_Leadcrushed, 0, 1, 4, 11);
    Sieve.addSieved(VanillaBlockID.sand, ItemID.ex_Silvercrushed, 0, 1, 4, 9);
    Sieve.addSieved(VanillaBlockID.sand, ItemID.crushedUranium, 0, 1, 2, 1);
    Sieve.addSieved(BlockID.ex_dust, ItemID.ex_Copperpowered, 0, 1, 4, 14);
    Sieve.addSieved(BlockID.ex_dust, ItemID.ex_Tinpowered, 0, 1, 4, 14);
    Sieve.addSieved(BlockID.ex_dust, ItemID.ex_Leadpowered, 0, 1, 4, 11);
    Sieve.addSieved(BlockID.ex_dust, ItemID.ex_Silverpowered, 0, 1, 4, 9);
    Sieve.addSieved(BlockID.ex_gravelNether, ItemID.ex_netherCopperbroken, 0, 1, 4, 10);
    Sieve.addSieved(BlockID.ex_gravelNether, ItemID.ex_netherTinbroken, 0, 1, 4, 10);
    Sieve.addSieved(BlockID.ex_gravelNether, ItemID.ex_netherLeadbroken, 0, 1, 4, 17);
    Sieve.addSieved(BlockID.ex_gravelNether, ItemID.ex_netherSilverbroken, 0, 1, 4, 17);
    Sieve.addSieved(BlockID.ex_gravelEnder, ItemID.ex_enderCopperbroken, 0, 1, 4, 10);
    Sieve.addSieved(BlockID.ex_gravelEnder, ItemID.ex_enderTinbroken, 0, 1, 4, 10);
    Sieve.addSieved(BlockID.ex_gravelEnder, ItemID.ex_enderLeadbroken, 0, 1, 4, 17);
    Sieve.addSieved(BlockID.ex_gravelEnder, ItemID.ex_enderSilverbroken, 0, 1, 4, 17);
    Sieve.addSieved(BlockID.ex_saltcoarse, ItemID.ex_CopperDustSalts, 0, 1, 4, 10);
    Sieve.addSieved(BlockID.ex_saltcoarse, ItemID.ex_TinDustSalts, 0, 1, 4, 10);
    Sieve.addSieved(BlockID.ex_saltcoarse, ItemID.ex_LeadDustSalts, 0, 1, 4, 17);
    Sieve.addSieved(BlockID.ex_saltcoarse, ItemID.ex_SilverDustSalts, 0, 1, 4, 17);
});
var ForestryAPI_GROUP_ = {
    4: 0,
    132: 0,
    155: 0,
    27: 0,
    29: 0,
    157: 0,
    1: 1,
    2: 2,
    6: 5,
    134: 5,
    21: 3,
    149: 3,
    12: 4,
    140: 4,
    30: 4,
    26: 4
};
ModAPI.addAPICallback("ForestryAPI", function (api) {
    IDRegistry.genBlockID("ex_beeTrap");
    Block.createBlock("ex_beeTrap", [{ name: "Artificial Hive", texture: [["ex_ArtificialHive", 1], ["ex_ArtificialHive", 1], ["ex_ArtificialHive", 0]], inCreative: true }]);
    IDRegistry.genBlockID("ex_beeTrapTreated");
    Block.createBlock("ex_beeTrapTreated", [{ name: "Scented Artificial Hive", texture: [["ex_ScentedArtificialHive", 1], ["ex_ScentedArtificialHive", 1], ["ex_ScentedArtificialHive", 0]], inCreative: true }]);
    Block.setRandomTickCallback(BlockID.ex_beeTrapTreated, function (x, y, z, id, data, blockSource) {
        var G = Math.random();
        var BiomeID = blockSource.getBiome(x, z);
        if (G < 0.25) {
            for (var key in ForestryAPI_GROUP_) {
                if (BiomeID == key) {
                    TileEntity.destroyTileEntityAtCoords(x, y, z, blockSource);
                    blockSource.setBlock(x, y, z, BlockID.ex_beehive, ForestryAPI_GROUP_[key]);
                    TileEntity.addTileEntity(x, y, z, blockSource);
                }
            }
        }
        else {
            TileEntity.destroyTileEntityAtCoords(x, y, z, blockSource);
            blockSource.setBlock(x, y, z, BlockID.ex_beeTrap, 0);
            TileEntity.addTileEntity(x, y, z, blockSource);
        }
    });
});
ModAPI.addAPICallback("EquivalentAPI", function (api) {
    TrophyAPI.addTrophyForBlock(VanillaBlockID.shulker_box, 8, ItemID.vulcaniteAmulet, 0, 1, 1, 1);
});
//sieve update
Sieve.addSieve("ex_sieve_birch", "Birch Sieve", "planks_birch", "ex");
Sieve.addSieve("ex_sieve_acacia", "Acacia Sieve", "planks_acacia", "ex");
Sieve.addSieve("ex_sieve_big_oak", "Big Oak Sieve", "planks_big_oak", "ex");
Sieve.addSieve("ex_sieve_jungle", "Jungle Sieve", "planks_jungle", "ex");
Sieve.addSieve("ex_sieve_spruce", "Spruce Sieve", "planks_spruce", "ex");
Sieve.addSieve("ex_sieve_oak", "Oak Sieve", "planks_oak", "ex");
//api update
var registerRecipe = {
    barrel: function (resultId, id1, data1, id2, data2) {
        Recipes.addShaped({ id: resultId, count: 1, data: 0 }, ["non", "non", "ntn"], ["n", id1, data1, "t", id2, data2]);
    },
    sieve: function (resultId, id1, data1) {
        Recipes.addShaped({ id: resultId, count: 1, data: 0 }, ["non", "nnn", "mom"], ["n", id1, data1, "m", VanillaItemID.stick, 0]);
    },
    crook: function (resultId, id1) {
        Recipes.addShaped({ id: resultId, count: 1, data: 0 }, ["nn", "n", "n"], ["n", id1, 0]);
    },
    hammers: function (resultId, id1, data1) {
        Recipes.addShaped({ id: resultId, count: 1, data: 0 }, ["owo", "ohw", "hoo"], ["w", id1, data1, "h", VanillaItemID.stick, 0]);
    }
};
Callback.addCallback("PreLoaded", function () {
    Recipes.addFurnace(ItemID.ex_silkWorm, ItemID.ex_cookedSilkWorm, 0);
    Recipes.addFurnace(ItemID.ex_bucketPorcelainRaw, ItemID.ex_bucketPorcelainEmpty, 0);
    Recipes.addFurnace(ItemID.ex_slimeBallBlack, VanillaItemID.coal, 0);
    Recipes.addFurnace(BlockID.ex_crucibleRaw, BlockID.ex_crucible, 0);
    Recipes.addFurnace(BlockID.ex_oreSaltsGold, VanillaBlockID.gold_block, 0);
    Recipes.addFurnace(BlockID.ex_oreSaltsIron, VanillaBlockID.iron_block, 0);
    registerRecipe.barrel(BlockID.ex_barrelOak, VanillaBlockID.planks, 0, VanillaBlockID.wooden_slab, 0);
    registerRecipe.barrel(BlockID.ex_barrelBirch, VanillaBlockID.planks, 2, VanillaBlockID.wooden_slab, 2);
    registerRecipe.barrel(BlockID.ex_barrelAcacia, VanillaBlockID.planks, 4, VanillaBlockID.wooden_slab, 4);
    registerRecipe.barrel(BlockID.ex_barrelBigOak, VanillaBlockID.planks, 5, VanillaBlockID.wooden_slab, 5);
    registerRecipe.barrel(BlockID.ex_barrelJungle, VanillaBlockID.planks, 3, VanillaBlockID.wooden_slab, 3);
    registerRecipe.barrel(BlockID.ex_barrelSpruce, VanillaBlockID.planks, 1, VanillaBlockID.wooden_slab, 1);
    registerRecipe.barrel(BlockID.ex_barrelStone, VanillaBlockID.stone, 0, VanillaBlockID.double_stone_slab4, 2);
    registerRecipe.barrel(BlockID.ex_barrel_glass_black, VanillaBlockID.stained_glass, 15, VanillaBlockID.stained_glass_pane, 15);
    registerRecipe.barrel(BlockID.ex_barrel_glass_blue, VanillaBlockID.stained_glass, 11, VanillaBlockID.stained_glass_pane, 11);
    registerRecipe.barrel(BlockID.ex_barrel_glass_brown, VanillaBlockID.stained_glass, 12, VanillaBlockID.stained_glass_pane, 12);
    registerRecipe.barrel(BlockID.ex_barrel_glass_cyan, VanillaBlockID.stained_glass, 9, VanillaBlockID.stained_glass_pane, 9);
    registerRecipe.barrel(BlockID.ex_barrel_glass_gray, VanillaBlockID.stained_glass, 7, VanillaBlockID.stained_glass_pane, 7);
    registerRecipe.barrel(BlockID.ex_barrel_glass_green, VanillaBlockID.stained_glass, 13, VanillaBlockID.stained_glass_pane, 13);
    registerRecipe.barrel(BlockID.ex_barrel_glass_light_blue, VanillaBlockID.stained_glass, 3, VanillaBlockID.stained_glass_pane, 3);
    registerRecipe.barrel(BlockID.ex_barrel_glass_lime, VanillaBlockID.stained_glass, 5, VanillaBlockID.stained_glass_pane, 5);
    registerRecipe.barrel(BlockID.ex_barrel_glass_magenta, VanillaBlockID.stained_glass, 2, VanillaBlockID.stained_glass_pane, 2);
    registerRecipe.barrel(BlockID.ex_barrel_glass_orange, VanillaBlockID.stained_glass, 1, VanillaBlockID.stained_glass_pane, 1);
    registerRecipe.barrel(BlockID.ex_barrel_glass_pink, VanillaBlockID.stained_glass, 6, VanillaBlockID.stained_glass_pane, 6);
    registerRecipe.barrel(BlockID.ex_barrel_glass_purple, VanillaBlockID.stained_glass, 10, VanillaBlockID.stained_glass_pane, 10);
    registerRecipe.barrel(BlockID.ex_barrel_glass_red, VanillaBlockID.stained_glass, 14, VanillaBlockID.stained_glass_pane, 14);
    registerRecipe.barrel(BlockID.ex_barrel_glass_silver, VanillaBlockID.stained_glass, 8, VanillaBlockID.stained_glass_pane, 8);
    registerRecipe.barrel(BlockID.ex_barrel_glass_white, VanillaBlockID.stained_glass, 0, VanillaBlockID.stained_glass_pane, 0);
    registerRecipe.barrel(BlockID.ex_barrel_glass_yellow, VanillaBlockID.stained_glass, 4, VanillaBlockID.stained_glass_pane, 4);
    registerRecipe.sieve(BlockID.ex_sieve_birch, VanillaBlockID.planks, 2);
    registerRecipe.sieve(BlockID.ex_sieve_acacia, VanillaBlockID.planks, 4);
    registerRecipe.sieve(BlockID.ex_sieve_big_oak, VanillaBlockID.planks, 5);
    registerRecipe.sieve(BlockID.ex_sieve_jungle, VanillaBlockID.planks, 3);
    registerRecipe.sieve(BlockID.ex_sieve_spruce, VanillaBlockID.planks, 1);
    registerRecipe.sieve(BlockID.ex_sieve_oak, VanillaBlockID.planks, 0);
    registerRecipe.sieve(BlockID.ex_heavysieve_oak, VanillaBlockID.log, 0);
    registerRecipe.sieve(BlockID.ex_heavysieve_spruce, VanillaBlockID.log, 1);
    registerRecipe.sieve(BlockID.ex_heavysieve_birch, VanillaBlockID.log, 2);
    registerRecipe.sieve(BlockID.ex_heavysieve_jungle, VanillaBlockID.log, 3);
    registerRecipe.sieve(BlockID.ex_heavysieve_acacia, VanillaBlockID.log2, 0);
    registerRecipe.sieve(BlockID.ex_heavysieve_big_oak, VanillaBlockID.log2, 1);
    Recipes.addShaped({ id: BlockID.ex_endCake, count: 1, data: 0 }, ["nnn", "aba", "nnn"], ["n", VanillaItemID.ender_eye, 0, "b", VanillaItemID.golden_apple, 0, "a", VanillaBlockID.cake, 0]);
    Recipes.addShaped({ id: BlockID.ex_crucibleRaw, count: 1, data: 0 }, ["non", "non", "nnn"], ["n", ItemID.ex_porcelain, -1]);
    Recipes.addShaped({ id: ItemID.ex_bucketPorcelainRaw, count: 1, data: 0 }, ["non", "ono", ""], ["n", ItemID.ex_porcelain, -1]);
    Recipes.addShaped({ id: ItemID.ex_meshWood, count: 1, data: 0 }, ["nnn", "nnn", "nnn"], ["n", VanillaItemID.stick, -1]);
    registerRecipe.crook(ItemID.ex_crookWood, VanillaItemID.stick);
    registerRecipe.crook(ItemID.ex_crookBone, VanillaItemID.bone);
    registerRecipe.crook(ItemID.ex_crookReed, VanillaItemID.sugar_cane);
    registerRecipe.crook(ItemID.ex_crookGold, VanillaItemID.gold_ingot);
    Recipes.addShaped({ id: ItemID.ex_crookHay, count: 1, data: 0 }, ["ynn", "ono", "yny"], ["n", 296, 0, "o", VanillaBlockID.iron_bars, 0]);
    Recipes.addShaped({ id: ItemID.ex_slimeBallBlack, count: 1, data: 0 }, ["www", "wow", "www"], ["w", VanillaItemID.coal, 1, "o", VanillaItemID.slime_ball, 0]);
    registerRecipe.hammers(ItemID.ex_hammersWood, VanillaBlockID.planks, -1);
    registerRecipe.hammers(ItemID.ex_hammersStone, VanillaBlockID.cobblestone, 0);
    registerRecipe.hammers(ItemID.ex_hammersIron, VanillaItemID.iron_ingot, 0);
    registerRecipe.hammers(ItemID.ex_hammersGold, VanillaItemID.gold_ingot, 0);
    registerRecipe.hammers(ItemID.ex_hammersDiamond, VanillaItemID.diamond, 0);
    registerRecipe.hammers(ItemID.ex_hammersAluminum, ItemID.ingotAluminum, 0);
    registerRecipe.hammers(ItemID.ex_hammersNickel, ItemID.ingotNickel, 0);
    registerRecipe.hammers(ItemID.ex_hammersPlatinum, ItemID.ingotPlatinum, 0);
    Recipes.addShaped({ id: ItemID.ex_meshcoSilk, count: 1, data: 0 }, ["ooa", "ooa", "aaa"], ["o", ItemID.ex_meshSilk, 0]);
    Recipes.addShaped({ id: ItemID.ex_meshcoFlint, count: 1, data: 0 }, ["ooa", "ooa", "aaa"], ["o", ItemID.ex_meshFlint, 0]);
    Recipes.addShaped({ id: ItemID.ex_meshcoIron, count: 1, data: 0 }, ["ooa", "ooa", "aaa"], ["o", ItemID.ex_meshIron, 0]);
    Recipes.addShaped({ id: ItemID.ex_meshcoDiamond, count: 1, data: 0 }, ["ooa", "ooa", "aaa"], ["o", ItemID.ex_meshDiamond, 0]);
    Recipes.addShaped({ id: ItemID.ex_meshSilk, count: 1, data: 0 }, ["ooo", "ooo", "ooo"], ["o", VanillaItemID.string, 0]);
    Recipes.addShaped({ id: ItemID.ex_meshFlint, count: 1, data: 0 }, ["bab", "bob", "bab"], ["o", ItemID.ex_meshSilk, -1, "b", VanillaItemID.flint, -1]);
    Recipes.addShaped({ id: ItemID.ex_meshIron, count: 1, data: 0 }, ["bab", "bob", "bab"], ["o", ItemID.ex_meshFlint, -1, "b", VanillaItemID.iron_ingot, 0]);
    Recipes.addShaped({ id: ItemID.ex_meshDiamond, count: 1, data: 0 }, ["bab", "bob", "bab"], ["o", ItemID.ex_meshIron, -1, "b", VanillaItemID.diamond, 0]);
    Recipes.addShaped({ id: VanillaBlockID.cobblestone, count: 1, data: 0 }, ["bb", "bb", ""], ["b", ItemID.ex_stoneSmall, -1]);
    Recipes.addShaped({ id: ItemID.ex_porcelain, count: 1, data: 0 }, ["ba", "", ""], getMCPEVersion().array[1] == 11 ? ["b", VanillaItemID.clay_ball, 0, "a", VanillaItemID.dye, 15] : ["b", VanillaItemID.clay_ball, 0, "a", VanillaItemID.bone_meal, 0]);
    Recipes.addShaped({ id: BlockID.ex_furnacehalf, count: 1, data: 0 }, ["aaa", "a a", "aaa"], ["a", VanillaBlockID.double_stone_slab4, 3]);
    Recipes.addShaped({ id: BlockID.ex_compressedObsidian_level1, count: 1, data: 0 }, ["aaa", "aaa", "aaa"], ["a", VanillaBlockID.obsidian, 0]);
    Recipes.addShaped({ id: BlockID.ex_compressedObsidian_level2, count: 1, data: 0 }, ["aaa", "aaa", "aaa"], ["a", BlockID.ex_compressedObsidian_level1, 0]);
    Recipes.addShaped({ id: BlockID.ex_world_core, count: 1, data: 0 }, ["aca", "dbd", "aca"], ["a", BlockID.compresseddirt, 0, "b", BlockID.ex_compressedObsidian_level2, 0, "c", VanillaItemID.ender_pearl, 0, "d", VanillaBlockID.diamond_block, 0]);
    Recipes.addShaped({ id: BlockID.ex_damage0, count: 1, data: 0 }, ["cac", "aba", "cac"], ["a", VanillaBlockID.cobblestone, 0, "c", VanillaItemID.redstone, 0, "b", VanillaItemID.iron_pickaxe, 0]);
    Recipes.addShaped({ id: BlockID.ex_crucible_oak, count: 1, data: 0 }, ["aba", "aba", "aca"], ["a", VanillaBlockID.log, 0, "c", VanillaBlockID.wooden_slab, 0]);
    Recipes.addShaped({ id: BlockID.ex_crucible_spruce, count: 1, data: 0 }, ["aba", "aba", "aca"], ["a", VanillaBlockID.log, 1, "c", VanillaBlockID.wooden_slab, 1]);
    Recipes.addShaped({ id: BlockID.ex_crucible_birch, count: 1, data: 0 }, ["aba", "aba", "aca"], ["a", VanillaBlockID.log, 2, "c", VanillaBlockID.wooden_slab, 2]);
    Recipes.addShaped({ id: BlockID.ex_crucible_jungle, count: 1, data: 0 }, ["aba", "aba", "aca"], ["a", VanillaBlockID.log, 3, "c", VanillaBlockID.wooden_slab, 3]);
    Recipes.addShaped({ id: BlockID.ex_crucible_acacia, count: 1, data: 0 }, ["aba", "aba", "aca"], ["a", VanillaBlockID.log2, 0, "c", VanillaBlockID.wooden_slab, 4]);
    Recipes.addShaped({ id: BlockID.ex_crucible_big_oak, count: 1, data: 0 }, ["aba", "aba", "aca"], ["a", VanillaBlockID.log2, 1, "c", VanillaBlockID.wooden_slab, 5]);
    Recipes.addShapeless({ id: ItemID.baitSheep, count: 1, data: 0 }, [{ id: ItemID.ex_seedsGrass, data: 0 }, { id: 296, data: 0 }]);
    Recipes.addShapeless({ id: ItemID.baitPig, count: 1, data: 0 }, [{ id: 391, data: 0 }, { id: 391, data: 0 }]);
    Recipes.addShapeless({ id: ItemID.baitWolf, count: 1, data: 0 }, [{ id: 363, data: 0 }, { id: 352, data: 0 }]);
    Recipes.addShapeless({ id: ItemID.baitCow, count: 1, data: 0 }, [{ id: 296, data: 0 }, { id: 296, data: 0 }]);
    Recipes.addShapeless({ id: ItemID.baitChicken, count: 1, data: 0 }, [{ id: 295, data: 0 }, { id: 295, data: 0 }]);
    Recipes.addShapeless({ id: ItemID.baitOcelot, count: 1, data: 0 }, [{ id: 289, data: 0 }, { id: 349, data: 0 }]);
    CompressedCore.HammerRecipes(ItemID.ex_hammersCompressedWood, ItemID.ex_hammersWood);
    CompressedCore.HammerRecipes(ItemID.ex_hammersCompressedStone, ItemID.ex_hammersStone);
    CompressedCore.HammerRecipes(ItemID.ex_hammersCompressedIron, ItemID.ex_hammersIron);
    CompressedCore.HammerRecipes(ItemID.ex_hammersCompressedGold, ItemID.ex_hammersGold);
    CompressedCore.HammerRecipes(ItemID.ex_hammersCompressedDiamond, ItemID.ex_hammersDiamond);
    Recipes.addShaped({ id: ItemID.ex_hammersoresmasher, count: 1, data: 0 }, ["abc", "adb", "daa"], ["b", VanillaBlockID.crafting_table, 0, "c", VanillaItemID.diamond, 0, "d", VanillaItemID.stick, 0]);
    CompressedCore.BlockRecipes(BlockID.compressedstone, VanillaBlockID.stone);
    CompressedCore.BlockRecipes(BlockID.compresseddirt, VanillaBlockID.dirt);
    CompressedCore.BlockRecipes(BlockID.compressedgravel, VanillaBlockID.gravel);
    CompressedCore.BlockRecipes(BlockID.compressedsand, VanillaBlockID.sand);
    CompressedCore.BlockRecipes(BlockID.compresseddust, BlockID.ex_dust);
    CompressedCore.BlockRecipes(BlockID.compressednetherrack, VanillaBlockID.netherrack);
    CompressedCore.BlockRecipes(BlockID.compressedflint, VanillaItemID.flint);
    CompressedCore.BlockRecipes(BlockID.compressedcobblestone, VanillaBlockID.cobblestone);
    CompressedCore.BlockRecipes(BlockID.compressednethergravel, BlockID.ex_gravelNether);
    CompressedCore.BlockRecipes(BlockID.compressedendstone, VanillaBlockID.end_stone);
    CompressedCore.BlockRecipes(BlockID.compressedendergravel, BlockID.ex_gravelEnder);
    CompressedCore.BlockRecipes(BlockID.compressedsoulsand, VanillaBlockID.soul_sand);
});
Callback.addCallback("NativeGuiChanged", function (name) {
    if (name == "toast_screen") {
        Game.message(Translation.translate("§fMany new items have been added to the game, \nand the acquisition methods of these items should also be added in this mod. \nIf you have any reasonable suggestions, \nplease send them to the email"));
        Game.message(Translation.translate("§3Ex Nihilo Rebirth has now been renamed Ex Nihilo Origin"));
        Game.message(Translation.translate("§9Ex Nihilo Origin version: " + ExNihiloOriginVERSION));
        Game.message(Translation.translate("§6This version is not the final version. \nIf you find bugs, please send detailed information to \n3022504358@qq.com or 2584300846@qq.com"));
        Game.message(Translation.translate("§3If you can provide us with translation or texture, please also send it to email"));
    }
});
Translation.addTranslation("§3Ex Nihilo Rebirth has now been renamed Ex Nihilo Origin", {
    zh: "§3无中生有·重生 现已，更名为 无中生有·起源",
    en: "§3Ex Nihilo Rebirth has now been renamed Ex Nihilo Origin"
});
Translation.addTranslation("§9Ex Nihilo Origin version: " + ExNihiloOriginVERSION, {
    zh: "§9无中生有·起源 版本：" + ExNihiloOriginVERSION,
    en: "§9Ex Nihilo Origin version: " + ExNihiloOriginVERSION
});
Translation.addTranslation("§6This version is not the final version. \nIf you find bugs, please send detailed information to \n3022504358@qq.com or 2584300846@qq.com", {
    zh: "§6本版本非最终版本，\n如果你发现了bug，请讲详情信息发送到 \n3022504358@qq.com 或 2584300846@qq.com",
    en: "§6This version is not the final version. \nIf you find bugs, please send detailed information to \n3022504358@qq.com or 2584300846@qq.com"
});
Translation.addTranslation("§3If you can provide us with translation or texture, please also send it to email", {
    zh: "§3如果你可以为我们提供翻译或者是材质，也请发送到邮箱",
    en: "§3If you can provide us with translation or texture, please also send it to email."
});
Translation.addTranslation("§fMany new items have been added to the game, \nand the acquisition methods of these items should also be added in this mod. \nIf you have any reasonable suggestions, \nplease send them to the email", {
    zh: "§3游戏中增添了许多新的物品，\n本模组也应当添加这些物品的获取方式，\n如果你有什么合理的建议的话，\n请发送到邮箱",
    en: "§3Many new items have been added to the game, \nand the acquisition methods of these items should also be added in this mod. \nIf you have any reasonable suggestions, \nplease send them to the email"
});
var BaitAPI = {
    players: {},
    load: function () {
        Callback.addCallback("CustomDimensionTransfer", function (entity, from, to) {
            if (Player.isPlayer(entity)) {
                BaitAPI.players[entity] = true;
            };
        });
    },
    registerBait: function (animal, mob) {
        IDRegistry.genItemID("bait" + animal);
        Item.createItem("bait" + animal, animal + " Bait", {
            name: "bait_" + animal,
            meta: 0
        });
        IDRegistry.genBlockID("baitB" + animal);
        Block.createBlock("baitB" + animal, [{
                name: "",
                texture: [["bait_" + animal, 0], ["air", 0]],
                inCreative: false
            }]);
        Block.setDestroyTime(BlockID["baitB" + animal], 0);
        Block.registerDropFunction("baitB" + animal, function (coords, id, data, diggingLevel, enchant, item, blockSource) {
            TileEntity.destroyTileEntityAtCoords(coords.x, coords.y, coords.z, blockSource);
            return [[ItemID["bait" + animal], 1, 0]];
        });
        var render = new ICRender.CollisionShape();
        var entry = render.addEntry();
        entry.addBox(1, 1, 1, 0, 0, 0);
        BlockRenderer.setCustomCollisionShape(BlockID["baitB" + animal], 0, render);
        var render = new ICRender.Model();
        var model = BlockRenderer.Model();
        model.addBox(0, 0, 0, 1, 1, 1, [["air", 0]]);
        render.addEntry(model);
        BlockRenderer.setStaticICRender(BlockID["baitB" + animal], 0, render);
        Item.registerUseFunctionForID(ItemID["bait" + animal], function (coords, item, block, player) {
            var x = coords.x;
            var y = coords.y;
            var z = coords.z;
            var blockSource = BlockSource.getDefaultForActor(player);
            if (coords.side == 1) {
                blockSource.setBlock(x, y + 1, z, BlockID["baitB" + animal]);
                TileEntity.addTileEntity(x, y + 1, z, blockSource);
                new PlayerEntity(player).setCarriedItem(item.id, item.count - 1, item.data);
            };
        });
        TileEntity.registerPrototype(BlockID["baitB" + animal], {
            defaultValues: {},
            tick: function () {
                var IDA = [];
                if (this.blockSource.getBlockId(this.x, this.y - 1, this.z) == 0) {
                    this.blockSource.destroyBlock(this.x, this.y, this.z, false);
                    TileEntity.destroyTileEntityAtCoords(this.x, this.y, this.z, this.blockSource);
                };
                for (var xx = this.x - 5; xx <= this.x + 5; xx++) {
                    for (var zz = this.z - 5; zz <= this.z + 5; zz++) {
                        for (var yy = this.y - 5; yy <= this.y + 5; yy++) {
                            IDA.push(this.blockSource.getBlockId(xx, yy, zz));
                        }
                        ;
                    }
                    ;
                };
                for (var Player in BaitAPI.players) {
                    var player = Entity.getPosition(Player);
                    if (Count(IDA)[2] >= 9 && Count(IDA)[9] >= 4 && (Math.abs(player.x - this.x) > 5 || Math.abs(player.y - this.y) > 5 || Math.abs(player.z - this.z) > 5) && Math.random() * 100 < 0.05) {
                        Entity.spawn(this.x, this.y + 0.5, this.z, mob);
                        this.blockSource.setBlock(this.x, this.y, this.z, 0);
                        TileEntity.destroyTileEntityAtCoords(this.x, this.y, this.z, this.blockSource);
                    }
                    ;
                }
            },
            click: function (id, count, data, coords) {
                Game.prevent();
                return false;
            },
            init: function () {
                this.anim();
            },
            anim: function () {
                this.ani_Item = new Animation.Item(this.x + 0.5, this.y + 1 / 32, this.z + 0.5);
                this.ani_Item.describeItem({
                    id: ItemID["bait" + animal],
                    count: 1,
                    data: 0,
                    size: 0.5,
                    rotation: [Math.PI / 2, 0, 0]
                });
                this.ani_Item.load();
            },
            destroy: function () {
                if (this.ani_Item) {
                    this.ani_Item.destroy();
                };
            }
        });
    }
};
function Count(arr) {
    var obj = {};
    for (var i = 0, l = arr.length; i < l; i++) {
        var item = arr[i];
        obj[item] = (obj[item] + 1) || 1;
    }
    return obj;
};
BaitAPI.registerBait("Sheep", 13);
BaitAPI.registerBait("Cow", 11);
BaitAPI.registerBait("Chicken", 10);
BaitAPI.registerBait("Pig", 12);
BaitAPI.registerBait("Wolf", 14);
BaitAPI.registerBait("Ocelot", 22);
BaitAPI.load();
ExTileEntity.setup();
ModAPI.registerAPI("ENR", {
    EX: EXCore,
    Barrel: Barrel,
    Sieve: Sieve,
    Crucible: Crucible,
    ThreadHelper: threadHelper,
    ModVersion: ExNihiloOriginVERSION,
    requireGlobal: function (command) {
        return eval(command);
    }
});
Logger.Log("The API of Ex Nihilo Origin is named ENR.", "API");
